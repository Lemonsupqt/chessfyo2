var Mg=Object.defineProperty;var Ng=t=>{throw TypeError(t)};var jg=(t,e,n)=>e in t?Mg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var se=(t,e,n)=>jg(t,typeof e!="symbol"?e+"":e,n);var Ur=(t,e,n)=>e.has(t)?Ng("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function Ag(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Zf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ed={exports:{}},lo={},td={exports:{}},K={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=Symbol.for("react.element"),$g=Symbol.for("react.portal"),zg=Symbol.for("react.fragment"),Fg=Symbol.for("react.strict_mode"),Ug=Symbol.for("react.profiler"),Bg=Symbol.for("react.provider"),Hg=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),Vg=Symbol.for("react.suspense"),Kg=Symbol.for("react.memo"),Qg=Symbol.for("react.lazy"),uc=Symbol.iterator;function Gg(t){return t===null||typeof t!="object"?null:(t=uc&&t[uc]||t["@@iterator"],typeof t=="function"?t:null)}var nd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rd=Object.assign,id={};function Rr(t,e,n){this.props=t,this.context=e,this.refs=id,this.updater=n||nd}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sd(){}sd.prototype=Rr.prototype;function Xl(t,e,n){this.props=t,this.context=e,this.refs=id,this.updater=n||nd}var Jl=Xl.prototype=new sd;Jl.constructor=Xl;rd(Jl,Rr.prototype);Jl.isPureReactComponent=!0;var cc=Array.isArray,od=Object.prototype.hasOwnProperty,Zl={current:null},ad={key:!0,ref:!0,__self:!0,__source:!0};function ld(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)od.call(e,r)&&!ad.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$i,type:t,key:s,ref:o,props:i,_owner:Zl.current}}function qg(t,e){return{$$typeof:$i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function eu(t){return typeof t=="object"&&t!==null&&t.$$typeof===$i}function Yg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var fc=/\/+/g;function qo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Yg(""+t.key):e.toString(36)}function hs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $i:case $g:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+qo(o,0):r,cc(i)?(n="",t!=null&&(n=t.replace(fc,"$&/")+"/"),hs(i,e,n,"",function(u){return u})):i!=null&&(eu(i)&&(i=qg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(fc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",cc(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+qo(s,a);o+=hs(s,e,n,l,i)}else if(l=Gg(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+qo(s,a++),o+=hs(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ki(t,e,n){if(t==null)return t;var r=[],i=0;return hs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Xg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ve={current:null},ps={transition:null},Jg={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:ps,ReactCurrentOwner:Zl};function ud(){throw Error("act(...) is not supported in production builds of React.")}K.Children={map:Ki,forEach:function(t,e,n){Ki(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ki(t,function(){e++}),e},toArray:function(t){return Ki(t,function(e){return e})||[]},only:function(t){if(!eu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};K.Component=Rr;K.Fragment=zg;K.Profiler=Ug;K.PureComponent=Xl;K.StrictMode=Fg;K.Suspense=Vg;K.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jg;K.act=ud;K.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rd({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zl.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)od.call(e,l)&&!ad.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:$i,type:t.type,key:i,ref:s,props:r,_owner:o}};K.createContext=function(t){return t={$$typeof:Hg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Bg,_context:t},t.Consumer=t};K.createElement=ld;K.createFactory=function(t){var e=ld.bind(null,t);return e.type=t,e};K.createRef=function(){return{current:null}};K.forwardRef=function(t){return{$$typeof:Wg,render:t}};K.isValidElement=eu;K.lazy=function(t){return{$$typeof:Qg,_payload:{_status:-1,_result:t},_init:Xg}};K.memo=function(t,e){return{$$typeof:Kg,type:t,compare:e===void 0?null:e}};K.startTransition=function(t){var e=ps.transition;ps.transition={};try{t()}finally{ps.transition=e}};K.unstable_act=ud;K.useCallback=function(t,e){return Ve.current.useCallback(t,e)};K.useContext=function(t){return Ve.current.useContext(t)};K.useDebugValue=function(){};K.useDeferredValue=function(t){return Ve.current.useDeferredValue(t)};K.useEffect=function(t,e){return Ve.current.useEffect(t,e)};K.useId=function(){return Ve.current.useId()};K.useImperativeHandle=function(t,e,n){return Ve.current.useImperativeHandle(t,e,n)};K.useInsertionEffect=function(t,e){return Ve.current.useInsertionEffect(t,e)};K.useLayoutEffect=function(t,e){return Ve.current.useLayoutEffect(t,e)};K.useMemo=function(t,e){return Ve.current.useMemo(t,e)};K.useReducer=function(t,e,n){return Ve.current.useReducer(t,e,n)};K.useRef=function(t){return Ve.current.useRef(t)};K.useState=function(t){return Ve.current.useState(t)};K.useSyncExternalStore=function(t,e,n){return Ve.current.useSyncExternalStore(t,e,n)};K.useTransition=function(){return Ve.current.useTransition()};K.version="18.3.1";td.exports=K;var O=td.exports;const Zg=Zf(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0=O,t0=Symbol.for("react.element"),n0=Symbol.for("react.fragment"),r0=Object.prototype.hasOwnProperty,i0=e0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s0={key:!0,ref:!0,__self:!0,__source:!0};function cd(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)r0.call(e,r)&&!s0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:t0,type:t,key:s,ref:o,props:i,_owner:i0.current}}lo.Fragment=n0;lo.jsx=cd;lo.jsxs=cd;ed.exports=lo;var v=ed.exports,$a={},fd={exports:{}},ct={},dd={exports:{}},hd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,F){var H=L.length;L.push(F);e:for(;0<H;){var Z=H-1>>>1,ie=L[Z];if(0<i(ie,F))L[Z]=F,L[H]=ie,H=Z;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var F=L[0],H=L.pop();if(H!==F){L[0]=H;e:for(var Z=0,ie=L.length,dt=ie>>>1;Z<dt;){var ze=2*(Z+1)-1,Dt=L[ze],Fe=ze+1,W=L[Fe];if(0>i(Dt,H))Fe<ie&&0>i(W,Dt)?(L[Z]=W,L[Fe]=H,Z=Fe):(L[Z]=Dt,L[ze]=H,Z=ze);else if(Fe<ie&&0>i(W,H))L[Z]=W,L[Fe]=H,Z=Fe;else break e}}return F}function i(L,F){var H=L.sortIndex-F.sortIndex;return H!==0?H:L.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,g=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(L){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=L)r(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function _(L){if(C=!1,y(L),!g)if(n(l)!==null)g=!0,be(T);else{var F=n(u);F!==null&&Te(_,F.startTime-L)}}function T(L,F){g=!1,C&&(C=!1,m(I),I=-1),p=!0;var H=f;try{for(y(F),d=n(l);d!==null&&(!(d.expirationTime>F)||L&&!fe());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var ie=Z(d.expirationTime<=F);F=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(l)&&r(l),y(F)}else r(l);d=n(l)}if(d!==null)var dt=!0;else{var ze=n(u);ze!==null&&Te(_,ze.startTime-F),dt=!1}return dt}finally{d=null,f=H,p=!1}}var b=!1,R=null,I=-1,G=5,U=-1;function fe(){return!(t.unstable_now()-U<G)}function te(){if(R!==null){var L=t.unstable_now();U=L;var F=!0;try{F=R(!0,L)}finally{F?he():(b=!1,R=null)}}else b=!1}var he;if(typeof h=="function")he=function(){h(te)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Qe=nt.port2;nt.port1.onmessage=te,he=function(){Qe.postMessage(null)}}else he=function(){P(te,0)};function be(L){R=L,b||(b=!0,he())}function Te(L,F){I=P(function(){L(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,be(T))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(L){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var H=f;f=F;try{return L()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,F){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var H=f;f=L;try{return F()}finally{f=H}},t.unstable_scheduleCallback=function(L,F,H){var Z=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?Z+H:Z):H=Z,L){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=H+ie,L={id:c++,callback:F,priorityLevel:L,startTime:H,expirationTime:ie,sortIndex:-1},H>Z?(L.sortIndex=H,e(u,L),n(l)===null&&L===n(u)&&(C?(m(I),I=-1):C=!0,Te(_,H-Z))):(L.sortIndex=ie,e(l,L),g||p||(g=!0,be(T))),L},t.unstable_shouldYield=fe,t.unstable_wrapCallback=function(L){var F=f;return function(){var H=f;f=F;try{return L.apply(this,arguments)}finally{f=H}}}})(hd);dd.exports=hd;var o0=dd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a0=O,ut=o0;function D(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pd=new Set,yi={};function Bn(t,e){xr(t,e),xr(t+"Capture",e)}function xr(t,e){for(yi[t]=e,t=0;t<e.length;t++)pd.add(e[t])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),za=Object.prototype.hasOwnProperty,l0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,dc={},hc={};function u0(t){return za.call(hc,t)?!0:za.call(dc,t)?!1:l0.test(t)?hc[t]=!0:(dc[t]=!0,!1)}function c0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f0(t,e,n,r){if(e===null||typeof e>"u"||c0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ke(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var De={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){De[t]=new Ke(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];De[e]=new Ke(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){De[t]=new Ke(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){De[t]=new Ke(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){De[t]=new Ke(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){De[t]=new Ke(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){De[t]=new Ke(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){De[t]=new Ke(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){De[t]=new Ke(t,5,!1,t.toLowerCase(),null,!1,!1)});var tu=/[\-:]([a-z])/g;function nu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tu,nu);De[e]=new Ke(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tu,nu);De[e]=new Ke(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tu,nu);De[e]=new Ke(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){De[t]=new Ke(t,1,!1,t.toLowerCase(),null,!1,!1)});De.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){De[t]=new Ke(t,1,!1,t.toLowerCase(),null,!0,!0)});function ru(t,e,n,r){var i=De.hasOwnProperty(e)?De[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f0(e,n,i,r)&&(n=null),r||i===null?u0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kt=a0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Qi=Symbol.for("react.element"),ir=Symbol.for("react.portal"),sr=Symbol.for("react.fragment"),iu=Symbol.for("react.strict_mode"),Fa=Symbol.for("react.profiler"),gd=Symbol.for("react.provider"),md=Symbol.for("react.context"),su=Symbol.for("react.forward_ref"),Ua=Symbol.for("react.suspense"),Ba=Symbol.for("react.suspense_list"),ou=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),vd=Symbol.for("react.offscreen"),pc=Symbol.iterator;function Br(t){return t===null||typeof t!="object"?null:(t=pc&&t[pc]||t["@@iterator"],typeof t=="function"?t:null)}var ue=Object.assign,Yo;function Zr(t){if(Yo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Yo=e&&e[1]||""}return`
`+Yo+t}var Xo=!1;function Jo(t,e){if(!t||Xo)return"";Xo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Xo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zr(t):""}function d0(t){switch(t.tag){case 5:return Zr(t.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return t=Jo(t.type,!1),t;case 11:return t=Jo(t.type.render,!1),t;case 1:return t=Jo(t.type,!0),t;default:return""}}function Ha(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sr:return"Fragment";case ir:return"Portal";case Fa:return"Profiler";case iu:return"StrictMode";case Ua:return"Suspense";case Ba:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case md:return(t.displayName||"Context")+".Consumer";case gd:return(t._context.displayName||"Context")+".Provider";case su:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ou:return e=t.displayName||null,e!==null?e:Ha(t.type)||"Memo";case Zt:e=t._payload,t=t._init;try{return Ha(t(e))}catch{}}return null}function h0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ha(e);case 8:return e===iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function p0(t){var e=yd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Gi(t){t._valueTracker||(t._valueTracker=p0(t))}function Cd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ns(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wa(t,e){var n=e.checked;return ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function gc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sd(t,e){e=e.checked,e!=null&&ru(t,"checked",e,!1)}function Va(t,e){Sd(t,e);var n=yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ka(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ka(t,e.type,yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ka(t,e,n){(e!=="number"||Ns(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ei=Array.isArray;function mr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Qa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(D(91));return ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function vc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(D(92));if(ei(n)){if(1<n.length)throw Error(D(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yn(n)}}function _d(t,e){var n=yn(e.value),r=yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function yc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function kd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ga(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?kd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qi,xd=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qi=qi||document.createElement("div"),qi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ci(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g0=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(t){g0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),si[e]=si[t]})});function Ed(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||si.hasOwnProperty(t)&&si[t]?(""+e).trim():e+"px"}function Td(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Ed(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var m0=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qa(t,e){if(e){if(m0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(D(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(D(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(D(61))}if(e.style!=null&&typeof e.style!="object")throw Error(D(62))}}function Ya(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xa=null;function au(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ja=null,vr=null,yr=null;function Cc(t){if(t=Ui(t)){if(typeof Ja!="function")throw Error(D(280));var e=t.stateNode;e&&(e=po(e),Ja(t.stateNode,t.type,e))}}function Od(t){vr?yr?yr.push(t):yr=[t]:vr=t}function wd(){if(vr){var t=vr,e=yr;if(yr=vr=null,Cc(t),e)for(t=0;t<e.length;t++)Cc(e[t])}}function Pd(t,e){return t(e)}function Dd(){}var Zo=!1;function bd(t,e,n){if(Zo)return t(e,n);Zo=!0;try{return Pd(t,e,n)}finally{Zo=!1,(vr!==null||yr!==null)&&(Dd(),wd())}}function Si(t,e){var n=t.stateNode;if(n===null)return null;var r=po(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(D(231,e,typeof n));return n}var Za=!1;if(Bt)try{var Hr={};Object.defineProperty(Hr,"passive",{get:function(){Za=!0}}),window.addEventListener("test",Hr,Hr),window.removeEventListener("test",Hr,Hr)}catch{Za=!1}function v0(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var oi=!1,js=null,As=!1,el=null,y0={onError:function(t){oi=!0,js=t}};function C0(t,e,n,r,i,s,o,a,l){oi=!1,js=null,v0.apply(y0,arguments)}function S0(t,e,n,r,i,s,o,a,l){if(C0.apply(this,arguments),oi){if(oi){var u=js;oi=!1,js=null}else throw Error(D(198));As||(As=!0,el=u)}}function Hn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Rd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sc(t){if(Hn(t)!==t)throw Error(D(188))}function _0(t){var e=t.alternate;if(!e){if(e=Hn(t),e===null)throw Error(D(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sc(i),t;if(s===r)return Sc(i),e;s=s.sibling}throw Error(D(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(D(189))}}if(n.alternate!==r)throw Error(D(190))}if(n.tag!==3)throw Error(D(188));return n.stateNode.current===n?t:e}function Id(t){return t=_0(t),t!==null?Ld(t):null}function Ld(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ld(t);if(e!==null)return e;t=t.sibling}return null}var Md=ut.unstable_scheduleCallback,_c=ut.unstable_cancelCallback,k0=ut.unstable_shouldYield,x0=ut.unstable_requestPaint,de=ut.unstable_now,E0=ut.unstable_getCurrentPriorityLevel,lu=ut.unstable_ImmediatePriority,Nd=ut.unstable_UserBlockingPriority,$s=ut.unstable_NormalPriority,T0=ut.unstable_LowPriority,jd=ut.unstable_IdlePriority,uo=null,Mt=null;function O0(t){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(uo,t,void 0,(t.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:D0,w0=Math.log,P0=Math.LN2;function D0(t){return t>>>=0,t===0?32:31-(w0(t)/P0|0)|0}var Yi=64,Xi=4194304;function ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ti(a):(s&=o,s!==0&&(r=ti(s)))}else o=n&~i,o!==0?r=ti(o):s!==0&&(r=ti(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ot(e),i=1<<n,r|=t[n],e&=~i;return r}function b0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ot(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=b0(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function tl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ad(){var t=Yi;return Yi<<=1,!(Yi&4194240)&&(Yi=64),t}function ea(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ot(e),t[e]=n}function I0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ot(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function uu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ot(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var J=0;function $d(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zd,cu,Fd,Ud,Bd,nl=!1,Ji=[],ln=null,un=null,cn=null,_i=new Map,ki=new Map,nn=[],L0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kc(t,e){switch(t){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":_i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ki.delete(e.pointerId)}}function Wr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ui(e),e!==null&&cu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function M0(t,e,n,r,i){switch(e){case"focusin":return ln=Wr(ln,t,e,n,r,i),!0;case"dragenter":return un=Wr(un,t,e,n,r,i),!0;case"mouseover":return cn=Wr(cn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return _i.set(s,Wr(_i.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ki.set(s,Wr(ki.get(s)||null,t,e,n,r,i)),!0}return!1}function Hd(t){var e=bn(t.target);if(e!==null){var n=Hn(e);if(n!==null){if(e=n.tag,e===13){if(e=Rd(n),e!==null){t.blockedOn=e,Bd(t.priority,function(){Fd(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=rl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Xa=r,n.target.dispatchEvent(r),Xa=null}else return e=Ui(n),e!==null&&cu(e),t.blockedOn=n,!1;e.shift()}return!0}function xc(t,e,n){gs(t)&&n.delete(e)}function N0(){nl=!1,ln!==null&&gs(ln)&&(ln=null),un!==null&&gs(un)&&(un=null),cn!==null&&gs(cn)&&(cn=null),_i.forEach(xc),ki.forEach(xc)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,nl||(nl=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,N0)))}function xi(t){function e(i){return Vr(i,t)}if(0<Ji.length){Vr(Ji[0],t);for(var n=1;n<Ji.length;n++){var r=Ji[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ln!==null&&Vr(ln,t),un!==null&&Vr(un,t),cn!==null&&Vr(cn,t),_i.forEach(e),ki.forEach(e),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)Hd(n),n.blockedOn===null&&nn.shift()}var Cr=Kt.ReactCurrentBatchConfig,Fs=!0;function j0(t,e,n,r){var i=J,s=Cr.transition;Cr.transition=null;try{J=1,fu(t,e,n,r)}finally{J=i,Cr.transition=s}}function A0(t,e,n,r){var i=J,s=Cr.transition;Cr.transition=null;try{J=4,fu(t,e,n,r)}finally{J=i,Cr.transition=s}}function fu(t,e,n,r){if(Fs){var i=rl(t,e,n,r);if(i===null)ca(t,e,r,Us,n),kc(t,r);else if(M0(i,t,e,n,r))r.stopPropagation();else if(kc(t,r),e&4&&-1<L0.indexOf(t)){for(;i!==null;){var s=Ui(i);if(s!==null&&zd(s),s=rl(t,e,n,r),s===null&&ca(t,e,r,Us,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ca(t,e,r,null,n)}}var Us=null;function rl(t,e,n,r){if(Us=null,t=au(r),t=bn(t),t!==null)if(e=Hn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Rd(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Us=t,null}function Wd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E0()){case lu:return 1;case Nd:return 4;case $s:case T0:return 16;case jd:return 536870912;default:return 16}default:return 16}}var sn=null,du=null,ms=null;function Vd(){if(ms)return ms;var t,e=du,n=e.length,r,i="value"in sn?sn.value:sn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ms=i.slice(t,1<r?1-r:void 0)}function vs(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zi(){return!0}function Ec(){return!1}function ft(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Zi:Ec,this.isPropagationStopped=Ec,this}return ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zi)},persist:function(){},isPersistent:Zi}),e}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hu=ft(Ir),Fi=ue({},Ir,{view:0,detail:0}),$0=ft(Fi),ta,na,Kr,co=ue({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Kr&&(Kr&&t.type==="mousemove"?(ta=t.screenX-Kr.screenX,na=t.screenY-Kr.screenY):na=ta=0,Kr=t),ta)},movementY:function(t){return"movementY"in t?t.movementY:na}}),Tc=ft(co),z0=ue({},co,{dataTransfer:0}),F0=ft(z0),U0=ue({},Fi,{relatedTarget:0}),ra=ft(U0),B0=ue({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),H0=ft(B0),W0=ue({},Ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),V0=ft(W0),K0=ue({},Ir,{data:0}),Oc=ft(K0),Q0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},G0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Y0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q0[t])?!!e[t]:!1}function pu(){return Y0}var X0=ue({},Fi,{key:function(t){if(t.key){var e=Q0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?G0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pu,charCode:function(t){return t.type==="keypress"?vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J0=ft(X0),Z0=ue({},co,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wc=ft(Z0),em=ue({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pu}),tm=ft(em),nm=ue({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),rm=ft(nm),im=ue({},co,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sm=ft(im),om=[9,13,27,32],gu=Bt&&"CompositionEvent"in window,ai=null;Bt&&"documentMode"in document&&(ai=document.documentMode);var am=Bt&&"TextEvent"in window&&!ai,Kd=Bt&&(!gu||ai&&8<ai&&11>=ai),Pc=" ",Dc=!1;function Qd(t,e){switch(t){case"keyup":return om.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var or=!1;function lm(t,e){switch(t){case"compositionend":return Gd(e);case"keypress":return e.which!==32?null:(Dc=!0,Pc);case"textInput":return t=e.data,t===Pc&&Dc?null:t;default:return null}}function um(t,e){if(or)return t==="compositionend"||!gu&&Qd(t,e)?(t=Vd(),ms=du=sn=null,or=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Kd&&e.locale!=="ko"?null:e.data;default:return null}}var cm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function bc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cm[t.type]:e==="textarea"}function qd(t,e,n,r){Od(r),e=Bs(e,"onChange"),0<e.length&&(n=new hu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var li=null,Ei=null;function fm(t){oh(t,0)}function fo(t){var e=ur(t);if(Cd(e))return t}function dm(t,e){if(t==="change")return e}var Yd=!1;if(Bt){var ia;if(Bt){var sa="oninput"in document;if(!sa){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),sa=typeof Rc.oninput=="function"}ia=sa}else ia=!1;Yd=ia&&(!document.documentMode||9<document.documentMode)}function Ic(){li&&(li.detachEvent("onpropertychange",Xd),Ei=li=null)}function Xd(t){if(t.propertyName==="value"&&fo(Ei)){var e=[];qd(e,Ei,t,au(t)),bd(fm,e)}}function hm(t,e,n){t==="focusin"?(Ic(),li=e,Ei=n,li.attachEvent("onpropertychange",Xd)):t==="focusout"&&Ic()}function pm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fo(Ei)}function gm(t,e){if(t==="click")return fo(e)}function mm(t,e){if(t==="input"||t==="change")return fo(e)}function vm(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Pt=typeof Object.is=="function"?Object.is:vm;function Ti(t,e){if(Pt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!za.call(e,i)||!Pt(t[i],e[i]))return!1}return!0}function Lc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mc(t,e){var n=Lc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Lc(n)}}function Jd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zd(){for(var t=window,e=Ns();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ns(t.document)}return e}function mu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ym(t){var e=Zd(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jd(n.ownerDocument.documentElement,n)){if(r!==null&&mu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Mc(n,s);var o=Mc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cm=Bt&&"documentMode"in document&&11>=document.documentMode,ar=null,il=null,ui=null,sl=!1;function Nc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sl||ar==null||ar!==Ns(r)||(r=ar,"selectionStart"in r&&mu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ui&&Ti(ui,r)||(ui=r,r=Bs(il,"onSelect"),0<r.length&&(e=new hu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ar)))}function es(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var lr={animationend:es("Animation","AnimationEnd"),animationiteration:es("Animation","AnimationIteration"),animationstart:es("Animation","AnimationStart"),transitionend:es("Transition","TransitionEnd")},oa={},eh={};Bt&&(eh=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);function ho(t){if(oa[t])return oa[t];if(!lr[t])return t;var e=lr[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eh)return oa[t]=e[n];return t}var th=ho("animationend"),nh=ho("animationiteration"),rh=ho("animationstart"),ih=ho("transitionend"),sh=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sn(t,e){sh.set(t,e),Bn(e,[t])}for(var aa=0;aa<jc.length;aa++){var la=jc[aa],Sm=la.toLowerCase(),_m=la[0].toUpperCase()+la.slice(1);Sn(Sm,"on"+_m)}Sn(th,"onAnimationEnd");Sn(nh,"onAnimationIteration");Sn(rh,"onAnimationStart");Sn("dblclick","onDoubleClick");Sn("focusin","onFocus");Sn("focusout","onBlur");Sn(ih,"onTransitionEnd");xr("onMouseEnter",["mouseout","mouseover"]);xr("onMouseLeave",["mouseout","mouseover"]);xr("onPointerEnter",["pointerout","pointerover"]);xr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),km=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function Ac(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,S0(r,e,void 0,t),t.currentTarget=null}function oh(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Ac(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Ac(i,a,u),s=l}}}if(As)throw t=el,As=!1,el=null,t}function ne(t,e){var n=e[cl];n===void 0&&(n=e[cl]=new Set);var r=t+"__bubble";n.has(r)||(ah(e,t,2,!1),n.add(r))}function ua(t,e,n){var r=0;e&&(r|=4),ah(n,t,r,e)}var ts="_reactListening"+Math.random().toString(36).slice(2);function Oi(t){if(!t[ts]){t[ts]=!0,pd.forEach(function(n){n!=="selectionchange"&&(km.has(n)||ua(n,!1,t),ua(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ts]||(e[ts]=!0,ua("selectionchange",!1,e))}}function ah(t,e,n,r){switch(Wd(e)){case 1:var i=j0;break;case 4:i=A0;break;default:i=fu}n=i.bind(null,e,n,t),i=void 0,!Za||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ca(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=bn(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}bd(function(){var u=s,c=au(n),d=[];e:{var f=sh.get(t);if(f!==void 0){var p=hu,g=t;switch(t){case"keypress":if(vs(n)===0)break e;case"keydown":case"keyup":p=J0;break;case"focusin":g="focus",p=ra;break;case"focusout":g="blur",p=ra;break;case"beforeblur":case"afterblur":p=ra;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=F0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=tm;break;case th:case nh:case rh:p=H0;break;case ih:p=rm;break;case"scroll":p=$0;break;case"wheel":p=sm;break;case"copy":case"cut":case"paste":p=V0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=wc}var C=(e&4)!==0,P=!C&&t==="scroll",m=C?f!==null?f+"Capture":null:f;C=[];for(var h=u,y;h!==null;){y=h;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,m!==null&&(_=Si(h,m),_!=null&&C.push(wi(h,_,y)))),P)break;h=h.return}0<C.length&&(f=new p(f,g,null,n,c),d.push({event:f,listeners:C}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Xa&&(g=n.relatedTarget||n.fromElement)&&(bn(g)||g[Ht]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?bn(g):null,g!==null&&(P=Hn(g),g!==P||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(C=Tc,_="onMouseLeave",m="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(C=wc,_="onPointerLeave",m="onPointerEnter",h="pointer"),P=p==null?f:ur(p),y=g==null?f:ur(g),f=new C(_,h+"leave",p,n,c),f.target=P,f.relatedTarget=y,_=null,bn(c)===u&&(C=new C(m,h+"enter",g,n,c),C.target=y,C.relatedTarget=P,_=C),P=_,p&&g)t:{for(C=p,m=g,h=0,y=C;y;y=nr(y))h++;for(y=0,_=m;_;_=nr(_))y++;for(;0<h-y;)C=nr(C),h--;for(;0<y-h;)m=nr(m),y--;for(;h--;){if(C===m||m!==null&&C===m.alternate)break t;C=nr(C),m=nr(m)}C=null}else C=null;p!==null&&$c(d,f,p,C,!1),g!==null&&P!==null&&$c(d,P,g,C,!0)}}e:{if(f=u?ur(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var T=dm;else if(bc(f))if(Yd)T=mm;else{T=pm;var b=hm}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(T=gm);if(T&&(T=T(t,u))){qd(d,T,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Ka(f,"number",f.value)}switch(b=u?ur(u):window,t){case"focusin":(bc(b)||b.contentEditable==="true")&&(ar=b,il=u,ui=null);break;case"focusout":ui=il=ar=null;break;case"mousedown":sl=!0;break;case"contextmenu":case"mouseup":case"dragend":sl=!1,Nc(d,n,c);break;case"selectionchange":if(Cm)break;case"keydown":case"keyup":Nc(d,n,c)}var R;if(gu)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else or?Qd(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Kd&&n.locale!=="ko"&&(or||I!=="onCompositionStart"?I==="onCompositionEnd"&&or&&(R=Vd()):(sn=c,du="value"in sn?sn.value:sn.textContent,or=!0)),b=Bs(u,I),0<b.length&&(I=new Oc(I,t,null,n,c),d.push({event:I,listeners:b}),R?I.data=R:(R=Gd(n),R!==null&&(I.data=R)))),(R=am?lm(t,n):um(t,n))&&(u=Bs(u,"onBeforeInput"),0<u.length&&(c=new Oc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=R))}oh(d,e)})}function wi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Bs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Si(t,n),s!=null&&r.unshift(wi(t,s,i)),s=Si(t,e),s!=null&&r.push(wi(t,s,i))),t=t.return}return r}function nr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function $c(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Si(n,s),l!=null&&o.unshift(wi(n,l,a))):i||(l=Si(n,s),l!=null&&o.push(wi(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var xm=/\r\n?/g,Em=/\u0000|\uFFFD/g;function zc(t){return(typeof t=="string"?t:""+t).replace(xm,`
`).replace(Em,"")}function ns(t,e,n){if(e=zc(e),zc(t)!==e&&n)throw Error(D(425))}function Hs(){}var ol=null,al=null;function ll(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ul=typeof setTimeout=="function"?setTimeout:void 0,Tm=typeof clearTimeout=="function"?clearTimeout:void 0,Fc=typeof Promise=="function"?Promise:void 0,Om=typeof queueMicrotask=="function"?queueMicrotask:typeof Fc<"u"?function(t){return Fc.resolve(null).then(t).catch(wm)}:ul;function wm(t){setTimeout(function(){throw t})}function fa(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xi(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xi(e)}function fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Lr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Lr,Pi="__reactProps$"+Lr,Ht="__reactContainer$"+Lr,cl="__reactEvents$"+Lr,Pm="__reactListeners$"+Lr,Dm="__reactHandles$"+Lr;function bn(t){var e=t[Lt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ht]||n[Lt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uc(t);t!==null;){if(n=t[Lt])return n;t=Uc(t)}return e}t=n,n=t.parentNode}return null}function Ui(t){return t=t[Lt]||t[Ht],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ur(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(D(33))}function po(t){return t[Pi]||null}var fl=[],cr=-1;function _n(t){return{current:t}}function re(t){0>cr||(t.current=fl[cr],fl[cr]=null,cr--)}function ee(t,e){cr++,fl[cr]=t.current,t.current=e}var Cn={},Ae=_n(Cn),Ze=_n(!1),jn=Cn;function Er(t,e){var n=t.type.contextTypes;if(!n)return Cn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function et(t){return t=t.childContextTypes,t!=null}function Ws(){re(Ze),re(Ae)}function Bc(t,e,n){if(Ae.current!==Cn)throw Error(D(168));ee(Ae,e),ee(Ze,n)}function lh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(D(108,h0(t)||"Unknown",i));return ue({},n,r)}function Vs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Cn,jn=Ae.current,ee(Ae,t),ee(Ze,Ze.current),!0}function Hc(t,e,n){var r=t.stateNode;if(!r)throw Error(D(169));n?(t=lh(t,e,jn),r.__reactInternalMemoizedMergedChildContext=t,re(Ze),re(Ae),ee(Ae,t)):re(Ze),ee(Ze,n)}var $t=null,go=!1,da=!1;function uh(t){$t===null?$t=[t]:$t.push(t)}function bm(t){go=!0,uh(t)}function kn(){if(!da&&$t!==null){da=!0;var t=0,e=J;try{var n=$t;for(J=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$t=null,go=!1}catch(i){throw $t!==null&&($t=$t.slice(t+1)),Md(lu,kn),i}finally{J=e,da=!1}}return null}var fr=[],dr=0,Ks=null,Qs=0,pt=[],gt=0,An=null,zt=1,Ft="";function wn(t,e){fr[dr++]=Qs,fr[dr++]=Ks,Ks=t,Qs=e}function ch(t,e,n){pt[gt++]=zt,pt[gt++]=Ft,pt[gt++]=An,An=t;var r=zt;t=Ft;var i=32-Ot(r)-1;r&=~(1<<i),n+=1;var s=32-Ot(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zt=1<<32-Ot(e)+i|n<<i|r,Ft=s+t}else zt=1<<s|n<<i|r,Ft=t}function vu(t){t.return!==null&&(wn(t,1),ch(t,1,0))}function yu(t){for(;t===Ks;)Ks=fr[--dr],fr[dr]=null,Qs=fr[--dr],fr[dr]=null;for(;t===An;)An=pt[--gt],pt[gt]=null,Ft=pt[--gt],pt[gt]=null,zt=pt[--gt],pt[gt]=null}var lt=null,at=null,oe=!1,Tt=null;function fh(t,e){var n=vt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,lt=t,at=fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,lt=t,at=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=An!==null?{id:zt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,lt=t,at=null,!0):!1;default:return!1}}function dl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hl(t){if(oe){var e=at;if(e){var n=e;if(!Wc(t,e)){if(dl(t))throw Error(D(418));e=fn(n.nextSibling);var r=lt;e&&Wc(t,e)?fh(r,n):(t.flags=t.flags&-4097|2,oe=!1,lt=t)}}else{if(dl(t))throw Error(D(418));t.flags=t.flags&-4097|2,oe=!1,lt=t}}}function Vc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;lt=t}function rs(t){if(t!==lt)return!1;if(!oe)return Vc(t),oe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ll(t.type,t.memoizedProps)),e&&(e=at)){if(dl(t))throw dh(),Error(D(418));for(;e;)fh(t,e),e=fn(e.nextSibling)}if(Vc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(D(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){at=fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}at=null}}else at=lt?fn(t.stateNode.nextSibling):null;return!0}function dh(){for(var t=at;t;)t=fn(t.nextSibling)}function Tr(){at=lt=null,oe=!1}function Cu(t){Tt===null?Tt=[t]:Tt.push(t)}var Rm=Kt.ReactCurrentBatchConfig;function Qr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(D(309));var r=n.stateNode}if(!r)throw Error(D(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(D(284));if(!n._owner)throw Error(D(290,t))}return t}function is(t,e){throw t=Object.prototype.toString.call(e),Error(D(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Kc(t){var e=t._init;return e(t._payload)}function hh(t){function e(m,h){if(t){var y=m.deletions;y===null?(m.deletions=[h],m.flags|=16):y.push(h)}}function n(m,h){if(!t)return null;for(;h!==null;)e(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function i(m,h){return m=gn(m,h),m.index=0,m.sibling=null,m}function s(m,h,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<h?(m.flags|=2,h):y):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,h,y,_){return h===null||h.tag!==6?(h=Ca(y,m.mode,_),h.return=m,h):(h=i(h,y),h.return=m,h)}function l(m,h,y,_){var T=y.type;return T===sr?c(m,h,y.props.children,_,y.key):h!==null&&(h.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zt&&Kc(T)===h.type)?(_=i(h,y.props),_.ref=Qr(m,h,y),_.return=m,_):(_=Es(y.type,y.key,y.props,null,m.mode,_),_.ref=Qr(m,h,y),_.return=m,_)}function u(m,h,y,_){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=Sa(y,m.mode,_),h.return=m,h):(h=i(h,y.children||[]),h.return=m,h)}function c(m,h,y,_,T){return h===null||h.tag!==7?(h=Mn(y,m.mode,_,T),h.return=m,h):(h=i(h,y),h.return=m,h)}function d(m,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=Ca(""+h,m.mode,y),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Qi:return y=Es(h.type,h.key,h.props,null,m.mode,y),y.ref=Qr(m,null,h),y.return=m,y;case ir:return h=Sa(h,m.mode,y),h.return=m,h;case Zt:var _=h._init;return d(m,_(h._payload),y)}if(ei(h)||Br(h))return h=Mn(h,m.mode,y,null),h.return=m,h;is(m,h)}return null}function f(m,h,y,_){var T=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return T!==null?null:a(m,h,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qi:return y.key===T?l(m,h,y,_):null;case ir:return y.key===T?u(m,h,y,_):null;case Zt:return T=y._init,f(m,h,T(y._payload),_)}if(ei(y)||Br(y))return T!==null?null:c(m,h,y,_,null);is(m,y)}return null}function p(m,h,y,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(y)||null,a(h,m,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Qi:return m=m.get(_.key===null?y:_.key)||null,l(h,m,_,T);case ir:return m=m.get(_.key===null?y:_.key)||null,u(h,m,_,T);case Zt:var b=_._init;return p(m,h,y,b(_._payload),T)}if(ei(_)||Br(_))return m=m.get(y)||null,c(h,m,_,T,null);is(h,_)}return null}function g(m,h,y,_){for(var T=null,b=null,R=h,I=h=0,G=null;R!==null&&I<y.length;I++){R.index>I?(G=R,R=null):G=R.sibling;var U=f(m,R,y[I],_);if(U===null){R===null&&(R=G);break}t&&R&&U.alternate===null&&e(m,R),h=s(U,h,I),b===null?T=U:b.sibling=U,b=U,R=G}if(I===y.length)return n(m,R),oe&&wn(m,I),T;if(R===null){for(;I<y.length;I++)R=d(m,y[I],_),R!==null&&(h=s(R,h,I),b===null?T=R:b.sibling=R,b=R);return oe&&wn(m,I),T}for(R=r(m,R);I<y.length;I++)G=p(R,m,I,y[I],_),G!==null&&(t&&G.alternate!==null&&R.delete(G.key===null?I:G.key),h=s(G,h,I),b===null?T=G:b.sibling=G,b=G);return t&&R.forEach(function(fe){return e(m,fe)}),oe&&wn(m,I),T}function C(m,h,y,_){var T=Br(y);if(typeof T!="function")throw Error(D(150));if(y=T.call(y),y==null)throw Error(D(151));for(var b=T=null,R=h,I=h=0,G=null,U=y.next();R!==null&&!U.done;I++,U=y.next()){R.index>I?(G=R,R=null):G=R.sibling;var fe=f(m,R,U.value,_);if(fe===null){R===null&&(R=G);break}t&&R&&fe.alternate===null&&e(m,R),h=s(fe,h,I),b===null?T=fe:b.sibling=fe,b=fe,R=G}if(U.done)return n(m,R),oe&&wn(m,I),T;if(R===null){for(;!U.done;I++,U=y.next())U=d(m,U.value,_),U!==null&&(h=s(U,h,I),b===null?T=U:b.sibling=U,b=U);return oe&&wn(m,I),T}for(R=r(m,R);!U.done;I++,U=y.next())U=p(R,m,I,U.value,_),U!==null&&(t&&U.alternate!==null&&R.delete(U.key===null?I:U.key),h=s(U,h,I),b===null?T=U:b.sibling=U,b=U);return t&&R.forEach(function(te){return e(m,te)}),oe&&wn(m,I),T}function P(m,h,y,_){if(typeof y=="object"&&y!==null&&y.type===sr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qi:e:{for(var T=y.key,b=h;b!==null;){if(b.key===T){if(T=y.type,T===sr){if(b.tag===7){n(m,b.sibling),h=i(b,y.props.children),h.return=m,m=h;break e}}else if(b.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Zt&&Kc(T)===b.type){n(m,b.sibling),h=i(b,y.props),h.ref=Qr(m,b,y),h.return=m,m=h;break e}n(m,b);break}else e(m,b);b=b.sibling}y.type===sr?(h=Mn(y.props.children,m.mode,_,y.key),h.return=m,m=h):(_=Es(y.type,y.key,y.props,null,m.mode,_),_.ref=Qr(m,h,y),_.return=m,m=_)}return o(m);case ir:e:{for(b=y.key;h!==null;){if(h.key===b)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(m,h.sibling),h=i(h,y.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else e(m,h);h=h.sibling}h=Sa(y,m.mode,_),h.return=m,m=h}return o(m);case Zt:return b=y._init,P(m,h,b(y._payload),_)}if(ei(y))return g(m,h,y,_);if(Br(y))return C(m,h,y,_);is(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(m,h.sibling),h=i(h,y),h.return=m,m=h):(n(m,h),h=Ca(y,m.mode,_),h.return=m,m=h),o(m)):n(m,h)}return P}var Or=hh(!0),ph=hh(!1),Gs=_n(null),qs=null,hr=null,Su=null;function _u(){Su=hr=qs=null}function ku(t){var e=Gs.current;re(Gs),t._currentValue=e}function pl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Sr(t,e){qs=t,Su=hr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Je=!0),t.firstContext=null)}function Ct(t){var e=t._currentValue;if(Su!==t)if(t={context:t,memoizedValue:e,next:null},hr===null){if(qs===null)throw Error(D(308));hr=t,qs.dependencies={lanes:0,firstContext:t}}else hr=hr.next=t;return e}var Rn=null;function xu(t){Rn===null?Rn=[t]:Rn.push(t)}function gh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,xu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Wt(t,r)}function Wt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var en=!1;function Eu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ut(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,q&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Wt(t,n)}return i=r.interleaved,i===null?(e.next=e,xu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Wt(t,n)}function ys(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}function Qc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ys(t,e,n,r){var i=t.updateQueue;en=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,C=a;switch(f=e,p=n,C.tag){case 1:if(g=C.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=C.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=ue({},d,f);break e;case 2:en=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zn|=o,t.lanes=o,t.memoizedState=d}}function Gc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(D(191,i));i.call(r)}}}var Bi={},Nt=_n(Bi),Di=_n(Bi),bi=_n(Bi);function In(t){if(t===Bi)throw Error(D(174));return t}function Tu(t,e){switch(ee(bi,e),ee(Di,t),ee(Nt,Bi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ga(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ga(e,t)}re(Nt),ee(Nt,e)}function wr(){re(Nt),re(Di),re(bi)}function vh(t){In(bi.current);var e=In(Nt.current),n=Ga(e,t.type);e!==n&&(ee(Di,t),ee(Nt,n))}function Ou(t){Di.current===t&&(re(Nt),re(Di))}var ae=_n(0);function Xs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ha=[];function wu(){for(var t=0;t<ha.length;t++)ha[t]._workInProgressVersionPrimary=null;ha.length=0}var Cs=Kt.ReactCurrentDispatcher,pa=Kt.ReactCurrentBatchConfig,$n=0,le=null,Ce=null,xe=null,Js=!1,ci=!1,Ri=0,Im=0;function Ie(){throw Error(D(321))}function Pu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Pt(t[n],e[n]))return!1;return!0}function Du(t,e,n,r,i,s){if($n=s,le=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cs.current=t===null||t.memoizedState===null?jm:Am,t=n(r,i),ci){s=0;do{if(ci=!1,Ri=0,25<=s)throw Error(D(301));s+=1,xe=Ce=null,e.updateQueue=null,Cs.current=$m,t=n(r,i)}while(ci)}if(Cs.current=Zs,e=Ce!==null&&Ce.next!==null,$n=0,xe=Ce=le=null,Js=!1,e)throw Error(D(300));return t}function bu(){var t=Ri!==0;return Ri=0,t}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xe===null?le.memoizedState=xe=t:xe=xe.next=t,xe}function St(){if(Ce===null){var t=le.alternate;t=t!==null?t.memoizedState:null}else t=Ce.next;var e=xe===null?le.memoizedState:xe.next;if(e!==null)xe=e,Ce=t;else{if(t===null)throw Error(D(310));Ce=t,t={memoizedState:Ce.memoizedState,baseState:Ce.baseState,baseQueue:Ce.baseQueue,queue:Ce.queue,next:null},xe===null?le.memoizedState=xe=t:xe=xe.next=t}return xe}function Ii(t,e){return typeof e=="function"?e(t):e}function ga(t){var e=St(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=Ce,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if(($n&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,le.lanes|=c,zn|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Pt(r,e.memoizedState)||(Je=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,le.lanes|=s,zn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ma(t){var e=St(),n=e.queue;if(n===null)throw Error(D(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Pt(s,e.memoizedState)||(Je=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function yh(){}function Ch(t,e){var n=le,r=St(),i=e(),s=!Pt(r.memoizedState,i);if(s&&(r.memoizedState=i,Je=!0),r=r.queue,Ru(kh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xe!==null&&xe.memoizedState.tag&1){if(n.flags|=2048,Li(9,_h.bind(null,n,r,i,e),void 0,null),Ee===null)throw Error(D(349));$n&30||Sh(n,e,i)}return i}function Sh(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _h(t,e,n,r){e.value=n,e.getSnapshot=r,xh(e)&&Eh(t)}function kh(t,e,n){return n(function(){xh(e)&&Eh(t)})}function xh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Pt(t,n)}catch{return!0}}function Eh(t){var e=Wt(t,1);e!==null&&wt(e,t,1,-1)}function qc(t){var e=It();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:t},e.queue=t,t=t.dispatch=Nm.bind(null,le,t),[e.memoizedState,t]}function Li(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=le.updateQueue,e===null?(e={lastEffect:null,stores:null},le.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Th(){return St().memoizedState}function Ss(t,e,n,r){var i=It();le.flags|=t,i.memoizedState=Li(1|e,n,void 0,r===void 0?null:r)}function mo(t,e,n,r){var i=St();r=r===void 0?null:r;var s=void 0;if(Ce!==null){var o=Ce.memoizedState;if(s=o.destroy,r!==null&&Pu(r,o.deps)){i.memoizedState=Li(e,n,s,r);return}}le.flags|=t,i.memoizedState=Li(1|e,n,s,r)}function Yc(t,e){return Ss(8390656,8,t,e)}function Ru(t,e){return mo(2048,8,t,e)}function Oh(t,e){return mo(4,2,t,e)}function wh(t,e){return mo(4,4,t,e)}function Ph(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Dh(t,e,n){return n=n!=null?n.concat([t]):null,mo(4,4,Ph.bind(null,e,t),n)}function Iu(){}function bh(t,e){var n=St();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Rh(t,e){var n=St();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Pu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ih(t,e,n){return $n&21?(Pt(n,e)||(n=Ad(),le.lanes|=n,zn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Je=!0),t.memoizedState=n)}function Lm(t,e){var n=J;J=n!==0&&4>n?n:4,t(!0);var r=pa.transition;pa.transition={};try{t(!1),e()}finally{J=n,pa.transition=r}}function Lh(){return St().memoizedState}function Mm(t,e,n){var r=pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mh(t))Nh(e,n);else if(n=gh(t,e,n,r),n!==null){var i=He();wt(n,t,r,i),jh(n,e,r)}}function Nm(t,e,n){var r=pn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mh(t))Nh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Pt(a,o)){var l=e.interleaved;l===null?(i.next=i,xu(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=gh(t,e,i,r),n!==null&&(i=He(),wt(n,t,r,i),jh(n,e,r))}}function Mh(t){var e=t.alternate;return t===le||e!==null&&e===le}function Nh(t,e){ci=Js=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jh(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,uu(t,n)}}var Zs={readContext:Ct,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},jm={readContext:Ct,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:Ct,useEffect:Yc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ss(4194308,4,Ph.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ss(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ss(4,2,t,e)},useMemo:function(t,e){var n=It();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=It();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Mm.bind(null,le,t),[r.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:qc,useDebugValue:Iu,useDeferredValue:function(t){return It().memoizedState=t},useTransition:function(){var t=qc(!1),e=t[0];return t=Lm.bind(null,t[1]),It().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=le,i=It();if(oe){if(n===void 0)throw Error(D(407));n=n()}else{if(n=e(),Ee===null)throw Error(D(349));$n&30||Sh(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Yc(kh.bind(null,r,s,t),[t]),r.flags|=2048,Li(9,_h.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=It(),e=Ee.identifierPrefix;if(oe){var n=Ft,r=zt;n=(r&~(1<<32-Ot(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Im++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Am={readContext:Ct,useCallback:bh,useContext:Ct,useEffect:Ru,useImperativeHandle:Dh,useInsertionEffect:Oh,useLayoutEffect:wh,useMemo:Rh,useReducer:ga,useRef:Th,useState:function(){return ga(Ii)},useDebugValue:Iu,useDeferredValue:function(t){var e=St();return Ih(e,Ce.memoizedState,t)},useTransition:function(){var t=ga(Ii)[0],e=St().memoizedState;return[t,e]},useMutableSource:yh,useSyncExternalStore:Ch,useId:Lh,unstable_isNewReconciler:!1},$m={readContext:Ct,useCallback:bh,useContext:Ct,useEffect:Ru,useImperativeHandle:Dh,useInsertionEffect:Oh,useLayoutEffect:wh,useMemo:Rh,useReducer:ma,useRef:Th,useState:function(){return ma(Ii)},useDebugValue:Iu,useDeferredValue:function(t){var e=St();return Ce===null?e.memoizedState=t:Ih(e,Ce.memoizedState,t)},useTransition:function(){var t=ma(Ii)[0],e=St().memoizedState;return[t,e]},useMutableSource:yh,useSyncExternalStore:Ch,useId:Lh,unstable_isNewReconciler:!1};function xt(t,e){if(t&&t.defaultProps){e=ue({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gl(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ue({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vo={isMounted:function(t){return(t=t._reactInternals)?Hn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=He(),i=pn(t),s=Ut(r,i);s.payload=e,n!=null&&(s.callback=n),e=dn(t,s,i),e!==null&&(wt(e,t,i,r),ys(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=He(),i=pn(t),s=Ut(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dn(t,s,i),e!==null&&(wt(e,t,i,r),ys(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=He(),r=pn(t),i=Ut(n,r);i.tag=2,e!=null&&(i.callback=e),e=dn(t,i,r),e!==null&&(wt(e,t,r,n),ys(e,t,r))}};function Xc(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ti(n,r)||!Ti(i,s):!0}function Ah(t,e,n){var r=!1,i=Cn,s=e.contextType;return typeof s=="object"&&s!==null?s=Ct(s):(i=et(e)?jn:Ae.current,r=e.contextTypes,s=(r=r!=null)?Er(t,i):Cn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Jc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vo.enqueueReplaceState(e,e.state,null)}function ml(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Eu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ct(s):(s=et(e)?jn:Ae.current,i.context=Er(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(gl(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&vo.enqueueReplaceState(i,i.state,null),Ys(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Pr(t,e){try{var n="",r=e;do n+=d0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function va(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zm=typeof WeakMap=="function"?WeakMap:Map;function $h(t,e,n){n=Ut(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){to||(to=!0,wl=r),vl(t,e)},n}function zh(t,e,n){n=Ut(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){vl(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vl(t,e),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zc(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zm;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Zm.bind(null,t,e,n),e.then(t,t))}function ef(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function tf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ut(-1,1),e.tag=2,dn(n,e,1))),n.lanes|=1),t)}var Fm=Kt.ReactCurrentOwner,Je=!1;function Be(t,e,n,r){e.child=t===null?ph(e,null,n,r):Or(e,t.child,n,r)}function nf(t,e,n,r,i){n=n.render;var s=e.ref;return Sr(e,i),r=Du(t,e,n,r,s,i),n=bu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vt(t,e,i)):(oe&&n&&vu(e),e.flags|=1,Be(t,e,r,i),e.child)}function rf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Fu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Fh(t,e,s,r,i)):(t=Es(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ti,n(o,r)&&t.ref===e.ref)return Vt(t,e,i)}return e.flags|=1,t=gn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Fh(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ti(s,r)&&t.ref===e.ref)if(Je=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Je=!0);else return e.lanes=t.lanes,Vt(t,e,i)}return yl(t,e,n,r,i)}function Uh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(gr,ot),ot|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ee(gr,ot),ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ee(gr,ot),ot|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ee(gr,ot),ot|=r;return Be(t,e,i,n),e.child}function Bh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yl(t,e,n,r,i){var s=et(n)?jn:Ae.current;return s=Er(e,s),Sr(e,i),n=Du(t,e,n,r,s,i),r=bu(),t!==null&&!Je?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vt(t,e,i)):(oe&&r&&vu(e),e.flags|=1,Be(t,e,n,i),e.child)}function sf(t,e,n,r,i){if(et(n)){var s=!0;Vs(e)}else s=!1;if(Sr(e,i),e.stateNode===null)_s(t,e),Ah(e,n,r),ml(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ct(u):(u=et(n)?jn:Ae.current,u=Er(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Jc(e,o,r,u),en=!1;var f=e.memoizedState;o.state=f,Ys(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Ze.current||en?(typeof c=="function"&&(gl(e,n,c,r),l=e.memoizedState),(a=en||Xc(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,mh(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:xt(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ct(l):(l=et(n)?jn:Ae.current,l=Er(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Jc(e,o,r,l),en=!1,f=e.memoizedState,o.state=f,Ys(e,r,o,i);var g=e.memoizedState;a!==d||f!==g||Ze.current||en?(typeof p=="function"&&(gl(e,n,p,r),g=e.memoizedState),(u=en||Xc(e,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Cl(t,e,n,r,s,i)}function Cl(t,e,n,r,i,s){Bh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Hc(e,n,!1),Vt(t,e,s);r=e.stateNode,Fm.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Or(e,t.child,null,s),e.child=Or(e,null,a,s)):Be(t,e,a,s),e.memoizedState=r.state,i&&Hc(e,n,!0),e.child}function Hh(t){var e=t.stateNode;e.pendingContext?Bc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Bc(t,e.context,!1),Tu(t,e.containerInfo)}function of(t,e,n,r,i){return Tr(),Cu(i),e.flags|=256,Be(t,e,n,r),e.child}var Sl={dehydrated:null,treeContext:null,retryLane:0};function _l(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wh(t,e,n){var r=e.pendingProps,i=ae.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ee(ae,i&1),t===null)return hl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=So(o,r,0,null),t=Mn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=_l(n),e.memoizedState=Sl,t):Lu(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Um(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gn(a,s):(s=Mn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?_l(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Sl,r}return s=t.child,t=s.sibling,r=gn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Lu(t,e){return e=So({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ss(t,e,n,r){return r!==null&&Cu(r),Or(e,t.child,null,n),t=Lu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Um(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=va(Error(D(422))),ss(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=So({mode:"visible",children:r.children},i,0,null),s=Mn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Or(e,t.child,null,o),e.child.memoizedState=_l(o),e.memoizedState=Sl,s);if(!(e.mode&1))return ss(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(D(419)),r=va(s,r,void 0),ss(t,e,o,r)}if(a=(o&t.childLanes)!==0,Je||a){if(r=Ee,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Wt(t,i),wt(r,t,i,-1))}return zu(),r=va(Error(D(421))),ss(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=ev.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,at=fn(i.nextSibling),lt=e,oe=!0,Tt=null,t!==null&&(pt[gt++]=zt,pt[gt++]=Ft,pt[gt++]=An,zt=t.id,Ft=t.overflow,An=e),e=Lu(e,r.children),e.flags|=4096,e)}function af(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),pl(t.return,e,n)}function ya(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Vh(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Be(t,e,r.children,n),r=ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&af(t,n,e);else if(t.tag===19)af(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ee(ae,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Xs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ya(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Xs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ya(e,!0,n,null,s);break;case"together":ya(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _s(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(D(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bm(t,e,n){switch(e.tag){case 3:Hh(e),Tr();break;case 5:vh(e);break;case 1:et(e.type)&&Vs(e);break;case 4:Tu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ee(Gs,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ee(ae,ae.current&1),e.flags|=128,null):n&e.child.childLanes?Wh(t,e,n):(ee(ae,ae.current&1),t=Vt(t,e,n),t!==null?t.sibling:null);ee(ae,ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Vh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ee(ae,ae.current),r)break;return null;case 22:case 23:return e.lanes=0,Uh(t,e,n)}return Vt(t,e,n)}var Kh,kl,Qh,Gh;Kh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};kl=function(){};Qh=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,In(Nt.current);var s=null;switch(n){case"input":i=Wa(t,i),r=Wa(t,r),s=[];break;case"select":i=ue({},i,{value:void 0}),r=ue({},r,{value:void 0}),s=[];break;case"textarea":i=Qa(t,i),r=Qa(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Hs)}qa(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(yi.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ne("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Gh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gr(t,e){if(!oe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Le(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Hm(t,e,n){var r=e.pendingProps;switch(yu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Le(e),null;case 1:return et(e.type)&&Ws(),Le(e),null;case 3:return r=e.stateNode,wr(),re(Ze),re(Ae),wu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(rs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tt!==null&&(bl(Tt),Tt=null))),kl(t,e),Le(e),null;case 5:Ou(e);var i=In(bi.current);if(n=e.type,t!==null&&e.stateNode!=null)Qh(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(D(166));return Le(e),null}if(t=In(Nt.current),rs(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Lt]=e,r[Pi]=s,t=(e.mode&1)!==0,n){case"dialog":ne("cancel",r),ne("close",r);break;case"iframe":case"object":case"embed":ne("load",r);break;case"video":case"audio":for(i=0;i<ni.length;i++)ne(ni[i],r);break;case"source":ne("error",r);break;case"img":case"image":case"link":ne("error",r),ne("load",r);break;case"details":ne("toggle",r);break;case"input":gc(r,s),ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ne("invalid",r);break;case"textarea":vc(r,s),ne("invalid",r)}qa(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ns(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ns(r.textContent,a,t),i=["children",""+a]):yi.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ne("scroll",r)}switch(n){case"input":Gi(r),mc(r,s,!0);break;case"textarea":Gi(r),yc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Hs)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=kd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Lt]=e,t[Pi]=r,Kh(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ya(n,r),n){case"dialog":ne("cancel",t),ne("close",t),i=r;break;case"iframe":case"object":case"embed":ne("load",t),i=r;break;case"video":case"audio":for(i=0;i<ni.length;i++)ne(ni[i],t);i=r;break;case"source":ne("error",t),i=r;break;case"img":case"image":case"link":ne("error",t),ne("load",t),i=r;break;case"details":ne("toggle",t),i=r;break;case"input":gc(t,r),i=Wa(t,r),ne("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ue({},r,{value:void 0}),ne("invalid",t);break;case"textarea":vc(t,r),i=Qa(t,r),ne("invalid",t);break;default:i=r}qa(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Td(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xd(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Ci(t,l):typeof l=="number"&&Ci(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(yi.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ne("scroll",t):l!=null&&ru(t,s,l,o))}switch(n){case"input":Gi(t),mc(t,r,!1);break;case"textarea":Gi(t),yc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?mr(t,!!r.multiple,s,!1):r.defaultValue!=null&&mr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Hs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Le(e),null;case 6:if(t&&e.stateNode!=null)Gh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(D(166));if(n=In(bi.current),In(Nt.current),rs(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lt]=e,(s=r.nodeValue!==n)&&(t=lt,t!==null))switch(t.tag){case 3:ns(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ns(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=e,e.stateNode=r}return Le(e),null;case 13:if(re(ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(oe&&at!==null&&e.mode&1&&!(e.flags&128))dh(),Tr(),e.flags|=98560,s=!1;else if(s=rs(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(D(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[Lt]=e}else Tr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Le(e),s=!1}else Tt!==null&&(bl(Tt),Tt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ae.current&1?Se===0&&(Se=3):zu())),e.updateQueue!==null&&(e.flags|=4),Le(e),null);case 4:return wr(),kl(t,e),t===null&&Oi(e.stateNode.containerInfo),Le(e),null;case 10:return ku(e.type._context),Le(e),null;case 17:return et(e.type)&&Ws(),Le(e),null;case 19:if(re(ae),s=e.memoizedState,s===null)return Le(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Gr(s,!1);else{if(Se!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xs(t),o!==null){for(e.flags|=128,Gr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ee(ae,ae.current&1|2),e.child}t=t.sibling}s.tail!==null&&de()>Dr&&(e.flags|=128,r=!0,Gr(s,!1),e.lanes=4194304)}else{if(!r)if(t=Xs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!oe)return Le(e),null}else 2*de()-s.renderingStartTime>Dr&&n!==1073741824&&(e.flags|=128,r=!0,Gr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=de(),e.sibling=null,n=ae.current,ee(ae,r?n&1|2:n&1),e):(Le(e),null);case 22:case 23:return $u(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ot&1073741824&&(Le(e),e.subtreeFlags&6&&(e.flags|=8192)):Le(e),null;case 24:return null;case 25:return null}throw Error(D(156,e.tag))}function Wm(t,e){switch(yu(e),e.tag){case 1:return et(e.type)&&Ws(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wr(),re(Ze),re(Ae),wu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ou(e),null;case 13:if(re(ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(D(340));Tr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return re(ae),null;case 4:return wr(),null;case 10:return ku(e.type._context),null;case 22:case 23:return $u(),null;case 24:return null;default:return null}}var os=!1,je=!1,Vm=typeof WeakSet=="function"?WeakSet:Set,M=null;function pr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ce(t,e,r)}else n.current=null}function xl(t,e,n){try{n()}catch(r){ce(t,e,r)}}var lf=!1;function Km(t,e){if(ol=Fs,t=Zd(),mu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(al={focusedElem:t,selectionRange:n},Fs=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var C=g.memoizedProps,P=g.memoizedState,m=e.stateNode,h=m.getSnapshotBeforeUpdate(e.elementType===e.type?C:xt(e.type,C),P);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(_){ce(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return g=lf,lf=!1,g}function fi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&xl(e,n,s)}i=i.next}while(i!==r)}}function yo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function El(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qh(t){var e=t.alternate;e!==null&&(t.alternate=null,qh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lt],delete e[Pi],delete e[cl],delete e[Pm],delete e[Dm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yh(t){return t.tag===5||t.tag===3||t.tag===4}function uf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Hs));else if(r!==4&&(t=t.child,t!==null))for(Tl(t,e,n),t=t.sibling;t!==null;)Tl(t,e,n),t=t.sibling}function Ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}var we=null,Et=!1;function Yt(t,e,n){for(n=n.child;n!==null;)Xh(t,e,n),n=n.sibling}function Xh(t,e,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(uo,n)}catch{}switch(n.tag){case 5:je||pr(n,e);case 6:var r=we,i=Et;we=null,Yt(t,e,n),we=r,Et=i,we!==null&&(Et?(t=we,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):we.removeChild(n.stateNode));break;case 18:we!==null&&(Et?(t=we,n=n.stateNode,t.nodeType===8?fa(t.parentNode,n):t.nodeType===1&&fa(t,n),xi(t)):fa(we,n.stateNode));break;case 4:r=we,i=Et,we=n.stateNode.containerInfo,Et=!0,Yt(t,e,n),we=r,Et=i;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&xl(n,e,o),i=i.next}while(i!==r)}Yt(t,e,n);break;case 1:if(!je&&(pr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ce(n,e,a)}Yt(t,e,n);break;case 21:Yt(t,e,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,Yt(t,e,n),je=r):Yt(t,e,n);break;default:Yt(t,e,n)}}function cf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Vm),e.forEach(function(r){var i=tv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function kt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:we=a.stateNode,Et=!1;break e;case 3:we=a.stateNode.containerInfo,Et=!0;break e;case 4:we=a.stateNode.containerInfo,Et=!0;break e}a=a.return}if(we===null)throw Error(D(160));Xh(s,o,i),we=null,Et=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ce(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jh(e,t),e=e.sibling}function Jh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kt(e,t),Rt(t),r&4){try{fi(3,t,t.return),yo(3,t)}catch(C){ce(t,t.return,C)}try{fi(5,t,t.return)}catch(C){ce(t,t.return,C)}}break;case 1:kt(e,t),Rt(t),r&512&&n!==null&&pr(n,n.return);break;case 5:if(kt(e,t),Rt(t),r&512&&n!==null&&pr(n,n.return),t.flags&32){var i=t.stateNode;try{Ci(i,"")}catch(C){ce(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Sd(i,s),Ya(a,o);var u=Ya(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Td(i,d):c==="dangerouslySetInnerHTML"?xd(i,d):c==="children"?Ci(i,d):ru(i,c,d,u)}switch(a){case"input":Va(i,s);break;case"textarea":_d(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?mr(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?mr(i,!!s.multiple,s.defaultValue,!0):mr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Pi]=s}catch(C){ce(t,t.return,C)}}break;case 6:if(kt(e,t),Rt(t),r&4){if(t.stateNode===null)throw Error(D(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){ce(t,t.return,C)}}break;case 3:if(kt(e,t),Rt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xi(e.containerInfo)}catch(C){ce(t,t.return,C)}break;case 4:kt(e,t),Rt(t);break;case 13:kt(e,t),Rt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(ju=de())),r&4&&cf(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(je=(u=je)||c,kt(e,t),je=u):kt(e,t),Rt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(M=t,c=t.child;c!==null;){for(d=M=c;M!==null;){switch(f=M,p=f.child,f.tag){case 0:case 11:case 14:case 15:fi(4,f,f.return);break;case 1:pr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(C){ce(r,n,C)}}break;case 5:pr(f,f.return);break;case 22:if(f.memoizedState!==null){df(d);continue}}p!==null?(p.return=f,M=p):df(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Ed("display",o))}catch(C){ce(t,t.return,C)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(C){ce(t,t.return,C)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:kt(e,t),Rt(t),r&4&&cf(t);break;case 21:break;default:kt(e,t),Rt(t)}}function Rt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Yh(n)){var r=n;break e}n=n.return}throw Error(D(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ci(i,""),r.flags&=-33);var s=uf(t);Ol(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=uf(t);Tl(t,a,o);break;default:throw Error(D(161))}}catch(l){ce(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Qm(t,e,n){M=t,Zh(t)}function Zh(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var i=M,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||os;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||je;a=os;var u=je;if(os=o,(je=l)&&!u)for(M=i;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?hf(i):l!==null?(l.return=o,M=l):hf(i);for(;s!==null;)M=s,Zh(s),s=s.sibling;M=i,os=a,je=u}ff(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,M=s):ff(t)}}function ff(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:je||yo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!je)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:xt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gc(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gc(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&xi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}je||e.flags&512&&El(e)}catch(f){ce(e,e.return,f)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function df(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function hf(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{yo(4,e)}catch(l){ce(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ce(e,i,l)}}var s=e.return;try{El(e)}catch(l){ce(e,s,l)}break;case 5:var o=e.return;try{El(e)}catch(l){ce(e,o,l)}}}catch(l){ce(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var Gm=Math.ceil,eo=Kt.ReactCurrentDispatcher,Mu=Kt.ReactCurrentOwner,yt=Kt.ReactCurrentBatchConfig,q=0,Ee=null,me=null,Pe=0,ot=0,gr=_n(0),Se=0,Mi=null,zn=0,Co=0,Nu=0,di=null,Xe=null,ju=0,Dr=1/0,At=null,to=!1,wl=null,hn=null,as=!1,on=null,no=0,hi=0,Pl=null,ks=-1,xs=0;function He(){return q&6?de():ks!==-1?ks:ks=de()}function pn(t){return t.mode&1?q&2&&Pe!==0?Pe&-Pe:Rm.transition!==null?(xs===0&&(xs=Ad()),xs):(t=J,t!==0||(t=window.event,t=t===void 0?16:Wd(t.type)),t):1}function wt(t,e,n,r){if(50<hi)throw hi=0,Pl=null,Error(D(185));zi(t,n,r),(!(q&2)||t!==Ee)&&(t===Ee&&(!(q&2)&&(Co|=n),Se===4&&rn(t,Pe)),tt(t,r),n===1&&q===0&&!(e.mode&1)&&(Dr=de()+500,go&&kn()))}function tt(t,e){var n=t.callbackNode;R0(t,e);var r=zs(t,t===Ee?Pe:0);if(r===0)n!==null&&_c(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&_c(n),e===1)t.tag===0?bm(pf.bind(null,t)):uh(pf.bind(null,t)),Om(function(){!(q&6)&&kn()}),n=null;else{switch($d(r)){case 1:n=lu;break;case 4:n=Nd;break;case 16:n=$s;break;case 536870912:n=jd;break;default:n=$s}n=ap(n,ep.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ep(t,e){if(ks=-1,xs=0,q&6)throw Error(D(327));var n=t.callbackNode;if(_r()&&t.callbackNode!==n)return null;var r=zs(t,t===Ee?Pe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ro(t,r);else{e=r;var i=q;q|=2;var s=np();(Ee!==t||Pe!==e)&&(At=null,Dr=de()+500,Ln(t,e));do try{Xm();break}catch(a){tp(t,a)}while(!0);_u(),eo.current=s,q=i,me!==null?e=0:(Ee=null,Pe=0,e=Se)}if(e!==0){if(e===2&&(i=tl(t),i!==0&&(r=i,e=Dl(t,i))),e===1)throw n=Mi,Ln(t,0),rn(t,r),tt(t,de()),n;if(e===6)rn(t,r);else{if(i=t.current.alternate,!(r&30)&&!qm(i)&&(e=ro(t,r),e===2&&(s=tl(t),s!==0&&(r=s,e=Dl(t,s))),e===1))throw n=Mi,Ln(t,0),rn(t,r),tt(t,de()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(D(345));case 2:Pn(t,Xe,At);break;case 3:if(rn(t,r),(r&130023424)===r&&(e=ju+500-de(),10<e)){if(zs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){He(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ul(Pn.bind(null,t,Xe,At),e);break}Pn(t,Xe,At);break;case 4:if(rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ot(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=de()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gm(r/1960))-r,10<r){t.timeoutHandle=ul(Pn.bind(null,t,Xe,At),r);break}Pn(t,Xe,At);break;case 5:Pn(t,Xe,At);break;default:throw Error(D(329))}}}return tt(t,de()),t.callbackNode===n?ep.bind(null,t):null}function Dl(t,e){var n=di;return t.current.memoizedState.isDehydrated&&(Ln(t,e).flags|=256),t=ro(t,e),t!==2&&(e=Xe,Xe=n,e!==null&&bl(e)),t}function bl(t){Xe===null?Xe=t:Xe.push.apply(Xe,t)}function qm(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Pt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rn(t,e){for(e&=~Nu,e&=~Co,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ot(e),r=1<<n;t[n]=-1,e&=~r}}function pf(t){if(q&6)throw Error(D(327));_r();var e=zs(t,0);if(!(e&1))return tt(t,de()),null;var n=ro(t,e);if(t.tag!==0&&n===2){var r=tl(t);r!==0&&(e=r,n=Dl(t,r))}if(n===1)throw n=Mi,Ln(t,0),rn(t,e),tt(t,de()),n;if(n===6)throw Error(D(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Pn(t,Xe,At),tt(t,de()),null}function Au(t,e){var n=q;q|=1;try{return t(e)}finally{q=n,q===0&&(Dr=de()+500,go&&kn())}}function Fn(t){on!==null&&on.tag===0&&!(q&6)&&_r();var e=q;q|=1;var n=yt.transition,r=J;try{if(yt.transition=null,J=1,t)return t()}finally{J=r,yt.transition=n,q=e,!(q&6)&&kn()}}function $u(){ot=gr.current,re(gr)}function Ln(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Tm(n)),me!==null)for(n=me.return;n!==null;){var r=n;switch(yu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ws();break;case 3:wr(),re(Ze),re(Ae),wu();break;case 5:Ou(r);break;case 4:wr();break;case 13:re(ae);break;case 19:re(ae);break;case 10:ku(r.type._context);break;case 22:case 23:$u()}n=n.return}if(Ee=t,me=t=gn(t.current,null),Pe=ot=e,Se=0,Mi=null,Nu=Co=zn=0,Xe=di=null,Rn!==null){for(e=0;e<Rn.length;e++)if(n=Rn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Rn=null}return t}function tp(t,e){do{var n=me;try{if(_u(),Cs.current=Zs,Js){for(var r=le.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Js=!1}if($n=0,xe=Ce=le=null,ci=!1,Ri=0,Mu.current=null,n===null||n.return===null){Se=1,Mi=e,me=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Pe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=ef(o);if(p!==null){p.flags&=-257,tf(p,o,a,s,e),p.mode&1&&Zc(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var C=new Set;C.add(l),e.updateQueue=C}else g.add(l);break e}else{if(!(e&1)){Zc(s,u,e),zu();break e}l=Error(D(426))}}else if(oe&&a.mode&1){var P=ef(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),tf(P,o,a,s,e),Cu(Pr(l,a));break e}}s=l=Pr(l,a),Se!==4&&(Se=2),di===null?di=[s]:di.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=$h(s,l,e);Qc(s,m);break e;case 1:a=l;var h=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(hn===null||!hn.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=zh(s,a,e);Qc(s,_);break e}}s=s.return}while(s!==null)}ip(n)}catch(T){e=T,me===n&&n!==null&&(me=n=n.return);continue}break}while(!0)}function np(){var t=eo.current;return eo.current=Zs,t===null?Zs:t}function zu(){(Se===0||Se===3||Se===2)&&(Se=4),Ee===null||!(zn&268435455)&&!(Co&268435455)||rn(Ee,Pe)}function ro(t,e){var n=q;q|=2;var r=np();(Ee!==t||Pe!==e)&&(At=null,Ln(t,e));do try{Ym();break}catch(i){tp(t,i)}while(!0);if(_u(),q=n,eo.current=r,me!==null)throw Error(D(261));return Ee=null,Pe=0,Se}function Ym(){for(;me!==null;)rp(me)}function Xm(){for(;me!==null&&!k0();)rp(me)}function rp(t){var e=op(t.alternate,t,ot);t.memoizedProps=t.pendingProps,e===null?ip(t):me=e,Mu.current=null}function ip(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wm(n,e),n!==null){n.flags&=32767,me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Se=6,me=null;return}}else if(n=Hm(n,e,ot),n!==null){me=n;return}if(e=e.sibling,e!==null){me=e;return}me=e=t}while(e!==null);Se===0&&(Se=5)}function Pn(t,e,n){var r=J,i=yt.transition;try{yt.transition=null,J=1,Jm(t,e,n,r)}finally{yt.transition=i,J=r}return null}function Jm(t,e,n,r){do _r();while(on!==null);if(q&6)throw Error(D(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(D(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(I0(t,s),t===Ee&&(me=Ee=null,Pe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||as||(as=!0,ap($s,function(){return _r(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=yt.transition,yt.transition=null;var o=J;J=1;var a=q;q|=4,Mu.current=null,Km(t,n),Jh(n,t),ym(al),Fs=!!ol,al=ol=null,t.current=n,Qm(n),x0(),q=a,J=o,yt.transition=s}else t.current=n;if(as&&(as=!1,on=t,no=i),s=t.pendingLanes,s===0&&(hn=null),O0(n.stateNode),tt(t,de()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(to)throw to=!1,t=wl,wl=null,t;return no&1&&t.tag!==0&&_r(),s=t.pendingLanes,s&1?t===Pl?hi++:(hi=0,Pl=t):hi=0,kn(),null}function _r(){if(on!==null){var t=$d(no),e=yt.transition,n=J;try{if(yt.transition=null,J=16>t?16:t,on===null)var r=!1;else{if(t=on,on=null,no=0,q&6)throw Error(D(331));var i=q;for(q|=4,M=t.current;M!==null;){var s=M,o=s.child;if(M.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(M=u;M!==null;){var c=M;switch(c.tag){case 0:case 11:case 15:fi(8,c,s)}var d=c.child;if(d!==null)d.return=c,M=d;else for(;M!==null;){c=M;var f=c.sibling,p=c.return;if(qh(c),c===u){M=null;break}if(f!==null){f.return=p,M=f;break}M=p}}}var g=s.alternate;if(g!==null){var C=g.child;if(C!==null){g.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}M=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:fi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,M=m;break e}M=s.return}}var h=t.current;for(M=h;M!==null;){o=M;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,M=y;else e:for(o=h;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:yo(9,a)}}catch(T){ce(a,a.return,T)}if(a===o){M=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,M=_;break e}M=a.return}}if(q=i,kn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(uo,t)}catch{}r=!0}return r}finally{J=n,yt.transition=e}}return!1}function gf(t,e,n){e=Pr(n,e),e=$h(t,e,1),t=dn(t,e,1),e=He(),t!==null&&(zi(t,1,e),tt(t,e))}function ce(t,e,n){if(t.tag===3)gf(t,t,n);else for(;e!==null;){if(e.tag===3){gf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){t=Pr(n,t),t=zh(e,t,1),e=dn(e,t,1),t=He(),e!==null&&(zi(e,1,t),tt(e,t));break}}e=e.return}}function Zm(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=He(),t.pingedLanes|=t.suspendedLanes&n,Ee===t&&(Pe&n)===n&&(Se===4||Se===3&&(Pe&130023424)===Pe&&500>de()-ju?Ln(t,0):Nu|=n),tt(t,e)}function sp(t,e){e===0&&(t.mode&1?(e=Xi,Xi<<=1,!(Xi&130023424)&&(Xi=4194304)):e=1);var n=He();t=Wt(t,e),t!==null&&(zi(t,e,n),tt(t,n))}function ev(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),sp(t,n)}function tv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(D(314))}r!==null&&r.delete(e),sp(t,n)}var op;op=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ze.current)Je=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Je=!1,Bm(t,e,n);Je=!!(t.flags&131072)}else Je=!1,oe&&e.flags&1048576&&ch(e,Qs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_s(t,e),t=e.pendingProps;var i=Er(e,Ae.current);Sr(e,n),i=Du(null,e,r,t,i,n);var s=bu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,et(r)?(s=!0,Vs(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Eu(e),i.updater=vo,e.stateNode=i,i._reactInternals=e,ml(e,r,t,n),e=Cl(null,e,r,!0,s,n)):(e.tag=0,oe&&s&&vu(e),Be(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_s(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=rv(r),t=xt(r,t),i){case 0:e=yl(null,e,r,t,n);break e;case 1:e=sf(null,e,r,t,n);break e;case 11:e=nf(null,e,r,t,n);break e;case 14:e=rf(null,e,r,xt(r.type,t),n);break e}throw Error(D(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),yl(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),sf(t,e,r,i,n);case 3:e:{if(Hh(e),t===null)throw Error(D(387));r=e.pendingProps,s=e.memoizedState,i=s.element,mh(t,e),Ys(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Pr(Error(D(423)),e),e=of(t,e,r,n,i);break e}else if(r!==i){i=Pr(Error(D(424)),e),e=of(t,e,r,n,i);break e}else for(at=fn(e.stateNode.containerInfo.firstChild),lt=e,oe=!0,Tt=null,n=ph(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Tr(),r===i){e=Vt(t,e,n);break e}Be(t,e,r,n)}e=e.child}return e;case 5:return vh(e),t===null&&hl(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ll(r,i)?o=null:s!==null&&ll(r,s)&&(e.flags|=32),Bh(t,e),Be(t,e,o,n),e.child;case 6:return t===null&&hl(e),null;case 13:return Wh(t,e,n);case 4:return Tu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Or(e,null,r,n):Be(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),nf(t,e,r,i,n);case 7:return Be(t,e,e.pendingProps,n),e.child;case 8:return Be(t,e,e.pendingProps.children,n),e.child;case 12:return Be(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ee(Gs,r._currentValue),r._currentValue=o,s!==null)if(Pt(s.value,o)){if(s.children===i.children&&!Ze.current){e=Vt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ut(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),pl(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),pl(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Be(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Sr(e,n),i=Ct(i),r=r(i),e.flags|=1,Be(t,e,r,n),e.child;case 14:return r=e.type,i=xt(r,e.pendingProps),i=xt(r.type,i),rf(t,e,r,i,n);case 15:return Fh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xt(r,i),_s(t,e),e.tag=1,et(r)?(t=!0,Vs(e)):t=!1,Sr(e,n),Ah(e,r,i),ml(e,r,i,n),Cl(null,e,r,!0,t,n);case 19:return Vh(t,e,n);case 22:return Uh(t,e,n)}throw Error(D(156,e.tag))};function ap(t,e){return Md(t,e)}function nv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vt(t,e,n,r){return new nv(t,e,n,r)}function Fu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rv(t){if(typeof t=="function")return Fu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===su)return 11;if(t===ou)return 14}return 2}function gn(t,e){var n=t.alternate;return n===null?(n=vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Es(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Fu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case sr:return Mn(n.children,i,s,e);case iu:o=8,i|=8;break;case Fa:return t=vt(12,n,e,i|2),t.elementType=Fa,t.lanes=s,t;case Ua:return t=vt(13,n,e,i),t.elementType=Ua,t.lanes=s,t;case Ba:return t=vt(19,n,e,i),t.elementType=Ba,t.lanes=s,t;case vd:return So(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case gd:o=10;break e;case md:o=9;break e;case su:o=11;break e;case ou:o=14;break e;case Zt:o=16,r=null;break e}throw Error(D(130,t==null?t:typeof t,""))}return e=vt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Mn(t,e,n,r){return t=vt(7,t,r,e),t.lanes=n,t}function So(t,e,n,r){return t=vt(22,t,r,e),t.elementType=vd,t.lanes=n,t.stateNode={isHidden:!1},t}function Ca(t,e,n){return t=vt(6,t,null,e),t.lanes=n,t}function Sa(t,e,n){return e=vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(t,e,n,r,i,s,o,a,l){return t=new iv(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=vt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eu(s),t}function sv(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ir,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function lp(t){if(!t)return Cn;t=t._reactInternals;e:{if(Hn(t)!==t||t.tag!==1)throw Error(D(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(D(171))}if(t.tag===1){var n=t.type;if(et(n))return lh(t,n,e)}return e}function up(t,e,n,r,i,s,o,a,l){return t=Uu(n,r,!0,t,i,s,o,a,l),t.context=lp(null),n=t.current,r=He(),i=pn(n),s=Ut(r,i),s.callback=e??null,dn(n,s,i),t.current.lanes=i,zi(t,i,r),tt(t,r),t}function _o(t,e,n,r){var i=e.current,s=He(),o=pn(i);return n=lp(n),e.context===null?e.context=n:e.pendingContext=n,e=Ut(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dn(i,e,o),t!==null&&(wt(t,i,o,s),ys(t,i,o)),o}function io(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bu(t,e){mf(t,e),(t=t.alternate)&&mf(t,e)}function ov(){return null}var cp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hu(t){this._internalRoot=t}ko.prototype.render=Hu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(D(409));_o(t,e,null,null)};ko.prototype.unmount=Hu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fn(function(){_o(null,t,null,null)}),e[Ht]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ud();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nn.length&&e!==0&&e<nn[n].priority;n++);nn.splice(n,0,t),n===0&&Hd(t)}};function Wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xo(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function vf(){}function av(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=io(o);s.call(u)}}var o=up(e,r,t,0,null,!1,!1,"",vf);return t._reactRootContainer=o,t[Ht]=o.current,Oi(t.nodeType===8?t.parentNode:t),Fn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=io(l);a.call(u)}}var l=Uu(t,0,!1,null,null,!1,!1,"",vf);return t._reactRootContainer=l,t[Ht]=l.current,Oi(t.nodeType===8?t.parentNode:t),Fn(function(){_o(e,l,n,r)}),l}function Eo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=io(o);a.call(l)}}_o(e,o,t,i)}else o=av(n,e,t,i,r);return io(o)}zd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ti(e.pendingLanes);n!==0&&(uu(e,n|1),tt(e,de()),!(q&6)&&(Dr=de()+500,kn()))}break;case 13:Fn(function(){var r=Wt(t,1);if(r!==null){var i=He();wt(r,t,1,i)}}),Bu(t,1)}};cu=function(t){if(t.tag===13){var e=Wt(t,134217728);if(e!==null){var n=He();wt(e,t,134217728,n)}Bu(t,134217728)}};Fd=function(t){if(t.tag===13){var e=pn(t),n=Wt(t,e);if(n!==null){var r=He();wt(n,t,e,r)}Bu(t,e)}};Ud=function(){return J};Bd=function(t,e){var n=J;try{return J=t,e()}finally{J=n}};Ja=function(t,e,n){switch(e){case"input":if(Va(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=po(r);if(!i)throw Error(D(90));Cd(r),Va(r,i)}}}break;case"textarea":_d(t,n);break;case"select":e=n.value,e!=null&&mr(t,!!n.multiple,e,!1)}};Pd=Au;Dd=Fn;var lv={usingClientEntryPoint:!1,Events:[Ui,ur,po,Od,wd,Au]},qr={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uv={bundleType:qr.bundleType,version:qr.version,rendererPackageName:qr.rendererPackageName,rendererConfig:qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Id(t),t===null?null:t.stateNode},findFiberByHostInstance:qr.findFiberByHostInstance||ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ls=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ls.isDisabled&&ls.supportsFiber)try{uo=ls.inject(uv),Mt=ls}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lv;ct.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wu(e))throw Error(D(200));return sv(t,e,null,n)};ct.createRoot=function(t,e){if(!Wu(t))throw Error(D(299));var n=!1,r="",i=cp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Uu(t,1,!1,null,null,n,!1,r,i),t[Ht]=e.current,Oi(t.nodeType===8?t.parentNode:t),new Hu(e)};ct.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(D(188)):(t=Object.keys(t).join(","),Error(D(268,t)));return t=Id(e),t=t===null?null:t.stateNode,t};ct.flushSync=function(t){return Fn(t)};ct.hydrate=function(t,e,n){if(!xo(e))throw Error(D(200));return Eo(null,t,e,!0,n)};ct.hydrateRoot=function(t,e,n){if(!Wu(t))throw Error(D(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=cp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=up(e,null,t,1,n??null,i,!1,s,o),t[Ht]=e.current,Oi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ko(e)};ct.render=function(t,e,n){if(!xo(e))throw Error(D(200));return Eo(null,t,e,!1,n)};ct.unmountComponentAtNode=function(t){if(!xo(t))throw Error(D(40));return t._reactRootContainer?(Fn(function(){Eo(null,null,t,!1,function(){t._reactRootContainer=null,t[Ht]=null})}),!0):!1};ct.unstable_batchedUpdates=Au;ct.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xo(n))throw Error(D(200));if(t==null||t._reactInternals===void 0)throw Error(D(38));return Eo(t,e,n,!1,r)};ct.version="18.3.1-next-f1338f8080-20240426";function fp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fp)}catch(t){console.error(t)}}fp(),fd.exports=ct;var cv=fd.exports,yf=cv;$a.createRoot=yf.createRoot,$a.hydrateRoot=yf.hydrateRoot;function fv(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function dv(t,e,n,r,i){const s={move:t,variations:i};return e&&(s.suffix=e),n&&(s.nag=n),r!==null&&(s.comment=r),s}function hv(...t){const[e,...n]=t;let r=e;for(const i of n)i!==null&&(r.variations=[i,...i.variations],i.variations=[],r=i);return e}function pv(t,e){if(e.marker&&e.marker.comment){let n=e.root;for(;;){const r=n.variations[0];if(!r){n.comment=e.marker.comment;break}n=r}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function gv(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function br(t,e,n,r){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,br.prototype),i.expected=e,i.found=n,i.location=r,i.name="SyntaxError",i}gv(br,Error);function _a(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}br.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){n=t[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(n){var a=this.location.end,l=_a("",s.line.toString().length," "),u=n[i.line-1],c=i.line===a.line?a.column:u.length+1,d=c-i.column||1;e+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+u+`
`+l+" | "+_a("",i.column-1," ")+_a("",d,"^")}else e+=`
 at `+o}return e};br.buildMessage=function(t,e){var n={literal:function(u){return'"'+i(u.text)+'"'},class:function(u){var c=u.parts.map(function(d){return Array.isArray(d)?s(d[0])+"-"+s(d[1]):s(d)});return"["+(u.inverted?"^":"")+c.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function s(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function o(u){return n[u.type](u)}function a(u){var c=u.map(o),d,f;if(c.sort(),c.length>0){for(d=1,f=1;d<c.length;d++)c[d-1]!==c[d]&&(c[f]=c[d],f++);c.length=f}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}function l(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};function mv(t,e){e=e!==void 0?e:{};var n={},r=e.grammarSource,i={pgn:rc},s=rc,o="[",a='"',l="]",u=".",c="O-O-O",d="O-O",f="0-0-0",p="0-0",g="$",C="{",P="}",m=";",h="(",y=")",_="1-0",T="0-1",b="1/2-1/2",R="*",I=/^[a-zA-Z]/,G=/^[^"]/,U=/^[0-9]/,fe=/^[.]/,te=/^[a-zA-Z1-8\-=]/,he=/^[+#]/,nt=/^[!?]/,Qe=/^[^}]/,be=/^[^\r\n]/,Te=/^[ \t\r\n]/,L=qe("tag pair"),F=Q("[",!1),H=Q('"',!1),Z=Q("]",!1),ie=qe("tag name"),dt=ve([["a","z"],["A","Z"]],!1,!1),ze=qe("tag value"),Dt=ve(['"'],!0,!1),Fe=qe("move number"),W=ve([["0","9"]],!1,!1),_t=Q(".",!1),jt=ve(["."],!1,!1),xn=qe("standard algebraic notation"),Re=Q("O-O-O",!1),Ge=Q("O-O",!1),Gn=Q("0-0-0",!1),Io=Q("0-0",!1),qn=ve([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Gt=ve(["+","#"],!1,!1),Lo=qe("suffix annotation"),Yn=ve(["!","?"],!1,!1),Mo=qe("NAG"),Hi=Q("$",!1),No=qe("brace comment"),Mr=Q("{",!1),Nr=ve(["}"],!0,!1),jr=Q("}",!1),bt=qe("rest of line comment"),Ar=Q(";",!1),En=ve(["\r",`
`],!0,!1),jo=qe("variation"),Ao=Q("(",!1),$o=Q(")",!1),Xn=qe("game termination marker"),Jn=Q("1-0",!1),Zn=Q("0-1",!1),er=Q("1/2-1/2",!1),zo=Q("*",!1),Fo=qe("whitespace"),Wi=ve([" ","	","\r",`
`],!1,!1),Uo=function(S,x){return pv(S,x)},$r=function(S){return Object.fromEntries(S)},Bo=function(S,x){return[S,x]},Ho=function(S,x){return{root:S,marker:x}},Wo=function(S,x){return hv(fv(S),...x.flat())},Vo=function(S,x,E,A,$){return dv(S,x,E,A,$)},zr=function(S){return S},Ko=function(S){return S.replace(/[\r\n]+/g," ")},tr=function(S){return S.trim()},Fr=function(S){return S},Qo=function(S,x){return{result:S,comment:x}},k=e.peg$currPos|0,qt=[{line:1,column:1}],rt=k,Y=e.peg$maxFailExpected||[],w=e.peg$silentFails|0,_e;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=i[e.startRule]}function Q(S,x){return{type:"literal",text:S,ignoreCase:x}}function ve(S,x,E){return{type:"class",parts:S,inverted:x,ignoreCase:E}}function it(){return{type:"end"}}function qe(S){return{type:"other",description:S}}function tc(S){var x=qt[S],E;if(x)return x;if(S>=qt.length)E=qt.length-1;else for(E=S;!qt[--E];);for(x=qt[E],x={line:x.line,column:x.column};E<S;)t.charCodeAt(E)===10?(x.line++,x.column=1):x.column++,E++;return qt[S]=x,x}function nc(S,x,E){var A=tc(S),$=tc(x),X={source:r,start:{offset:S,line:A.line,column:A.column},end:{offset:x,line:$.line,column:$.column}};return X}function j(S){k<rt||(k>rt&&(rt=k,Y=[]),Y.push(S))}function xg(S,x,E){return new br(br.buildMessage(S,x),S,x,E)}function rc(){var S,x,E;return S=k,x=Eg(),E=wg(),S=Uo(x,E),S}function Eg(){var S,x,E;for(S=k,x=[],E=ic();E!==n;)x.push(E),E=ic();return E=Ue(),S=$r(x),S}function ic(){var S,x,E,A,$,X,Tn;return w++,S=k,Ue(),t.charCodeAt(k)===91?(x=o,k++):(x=n,w===0&&j(F)),x!==n?(Ue(),E=Tg(),E!==n?(Ue(),t.charCodeAt(k)===34?(A=a,k++):(A=n,w===0&&j(H)),A!==n?($=Og(),t.charCodeAt(k)===34?(X=a,k++):(X=n,w===0&&j(H)),X!==n?(Ue(),t.charCodeAt(k)===93?(Tn=l,k++):(Tn=n,w===0&&j(Z)),Tn!==n?S=Bo(E,$):(k=S,S=n)):(k=S,S=n)):(k=S,S=n)):(k=S,S=n)):(k=S,S=n),w--,S===n&&w===0&&j(L),S}function Tg(){var S,x,E;if(w++,S=k,x=[],E=t.charAt(k),I.test(E)?k++:(E=n,w===0&&j(dt)),E!==n)for(;E!==n;)x.push(E),E=t.charAt(k),I.test(E)?k++:(E=n,w===0&&j(dt));else x=n;return x!==n?S=t.substring(S,k):S=x,w--,S===n&&(x=n,w===0&&j(ie)),S}function Og(){var S,x,E;for(w++,S=k,x=[],E=t.charAt(k),G.test(E)?k++:(E=n,w===0&&j(Dt));E!==n;)x.push(E),E=t.charAt(k),G.test(E)?k++:(E=n,w===0&&j(Dt));return S=t.substring(S,k),w--,x=n,w===0&&j(ze),S}function wg(){var S,x,E;return S=k,x=sc(),Ue(),E=Lg(),E===n&&(E=null),Ue(),S=Ho(x,E),S}function sc(){var S,x,E,A;for(S=k,x=Go(),x===n&&(x=null),E=[],A=oc();A!==n;)E.push(A),A=oc();return S=Wo(x,E),S}function oc(){var S,x,E,A,$,X,Tn,Vi;if(S=k,Ue(),Pg(),Ue(),x=Dg(),x!==n){for(E=bg(),E===n&&(E=null),A=[],$=ac();$!==n;)A.push($),$=ac();for($=Ue(),X=Go(),X===n&&(X=null),Tn=[],Vi=lc();Vi!==n;)Tn.push(Vi),Vi=lc();S=Vo(x,E,A,X,Tn)}else k=S,S=n;return S}function Pg(){var S,x,E,A,$,X;for(w++,S=k,x=[],E=t.charAt(k),U.test(E)?k++:(E=n,w===0&&j(W));E!==n;)x.push(E),E=t.charAt(k),U.test(E)?k++:(E=n,w===0&&j(W));if(t.charCodeAt(k)===46?(E=u,k++):(E=n,w===0&&j(_t)),E!==n){for(A=Ue(),$=[],X=t.charAt(k),fe.test(X)?k++:(X=n,w===0&&j(jt));X!==n;)$.push(X),X=t.charAt(k),fe.test(X)?k++:(X=n,w===0&&j(jt));x=[x,E,A,$],S=x}else k=S,S=n;return w--,S===n&&(x=n,w===0&&j(Fe)),S}function Dg(){var S,x,E,A,$,X;if(w++,S=k,x=k,t.substr(k,5)===c?(E=c,k+=5):(E=n,w===0&&j(Re)),E===n&&(t.substr(k,3)===d?(E=d,k+=3):(E=n,w===0&&j(Ge)),E===n&&(t.substr(k,5)===f?(E=f,k+=5):(E=n,w===0&&j(Gn)),E===n&&(t.substr(k,3)===p?(E=p,k+=3):(E=n,w===0&&j(Io)),E===n))))if(E=k,A=t.charAt(k),I.test(A)?k++:(A=n,w===0&&j(dt)),A!==n){if($=[],X=t.charAt(k),te.test(X)?k++:(X=n,w===0&&j(qn)),X!==n)for(;X!==n;)$.push(X),X=t.charAt(k),te.test(X)?k++:(X=n,w===0&&j(qn));else $=n;$!==n?(A=[A,$],E=A):(k=E,E=n)}else k=E,E=n;return E!==n?(A=t.charAt(k),he.test(A)?k++:(A=n,w===0&&j(Gt)),A===n&&(A=null),E=[E,A],x=E):(k=x,x=n),x!==n?S=t.substring(S,k):S=x,w--,S===n&&(x=n,w===0&&j(xn)),S}function bg(){var S,x,E;for(w++,S=k,x=[],E=t.charAt(k),nt.test(E)?k++:(E=n,w===0&&j(Yn));E!==n;)x.push(E),x.length>=2?E=n:(E=t.charAt(k),nt.test(E)?k++:(E=n,w===0&&j(Yn)));return x.length<1?(k=S,S=n):S=x,w--,S===n&&(x=n,w===0&&j(Lo)),S}function ac(){var S,x,E,A,$;if(w++,S=k,Ue(),t.charCodeAt(k)===36?(x=g,k++):(x=n,w===0&&j(Hi)),x!==n){if(E=k,A=[],$=t.charAt(k),U.test($)?k++:($=n,w===0&&j(W)),$!==n)for(;$!==n;)A.push($),$=t.charAt(k),U.test($)?k++:($=n,w===0&&j(W));else A=n;A!==n?E=t.substring(E,k):E=A,E!==n?S=zr(E):(k=S,S=n)}else k=S,S=n;return w--,S===n&&w===0&&j(Mo),S}function Go(){var S;return S=Rg(),S===n&&(S=Ig()),S}function Rg(){var S,x,E,A,$;if(w++,S=k,t.charCodeAt(k)===123?(x=C,k++):(x=n,w===0&&j(Mr)),x!==n){for(E=k,A=[],$=t.charAt(k),Qe.test($)?k++:($=n,w===0&&j(Nr));$!==n;)A.push($),$=t.charAt(k),Qe.test($)?k++:($=n,w===0&&j(Nr));E=t.substring(E,k),t.charCodeAt(k)===125?(A=P,k++):(A=n,w===0&&j(jr)),A!==n?S=Ko(E):(k=S,S=n)}else k=S,S=n;return w--,S===n&&(x=n,w===0&&j(No)),S}function Ig(){var S,x,E,A,$;if(w++,S=k,t.charCodeAt(k)===59?(x=m,k++):(x=n,w===0&&j(Ar)),x!==n){for(E=k,A=[],$=t.charAt(k),be.test($)?k++:($=n,w===0&&j(En));$!==n;)A.push($),$=t.charAt(k),be.test($)?k++:($=n,w===0&&j(En));E=t.substring(E,k),S=tr(E)}else k=S,S=n;return w--,S===n&&(x=n,w===0&&j(bt)),S}function lc(){var S,x,E,A;return w++,S=k,Ue(),t.charCodeAt(k)===40?(x=h,k++):(x=n,w===0&&j(Ao)),x!==n?(E=sc(),E!==n?(Ue(),t.charCodeAt(k)===41?(A=y,k++):(A=n,w===0&&j($o)),A!==n?S=Fr(E):(k=S,S=n)):(k=S,S=n)):(k=S,S=n),w--,S===n&&w===0&&j(jo),S}function Lg(){var S,x,E;return w++,S=k,t.substr(k,3)===_?(x=_,k+=3):(x=n,w===0&&j(Jn)),x===n&&(t.substr(k,3)===T?(x=T,k+=3):(x=n,w===0&&j(Zn)),x===n&&(t.substr(k,7)===b?(x=b,k+=7):(x=n,w===0&&j(er)),x===n&&(t.charCodeAt(k)===42?(x=R,k++):(x=n,w===0&&j(zo))))),x!==n?(Ue(),E=Go(),E===n&&(E=null),S=Qo(x,E)):(k=S,S=n),w--,S===n&&(x=n,w===0&&j(Xn)),S}function Ue(){var S,x;for(w++,S=[],x=t.charAt(k),Te.test(x)?k++:(x=n,w===0&&j(Wi));x!==n;)S.push(x),x=t.charAt(k),Te.test(x)?k++:(x=n,w===0&&j(Wi));return w--,x=n,w===0&&j(Fo),S}if(_e=s(),e.peg$library)return{peg$result:_e,peg$currPos:k,peg$FAILED:n,peg$maxFailExpected:Y,peg$maxFailPos:rt};if(_e!==n&&k===t.length)return _e;throw _e!==n&&k<t.length&&j(it()),xg(Y,rt<t.length?t.charAt(rt):null,rt<t.length?nc(rt,rt+1):nc(rt,rt))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const Ts=0xffffffffffffffffn;function ka(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function Cf(t,e){return t*e&Ts}function vv(t){return function(){let e=BigInt(t&Ts),n=BigInt(t>>64n&Ts);const r=Cf(ka(Cf(e,5n),7n),9n);return n^=e,e=(ka(e,24n)^n^n<<16n)&Ts,n=ka(n,37n),t=n<<64n|e,r}}const To=vv(0xa187eb39cdcaed8f31c4b365b102e01en),yv=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>To()))),Cv=Array.from({length:8},()=>To()),Sv=Array.from({length:16},()=>To()),xa=To(),Me="w",st="b",pe="p",Rl="n",Os="b",ri="r",tn="q",ye="k",Ea="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class us{constructor(e,n){se(this,"color");se(this,"from");se(this,"to");se(this,"piece");se(this,"captured");se(this,"promotion");se(this,"flags");se(this,"san");se(this,"lan");se(this,"before");se(this,"after");const{color:r,piece:i,from:s,to:o,flags:a,captured:l,promotion:u}=n,c=ke(s),d=ke(o);this.color=r,this.piece=i,this.from=c,this.to=d,this.san=e._moveToSan(n,e._moves({legal:!0})),this.lan=c+d,this.before=e.fen(),e._makeMove(n),this.after=e.fen(),e._undoMove(),this.flags="";for(const f in B)B[f]&a&&(this.flags+=On[f]);l&&(this.captured=l),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(On.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(On.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(On.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(On.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(On.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(On.BIG_PAWN)>-1}}const Oe=-1,On={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},B={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Il={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},_v={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},kv={...Il,..._v},z={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},Ta={b:[16,32,17,15],w:[-16,-32,-17,-15]},Sf={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},xv=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Ev=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Tv={p:1,n:2,b:4,r:8,q:16,k:32},Ov="pnbrqkPNBRQK",_f=[Rl,Os,ri,tn],wv=7,Pv=6,Dv=1,bv=0,cs={[ye]:B.KSIDE_CASTLE,[tn]:B.QSIDE_CASTLE},Xt={w:[{square:z.a1,flag:B.QSIDE_CASTLE},{square:z.h1,flag:B.KSIDE_CASTLE}],b:[{square:z.a8,flag:B.QSIDE_CASTLE},{square:z.h8,flag:B.KSIDE_CASTLE}]},Rv={b:Dv,w:Pv},Oa="--";function Nn(t){return t>>4}function Ni(t){return t&15}function dp(t){return"0123456789".indexOf(t)!==-1}function ke(t){const e=Ni(t),n=Nn(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Yr(t){return t===Me?st:Me}function Iv(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let a=0,l=!1;for(let u=0;u<i[o].length;u++)if(dp(i[o][u])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(i[o][u],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of s){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function Lv(t,e){const n=t.from,r=t.to,i=t.piece;let s=0,o=0,a=0;for(let l=0,u=e.length;l<u;l++){const c=e[l].from,d=e[l].to,f=e[l].piece;i===f&&n!==c&&r===d&&(s++,Nn(n)===Nn(c)&&o++,Ni(n)===Ni(c)&&a++)}return s>0?o>0&&a>0?ke(n):a>0?ke(n).charAt(1):ke(n).charAt(0):""}function Jt(t,e,n,r,i,s=void 0,o=B.NORMAL){const a=Nn(r);if(i===pe&&(a===wv||a===bv))for(let l=0;l<_f.length;l++){const u=_f[l];t.push({color:e,from:n,to:r,piece:i,captured:s,promotion:u,flags:o|B.PROMOTION})}else t.push({color:e,from:n,to:r,piece:i,captured:s,flags:o})}function kf(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:pe:(e=e.toLowerCase(),e==="o"?ye:e)}function wa(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class Pa{constructor(e=Ea,{skipValidation:n=!1}={}){se(this,"_board",new Array(128));se(this,"_turn",Me);se(this,"_header",{});se(this,"_kings",{w:Oe,b:Oe});se(this,"_epSquare",-1);se(this,"_halfMoves",0);se(this,"_moveNumber",0);se(this,"_history",[]);se(this,"_comments",{});se(this,"_castling",{w:0,b:0});se(this,"_hash",0n);se(this,"_positionCount",new Map);this.load(e,{skipValidation:n})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Oe,b:Oe},this._turn=Me,this._castling={w:0,b:0},this._epSquare=Oe,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...kv},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const a=["-","-","0","1"];e=i.concat(a.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:a,error:l}=Iv(e);if(!a)throw new Error(l)}const s=i[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<s.length;a++){const l=s.charAt(a);if(l==="/")o+=8;else if(dp(l))o+=parseInt(l,10);else{const u=l<"a"?Me:st;this._put({type:l.toLowerCase(),color:u},ke(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=B.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=B.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=B.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=B.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Oe:z[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){var o,a;let n=0,r="";for(let l=z.a8;l<=z.h1;l++){if(this._board[l]){n>0&&(r+=n,n=0);const{color:u,type:c}=this._board[l];r+=u===Me?c.toUpperCase():c.toLowerCase()}else n++;l+1&136&&(n>0&&(r+=n),l!==z.h1&&(r+="/"),n=0,l+=8)}let i="";this._castling[Me]&B.KSIDE_CASTLE&&(i+="K"),this._castling[Me]&B.QSIDE_CASTLE&&(i+="Q"),this._castling[st]&B.KSIDE_CASTLE&&(i+="k"),this._castling[st]&B.QSIDE_CASTLE&&(i+="q"),i=i||"-";let s="-";if(this._epSquare!==Oe)if(e)s=ke(this._epSquare);else{const l=this._epSquare+(this._turn===Me?16:-16),u=[l+1,l-1];for(const c of u){if(c&136)continue;const d=this._turn;if(((o=this._board[c])==null?void 0:o.color)===d&&((a=this._board[c])==null?void 0:a.type)===pe){this._makeMove({color:d,from:c,to:this._epSquare,piece:pe,captured:pe,flags:B.EP_CAPTURE});const f=!this._isKingAttacked(d);if(this._undoMove(),f){s=ke(this._epSquare);break}}}}return[r,this._turn,i,s,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:n,type:r}=this._board[e],i={w:0,b:1}[n],s={p:0,n:1,b:2,r:3,q:4,k:5}[r];return yv[i][s][e]}_epKey(){return this._epSquare===Oe?0n:Cv[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return Sv[e]}_computeHash(){let e=0n;for(let n=z.a8;n<=z.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(e^=this._pieceKey(n))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=xa),e}_updateSetup(e){this._history.length>0||(e!==Ea?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Ea)}get(e){return this._board[z[e]]}findPiece(e){var r;const n=[];for(let i=z.a8;i<=z.h1;i++){if(i&136){i+=7;continue}!this._board[i]||((r=this._board[i])==null?void 0:r.color)!==e.color||this._board[i].color===e.color&&this._board[i].type===e.type&&n.push(ke(i))}return n}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,n){this._hash^=this._pieceKey(e),this._board[e]=n,this._hash^=this._pieceKey(e)}_put({type:e,color:n},r){if(Ov.indexOf(e.toLowerCase())===-1||!(r in z))return!1;const i=z[r];if(e==ye&&!(this._kings[n]==Oe||this._kings[n]==i))return!1;const s=this._board[i];return s&&s.type===ye&&(this._kings[s.color]=Oe),this._set(i,{type:e,color:n}),e===ye&&(this._kings[n]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const n=this.get(e);return this._clear(z[e]),n&&n.type===ye&&(this._kings[n.color]=Oe),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,i,s,o,a,l,u,c,d,f,p,g;this._hash^=this._castlingKey();const e=((r=this._board[z.e1])==null?void 0:r.type)===ye&&((i=this._board[z.e1])==null?void 0:i.color)===Me,n=((s=this._board[z.e8])==null?void 0:s.type)===ye&&((o=this._board[z.e8])==null?void 0:o.color)===st;(!e||((a=this._board[z.a1])==null?void 0:a.type)!==ri||((l=this._board[z.a1])==null?void 0:l.color)!==Me)&&(this._castling.w&=-65),(!e||((u=this._board[z.h1])==null?void 0:u.type)!==ri||((c=this._board[z.h1])==null?void 0:c.color)!==Me)&&(this._castling.w&=-33),(!n||((d=this._board[z.a8])==null?void 0:d.type)!==ri||((f=this._board[z.a8])==null?void 0:f.color)!==st)&&(this._castling.b&=-65),(!n||((p=this._board[z.h8])==null?void 0:p.type)!==ri||((g=this._board[z.h8])==null?void 0:g.color)!==st)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var s,o;if(this._epSquare===Oe)return;const e=this._epSquare+(this._turn===Me?-16:16),n=this._epSquare+(this._turn===Me?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((s=this._board[n])==null?void 0:s.color)!==Yr(this._turn)||((o=this._board[n])==null?void 0:o.type)!==pe){this._hash^=this._epKey(),this._epSquare=Oe;return}const i=a=>{var l,u;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((u=this._board[a])==null?void 0:u.type)===pe};r.some(i)||(this._hash^=this._epKey(),this._epSquare=Oe)}_attacked(e,n,r){const i=[];for(let s=z.a8;s<=z.h1;s++){if(s&136){s+=7;continue}if(this._board[s]===void 0||this._board[s].color!==e)continue;const o=this._board[s],a=s-n;if(a===0)continue;const l=a+119;if(xv[l]&Tv[o.type]){if(o.type===pe){if(a>0&&o.color===Me||a<=0&&o.color===st)if(r)i.push(ke(s));else return!0;continue}if(o.type==="n"||o.type==="k")if(r){i.push(ke(s));continue}else return!0;const u=Ev[l];let c=s+u,d=!1;for(;c!==n;){if(this._board[c]!=null){d=!0;break}c+=u}if(!d)if(r){i.push(ke(s));continue}else return!0}}return r?i:!1}attackers(e,n){return n?this._attacked(n,z[e],!0):this._attacked(this._turn,z[e],!0)}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Yr(e),n)}hash(){return this._hash.toString(16)}isAttacked(e,n){return this._attacked(n,z[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,i=0;for(let s=z.a8;s<=z.h1;s++){if(i=(i+1)%2,s&136){s+=7;continue}const o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===Os&&n.push(i),r++)}if(r===2)return!0;if(r===3&&(e[Os]===1||e[Rl]===1))return!0;if(r===e[Os]+2){let s=0;const o=n.length;for(let a=0;a<o;a++)s+=n[a];if(s===0||s===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const i=this._moves({square:n,piece:r});return e?i.map(s=>new us(this,s)):i.map(s=>this._moveToSan(s,i))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var p;const i=r?r.toLowerCase():void 0,s=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=Yr(a);let u=z.a8,c=z.h1,d=!1;if(i)if(i in z)u=c=z[i],d=!0;else return[];for(let g=u;g<=c;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===l)continue;const{type:C}=this._board[g];let P;if(C===pe){if(s&&s!==C)continue;P=g+Ta[a][0],this._board[P]||(Jt(o,a,g,P,pe),P=g+Ta[a][1],Rv[a]===Nn(g)&&!this._board[P]&&Jt(o,a,g,P,pe,void 0,B.BIG_PAWN));for(let m=2;m<4;m++)P=g+Ta[a][m],!(P&136)&&(((p=this._board[P])==null?void 0:p.color)===l?Jt(o,a,g,P,pe,this._board[P].type,B.CAPTURE):P===this._epSquare&&Jt(o,a,g,P,pe,pe,B.EP_CAPTURE))}else{if(s&&s!==C)continue;for(let m=0,h=Sf[C].length;m<h;m++){const y=Sf[C][m];for(P=g;P+=y,!(P&136);){if(!this._board[P])Jt(o,a,g,P,C);else{if(this._board[P].color===a)break;Jt(o,a,g,P,C,this._board[P].type,B.CAPTURE);break}if(C===Rl||C===ye)break}}}}if((s===void 0||s===ye)&&(!d||c===this._kings[a])){if(this._castling[a]&B.KSIDE_CASTLE){const g=this._kings[a],C=g+2;!this._board[g+1]&&!this._board[C]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g+1)&&!this._attacked(l,C)&&Jt(o,a,this._kings[a],C,ye,void 0,B.KSIDE_CASTLE)}if(this._castling[a]&B.QSIDE_CASTLE){const g=this._kings[a],C=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g-1)&&!this._attacked(l,C)&&Jt(o,a,this._kings[a],C,ye,void 0,B.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const f=[];for(let g=0,C=o.length;g<C;g++)this._makeMove(o[g]),this._isKingAttacked(a)||f.push(o[g]),this._undoMove();return f}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(e===null)r=this._moveFromSan(Oa,n);else if(typeof e=="object"){const s=this._moves();for(let o=0,a=s.length;o<a;o++)if(e.from===ke(s[o].from)&&e.to===ke(s[o].to)&&(!("promotion"in s[o])||e.promotion===s[o].promotion)){r=s[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&B.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new us(this,r);return this._makeMove(r),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,n){this._hash^=this._pieceKey(e),this._board[n]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(n)}_makeMove(e){var i,s,o,a;const n=this._turn,r=Yr(n);if(this._push(e),e.flags&B.NULL_MOVE){n===st&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Oe;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&B.EP_CAPTURE&&(this._turn===st?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:n})),this._board[e.to].type===ye){if(this._kings[n]=e.to,e.flags&B.KSIDE_CASTLE){const l=e.to-1,u=e.to+1;this._movePiece(u,l)}else if(e.flags&B.QSIDE_CASTLE){const l=e.to+1,u=e.to-2;this._movePiece(u,l)}this._castling[n]=0}if(this._castling[n]){for(let l=0,u=Xt[n].length;l<u;l++)if(e.from===Xt[n][l].square&&this._castling[n]&Xt[n][l].flag){this._castling[n]^=Xt[n][l].flag;break}}if(this._castling[r]){for(let l=0,u=Xt[r].length;l<u;l++)if(e.to===Xt[r][l].square&&this._castling[r]&Xt[r][l].flag){this._castling[r]^=Xt[r][l].flag;break}}if(this._hash^=this._castlingKey(),e.flags&B.BIG_PAWN){let l;n===st?l=e.to-16:l=e.to+16,!(e.to-1&136)&&((i=this._board[e.to-1])==null?void 0:i.type)===pe&&((s=this._board[e.to-1])==null?void 0:s.color)===r||!(e.to+1&136)&&((o=this._board[e.to+1])==null?void 0:o.type)===pe&&((a=this._board[e.to+1])==null?void 0:a.color)===r?(this._epSquare=l,this._hash^=this._epKey()):this._epSquare=Oe}else this._epSquare=Oe;e.piece===pe?this._halfMoves=0:e.flags&(B.CAPTURE|B.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===st&&this._moveNumber++,this._turn=r,this._hash^=xa}undo(){const e=this._hash,n=this._undoMove();if(n){const r=new us(this,n);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=xa;const r=this._turn,i=Yr(r);if(n.flags&B.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&B.EP_CAPTURE){let s;r===st?s=n.to-16:s=n.to+16,this._set(s,{type:pe,color:i})}else this._set(n.to,{type:n.captured,color:i});if(n.flags&(B.KSIDE_CASTLE|B.QSIDE_CASTLE)){let s,o;n.flags&B.KSIDE_CASTLE?(s=n.to+1,o=n.to-1):(s=n.to-2,o=n.to+1),this._movePiece(o,s)}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let i=!1;for(const f in this._header)this._header[f]&&r.push(`[${f} "${this._header[f]}"]`+e),i=!0;i&&this._history.length&&r.push(e);const s=f=>{const p=this._comments[this.fen()];if(typeof p<"u"){const g=f.length>0?" ":"";f=`${f}${g}{${p}}`}return f},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(s(""));o.length>0;){l=s(l);const f=o.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const p=`${this._moveNumber}. ...`;l=l?`${l} ${p}`:p}else f.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(l.length&&a.push(s(l)),a.push(this._header.Result||"*"),n===0)return r.join("")+a.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},c=function(f,p){for(const g of p.split(" "))if(g){if(f+g.length>n){for(;u();)f--;r.push(e),f=0}r.push(g),f+=g.length,r.push(" "),f++}return u()&&f--,f};let d=0;for(let f=0;f<a.length;f++){if(d+a[f].length>n&&a[f].includes("{")){d=c(d,a[f]);continue}d+a[f].length>n&&f!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),d=0):f!==0&&(r.push(" "),d++),r.push(a[f]),d+=a[f].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}setHeader(e,n){return this._header[e]=n??Il[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Il[e]||null,!0):!1}getHeaders(){const e={};for(const[n,r]of Object.entries(this._header))r!==null&&(e[n]=r);return e}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const i=mv(e);this.reset();const s=i.headers;let o="";for(const u in s)u.toLowerCase()==="fen"&&(o=s[u]),this.header(u,s[u]);if(!n)o&&this.load(o,{preserveHeaders:!0});else if(s.SetUp==="1"){if(!("FEN"in s))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(s.FEN,{preserveHeaders:!0})}let a=i.root;for(;a;){if(a.move){const u=this._moveFromSan(a.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${a.move}`);this._makeMove(u),this._incPositionCount()}a.comment!==void 0&&(this._comments[this.fen()]=a.comment),a=a.variations[0]}const l=i.result;l&&Object.keys(this._header).length&&this._header.Result!==l&&this.setHeader("Result",l)}_moveToSan(e,n){let r="";if(e.flags&B.KSIDE_CASTLE)r="O-O";else if(e.flags&B.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&B.NULL_MOVE)return Oa;if(e.piece!==pe){const i=Lv(e,n);r+=e.piece.toUpperCase()+i}e.flags&(B.CAPTURE|B.EP_CAPTURE)&&(e.piece===pe&&(r+=ke(e.from)[0]),r+="x"),r+=ke(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){let r=wa(e);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Oa)return{color:this._turn,from:0,to:0,piece:"k",flags:B.NULL_MOVE};let i=kf(r),s=this._moves({legal:!0,piece:i});for(let f=0,p=s.length;f<p;f++)if(r===wa(this._moveToSan(s[f],s)))return s[f];if(n)return null;let o,a,l,u,c,d=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],u=a[3],c=a[4],l.length==1&&(d=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],u=a[3],c=a[4],l.length==1&&(d=!0))),i=kf(r),s=this._moves({legal:!0,piece:o||i}),!u)return null;for(let f=0,p=s.length;f<p;f++)if(l){if((!o||o.toLowerCase()==s[f].piece)&&z[l]==s[f].from&&z[u]==s[f].to&&(!c||c.toLowerCase()==s[f].promotion))return s[f];if(d){const g=ke(s[f].from);if((!o||o.toLowerCase()==s[f].piece)&&z[u]==s[f].to&&(l==g[0]||l==g[1])&&(!c||c.toLowerCase()==s[f].promotion))return s[f]}}else if(r===wa(this._moveToSan(s[f],s)).replace("x",""))return s[f];return null}ascii(){let e=`   +------------------------+
`;for(let n=z.a8;n<=z.h1;n++){if(Ni(n)===0&&(e+=" "+"87654321"[Nn(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===Me?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const i=this._turn;for(let s=0,o=n.length;s<o;s++)this._makeMove(n[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let n=[];for(let r=z.a8;r<=z.h1;r++)this._board[r]==null?n.push(null):n.push({square:ke(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in z){const n=z[e];return(Nn(n)+Ni(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?r.push(new us(this,i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const n=this._positionCount.get(e)??0;n===1?this._positionCount.delete(e):this._positionCount.set(e,n-1)}_pruneComments(){const e=[],n={},r=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[ye,tn])n[i]!==void 0&&(n[i]?this._castling[e]|=cs[i]:this._castling[e]&=~cs[i]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[ye]===void 0||n[ye]===r[ye])&&(n[tn]===void 0||n[tn]===r[tn])}getCastlingRights(e){return{[ye]:(this._castling[e]&cs[ye])!==0,[tn]:(this._castling[e]&cs[tn])!==0}}moveNumber(){return this._moveNumber}}function Mv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const ji="abcdefgh".split(""),ws={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},Nv={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},jv={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},Av=[7,6,5,4,3,2,1,0],$v=[0,1,2,3,4,5,6,7],xf={wP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),v.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),v.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),v.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),v.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),v.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"}),v.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),v.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[v.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),v.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),v.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),v.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Ll(t,e,n){const r=e/8,i=t==="white"?Nv:jv,s=t==="white"?Av:$v,o=i[n[0]]*r+r/2,a=s[parseInt(n[1],10)-1]*r+r/2;return{x:o,y:a}}function Ef(t){let e=!1;return Object.keys(ws).forEach(n=>{t[n]!==ws[n]&&(e=!0)}),Object.keys(t).forEach(n=>{ws[n]!==t[n]&&(e=!0)}),e}function zv(t,e){const n={removed:{},added:{}};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n.removed[r]=t[r])}),Object.keys(e).forEach(r=>{t[r]!==e[r]&&(n.added[r]=e[r])}),n}function Tf(t){return t==="start"?ws:typeof t=="string"?Fv(t):t}function Fv(t){if(!Uv(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),n={};let r=8;for(let i=0;i<8;i++){const s=e[i].split("");let o=0;for(let a=0;a<s.length;a++)if(s[a].search(/[1-8]/)!==-1){const l=parseInt(s[a],10);o=o+l}else{const l=ji[o]+r;n[l]=Hv(s[a]),o=o+1}r=r-1}return n}function Uv(t){t=t.replace(/ .+$/,""),t=Bv(t);const e=t.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function Bv(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function Hv(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const Wv=(t,e=!0,n,r)=>{const[i,s]=O.useState([]),[o,a]=O.useState([]),[l,u]=O.useState();O.useEffect(()=>{Array.isArray(t)&&(c(),s(t==null?void 0:t.filter(g=>g[0]!==g[1])))},[t]),O.useEffect(()=>{n==null||n(o)},[o]);function c(){a([]),u(void 0)}const d=(g,C)=>{e&&u([g,C,r])},f=[...o,...i];return{arrows:f,newArrow:l,clearArrows:c,drawNewArrow:d,setArrows:a,onArrowDrawEnd:(g,C)=>{if(g===C||!e)return;let P;const m=[g,C,r];f.every(([y,_])=>!(y===g&&_===C))?P=[...o,m]:P=o.filter(([y,_])=>!(y===g&&_===C)),u(void 0),a(P)}}},hp=O.createContext({}),Qt=()=>O.useContext(hp),Vv=O.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:r=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:o="white",boardWidth:a,children:l,clearPremovesOnRightClick:u=!0,customArrows:c,customArrowColor:d="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:p,customDarkSquareStyle:g={backgroundColor:"#B58863"},customDropSquareStyle:C={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:P={backgroundColor:"#F0D9B5"},customPieces:m,customPremoveDarkSquareStyle:h={backgroundColor:"#A42323"},customPremoveLightSquareStyle:y={backgroundColor:"#BD2828"},customSquare:_="div",customSquareStyles:T,dropOffBoardAction:b="snapback",id:R=0,isDraggablePiece:I=()=>!0,getPositionObject:G=()=>{},onArrowsChange:U=()=>{},onDragOverSquare:fe=()=>{},onMouseOutSquare:te=()=>{},onMouseOverSquare:he=()=>{},onPieceClick:nt=()=>{},onPieceDragBegin:Qe=()=>{},onPieceDragEnd:be=()=>{},onPieceDrop:Te=()=>!0,onPieceDropOffBoard:L=()=>{},onPromotionCheck:F=(Re,Ge,Gn)=>(Gn==="wP"&&Re[1]==="7"&&Ge[1]==="8"||Gn==="bP"&&Re[1]==="2"&&Ge[1]==="1")&&Math.abs(Re.charCodeAt(0)-Ge.charCodeAt(0))<=1,onPromotionPieceSelect:H=()=>!0,onSparePieceDrop:Z=()=>!0,onSquareClick:ie=()=>{},onSquareRightClick:dt=()=>{},position:ze="start",promotionDialogVariant:Dt="default",promotionToSquare:Fe=null,showBoardNotation:W=!0,showPromotionDialog:_t=!1,snapToCursor:jt=!0},xn)=>{const[Re,Ge]=O.useState(Tf(ze)),[Gn,Io]=O.useState({removed:{},added:{}}),[qn,Gt]=O.useState(void 0),[Lo,Yn]=O.useState(_t&&!s),[Mo,Hi]=O.useState(null),[No,Mr]=O.useState(Fe),[Nr,jr]=O.useState([]),bt=O.useRef(Nr),[Ar,En]=O.useState(),[jo,Ao]=O.useState(Object.assign(Object.assign({},xf),m)),[$o,Xn]=O.useState(!1),Jn=O.useRef(),[Zn,er]=O.useState(!1),[zo,Fo]=O.useState(null);O.useImperativeHandle(xn,()=>({clearPremoves(Y=!0){tr(Y)}})),O.useEffect(()=>{Ao(Object.assign(Object.assign({},xf),m))},[m]),O.useEffect(()=>{Yn(_t),Mr(Fe)},[Fe,_t]),O.useEffect(()=>{var Y,w,_e;Fr();const Q=Tf(ze),ve=zv(Re,Q),it=((Y=Object.keys(ve.added))===null||Y===void 0?void 0:Y.length)<=2?(_e=(w=Object.entries(ve.added))===null||w===void 0?void 0:w[0])===null||_e===void 0?void 0:_e[1][0]:void 0;if(Zn)Ge(Q),er(!1),i&&zr(it),Jn.current&&clearTimeout(Jn.current);else if($o)Ge(Q),er(!1),i&&zr(it);else{Ef(Q)&&qn!==void 0?Gt(it):Ef(Q)?Gt(void 0):Gt("b"),Io(ve),er(!0);const qe=setTimeout(()=>{Ge(Q),er(!1),i&&zr(it)},e);Jn.current=qe}return Xn(!1),G(Q),$r(),()=>{clearTimeout(Jn.current)}},[ze]);const{arrows:Wi,newArrow:Uo,clearArrows:$r,drawNewArrow:Bo,onArrowDrawEnd:Ho}=Wv(c,n,U,d);function Wo(Y,w,_e,Q){if(Y===w)return;if($r(),i&&Zn||i&&(qn===_e[0]||bt.current.filter(it=>it.piece[0]===_e[0]).length>0)){const it=[...bt.current];it.push({sourceSq:Y,targetSq:w,piece:_e}),bt.current=it,jr([...it]),Fr();return}if(!i&&Zn)return;const ve=Object.assign({},Re);Xn(!!Q),Gt(_e[0]),Te.length?Te(Y,w,_e)||(tr(),Xn(!1)):(delete ve[Y],ve[w]=_e,Ge(ve)),Fr(),G(ve)}function Vo(Y){const w=Object.assign({},Re);delete w[Y],Ge(w),G(w)}function zr(Y){if(bt.current.length===0)return;const w=bt.current[0];if(w.piece[0]!==void 0&&w.piece[0]!==Y&&Te.length)if(Gt(w.piece[0]),Xn(!0),Te(w.sourceSq,w.targetSq,w.piece)){const Q=[...bt.current];Q.shift(),bt.current=Q,jr([...Q])}else tr()}function Ko(Y,w){if(!Z(Y,w))return;const Q=Object.assign({},Re);Q[w]=Y,Ge(Q),G(Q)}function tr(Y=!0){Y&&Gt(void 0),bt.current=[],jr([])}function Fr(){Hi(null),Mr(null),Yn(!1)}function Qo(Y){En(Y)}function k(Y){if(Ar){if(Ar===Y){En(void 0),u&&tr(!1),dt(Y);return}}else En(void 0)}function qt(){En(void 0)}const rt={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:i,arrows:Wi,autoPromoteToQueen:s,boardOrientation:o,boardWidth:a,chessPieces:jo,clearArrows:$r,clearCurrentRightClickDown:qt,currentPosition:Re,currentRightClickDown:Ar,customArrowColor:d,customBoardStyle:f,customDarkSquareStyle:g,customDropSquareStyle:C,customLightSquareStyle:P,customNotationStyle:p,customPremoveDarkSquareStyle:h,customPremoveLightSquareStyle:y,customSquare:_,customSquareStyles:T,deletePieceFromSquare:Vo,drawNewArrow:Bo,dropOffBoardAction:b,handleSetPosition:Wo,handleSparePieceDrop:Ko,id:R,isDraggablePiece:I,isWaitingForAnimation:Zn,lastPieceColour:qn,lastSquareDraggedOver:zo,newArrow:Uo,onArrowDrawEnd:Ho,onDragOverSquare:fe,onMouseOutSquare:te,onMouseOverSquare:he,onPieceClick:nt,onPieceDragBegin:Qe,onPieceDragEnd:be,onPieceDrop:Te,onPieceDropOffBoard:L,onPromotionCheck:F,onPromotionPieceSelect:H,onRightClickDown:Qo,onRightClickUp:k,onSparePieceDrop:Z,onSquareClick:ie,positionDifferences:Gn,premoves:Nr,promoteFromSquare:Mo,promoteToSquare:No,promotionDialogVariant:Dt,setLastSquareDraggedOver:Fo,setPromoteFromSquare:Hi,setPromoteToSquare:Mr,setShowPromoteDialog:Yn,showBoardNotation:W,showPromoteDialog:Lo,snapToCursor:jt};return v.jsx(hp.Provider,Object.assign({value:rt},{children:l}))});function Kv({row:t,col:e}){const{boardOrientation:n,boardWidth:r,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:o}=Qt(),a=s.backgroundColor,l=i.backgroundColor,u=e===0,c=t===7,d=u&&c;function f(){return n==="white"?8-t:t+1}function p(){return n==="black"?ji[7-e]:ji[e]}function g(){return v.jsxs(v.Fragment,{children:[v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),wf(r,o))},{children:f()})),v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),Of(r,o))},{children:p()}))]})}function C(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?l:a}),Of(r,o))},{children:p()}))}function P(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:t%2===0?l:a}:{color:t%2===0?l:a}),wf(r,o))},{children:f()}))}return d?g():c?C():u?P():null}const Of=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),wf=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),pp=O.createContext({dragDropManager:void 0});function ht(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Pf=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Df=function(){return Math.random().toString(36).substring(7).split("").join(".")},bf={INIT:"@@redux/INIT"+Df(),REPLACE:"@@redux/REPLACE"+Df()};function Qv(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function gp(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ht(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ht(1));return n(gp)(t,e)}if(typeof t!="function")throw new Error(ht(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(ht(3));return s}function d(C){if(typeof C!="function")throw new Error(ht(4));if(l)throw new Error(ht(5));var P=!0;return u(),a.push(C),function(){if(P){if(l)throw new Error(ht(6));P=!1,u();var h=a.indexOf(C);a.splice(h,1),o=null}}}function f(C){if(!Qv(C))throw new Error(ht(7));if(typeof C.type>"u")throw new Error(ht(8));if(l)throw new Error(ht(9));try{l=!0,s=i(s,C)}finally{l=!1}for(var P=o=a,m=0;m<P.length;m++){var h=P[m];h()}return C}function p(C){if(typeof C!="function")throw new Error(ht(10));i=C,f({type:bf.REPLACE})}function g(){var C,P=d;return C={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(ht(11));function y(){h.next&&h.next(c())}y();var _=P(y);return{unsubscribe:_}}},C[Pf]=function(){return this},C}return f({type:bf.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:p},r[Pf]=g,r}function V(t,e,...n){if(Gv()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function Gv(){return typeof process<"u"&&!0}function qv(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function Yv(t,e){return t.filter(n=>n!==e)}function mp(t){return typeof t=="object"}function Xv(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function Jv(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Vu="dnd-core/INIT_COORDS",Oo="dnd-core/BEGIN_DRAG",Ku="dnd-core/PUBLISH_DRAG_SOURCE",wo="dnd-core/HOVER",Po="dnd-core/DROP",Do="dnd-core/END_DRAG";function Rf(t,e){return{type:Vu,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Zv={type:Vu,payload:{clientOffset:null,sourceClientOffset:null}};function ey(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch(Rf(s)),ty(n,a,l);const u=iy(n,a);if(u==null){t.dispatch(Zv);return}let c=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");ny(o),c=o(u)}t.dispatch(Rf(s,c));const f=l.getSource(u).beginDrag(a,u);if(f==null)return;ry(f),l.pinSource(u);const p=l.getSourceType(u);return{type:Oo,payload:{itemType:p,item:f,sourceId:u,clientOffset:s||null,sourceClientOffset:c||null,isSourcePublic:!!i}}}}function ty(t,e,n){V(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){V(n.getSource(r),"Expected sourceIds to be registered.")})}function ny(t){V(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function ry(t){V(mp(t),"Item must be an object.")}function iy(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function sy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){sy(t,i,n[i])})}return t}function ay(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();ly(r),fy(r).forEach((o,a)=>{const l=uy(o,a,i,r),u={type:Po,payload:{dropResult:oy({},n,l)}};t.dispatch(u)})}}function ly(t){V(t.isDragging(),"Cannot call drop while not dragging."),V(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function uy(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return cy(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function cy(t){V(typeof t>"u"||mp(t),"Drop result must either be an object or undefined.")}function fy(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function dy(t){return function(){const n=t.getMonitor(),r=t.getRegistry();hy(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Do}}}function hy(t){V(t.isDragging(),"Cannot call endDrag while not dragging.")}function Ml(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function py(t){return function(n,{clientOffset:r}={}){gy(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return vy(i,o,a),my(i,s,o),yy(i,s,o),{type:wo,payload:{targetIds:i,clientOffset:r||null}}}}function gy(t){V(Array.isArray(t),"Expected targetIds to be an array.")}function my(t,e,n){V(e.isDragging(),"Cannot call hover while not dragging."),V(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];V(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);V(s,"Expected targetIds to be registered.")}}function vy(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);Ml(s,n)||t.splice(r,1)}}function yy(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function Cy(t){return function(){if(t.getMonitor().isDragging())return{type:Ku}}}function Sy(t){return{beginDrag:ey(t),publishDragSource:Cy(t),hover:py(t),drop:ay(t),endDrag:dy(t)}}class _y{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=Sy(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function ky(t,e){return{x:t.x+e.x,y:t.y+e.y}}function vp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function xy(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:vp(ky(e,r),n)}function Ey(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:vp(e,n)}const pi=[],Qu=[];pi.__IS_NONE__=!0;Qu.__IS_ALL__=!0;function Ty(t,e){return t===pi?!1:t===Qu||typeof e>"u"?!0:Jv(e,t).length>0}class Oy{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;V(typeof e=="function","listener must be a function."),V(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!Ty(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){V(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return V(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(V(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return Ml(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(V(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!Ml(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return xy(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Ey(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const If=typeof global<"u"?global:self,yp=If.MutationObserver||If.WebKitMutationObserver;function Cp(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function wy(t){let e=1;const n=new yp(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const Py=typeof yp=="function"?wy:Cp;class Dy{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Py(this.flush),this.requestErrorThrow=Cp(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class by{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Ry{create(e){const n=this.freeTasks,r=n.length?n.pop():new by(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const Sp=new Dy,Iy=new Ry(Sp.registerPendingError);function Ly(t){Sp.enqueueTask(Iy.create(t))}const Gu="dnd-core/ADD_SOURCE",qu="dnd-core/ADD_TARGET",Yu="dnd-core/REMOVE_SOURCE",bo="dnd-core/REMOVE_TARGET";function My(t){return{type:Gu,payload:{sourceId:t}}}function Ny(t){return{type:qu,payload:{targetId:t}}}function jy(t){return{type:Yu,payload:{sourceId:t}}}function Ay(t){return{type:bo,payload:{targetId:t}}}function $y(t){V(typeof t.canDrag=="function","Expected canDrag to be a function."),V(typeof t.beginDrag=="function","Expected beginDrag to be a function."),V(typeof t.endDrag=="function","Expected endDrag to be a function.")}function zy(t){V(typeof t.canDrop=="function","Expected canDrop to be a function."),V(typeof t.hover=="function","Expected hover to be a function."),V(typeof t.drop=="function","Expected beginDrag to be a function.")}function Nl(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Nl(n,!1));return}V(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var mt;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(mt||(mt={}));let Fy=0;function Uy(){return Fy++}function By(t){const e=Uy().toString();switch(t){case mt.SOURCE:return`S${e}`;case mt.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function Lf(t){switch(t[0]){case"S":return mt.SOURCE;case"T":return mt.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function Mf(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class Hy{addSource(e,n){Nl(e),$y(n);const r=this.addHandler(mt.SOURCE,e,n);return this.store.dispatch(My(r)),r}addTarget(e,n){Nl(e,!0),zy(n);const r=this.addHandler(mt.TARGET,e,n);return this.store.dispatch(Ny(r)),r}containsHandler(e){return Mf(this.dragSources,e)||Mf(this.dropTargets,e)}getSource(e,n=!1){return V(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return V(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return V(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return V(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Lf(e)===mt.SOURCE}isTargetId(e){return Lf(e)===mt.TARGET}removeSource(e){V(this.getSource(e),"Expected an existing source."),this.store.dispatch(jy(e)),Ly(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){V(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Ay(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);V(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){V(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=By(e);return this.types.set(i,n),e===mt.SOURCE?this.dragSources.set(i,r):e===mt.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Wy=(t,e)=>t===e;function Vy(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Ky(t,e,n=Wy){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function Qy(t=pi,e){switch(e.type){case wo:break;case Gu:case qu:case bo:case Yu:return pi;case Oo:case Ku:case Do:case Po:default:return Qu}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=Xv(n,r);if(!(i.length>0||!Ky(n,r)))return pi;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function Gy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Gy(t,i,n[i])})}return t}const Nf={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Yy(t=Nf,e){const{payload:n}=e;switch(e.type){case Vu:case Oo:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case wo:return Vy(t.clientOffset,n.clientOffset)?t:qy({},t,{clientOffset:n.clientOffset});case Do:case Po:return Nf;default:return t}}function Xy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Xy(t,i,n[i])})}return t}const Jy={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Zy(t=Jy,e){const{payload:n}=e;switch(e.type){case Oo:return rr({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Ku:return rr({},t,{isSourcePublic:!0});case wo:return rr({},t,{targetIds:n.targetIds});case bo:return t.targetIds.indexOf(n.targetId)===-1?t:rr({},t,{targetIds:Yv(t.targetIds,n.targetId)});case Po:return rr({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Do:return rr({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function e1(t=0,e){switch(e.type){case Gu:case qu:return t+1;case Yu:case bo:return t-1;default:return t}}function t1(t=0){return t+1}function n1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){n1(t,i,n[i])})}return t}function i1(t={},e){return{dirtyHandlerIds:Qy(t.dirtyHandlerIds,{type:e.type,payload:r1({},e.payload,{prevTargetIds:qv(t,"dragOperation.targetIds",[])})}),dragOffset:Yy(t.dragOffset,e),refCount:e1(t.refCount,e),dragOperation:Zy(t.dragOperation,e),stateId:t1(t.stateId)}}function s1(t,e=void 0,n={},r=!1){const i=o1(r),s=new Oy(i,new Hy(i)),o=new _y(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function o1(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return gp(i1,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function a1(t,e){if(t==null)return{};var n=l1(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function l1(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let jf=0;const Ps=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var u1=O.memo(function(e){var{children:n}=e,r=a1(e,["children"]);const[i,s]=c1(r);return O.useEffect(()=>{if(s){const o=_p();return++jf,()=>{--jf===0&&(o[Ps]=null)}}},[]),v.jsx(pp.Provider,{value:i,children:n})});function c1(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=f1(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function f1(t,e=_p(),n,r){const i=e;return i[Ps]||(i[Ps]={dragDropManager:s1(t,e,n,r)}),i[Ps]}function _p(){return typeof global<"u"?global:window}var d1=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Un=typeof window<"u"?O.useLayoutEffect:O.useEffect;function kp(t,e,n){const[r,i]=O.useState(()=>e(t)),s=O.useCallback(()=>{const o=e(t);d1(r,o)||(i(o),n&&n())},[r,t,n]);return Un(s),[r,s]}function h1(t,e,n){const[r,i]=kp(t,e,n);return Un(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function xp(t,e,n){return h1(e,t||(()=>({})),()=>n.reconnect())}function Ep(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),O.useMemo(()=>typeof t=="function"?t():t,n)}function p1(t){return O.useMemo(()=>t.hooks.dragSource(),[t])}function g1(t){return O.useMemo(()=>t.hooks.dragPreview(),[t])}let Da=!1,ba=!1;class m1{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){V(!Da,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Da=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Da=!1}}isDragging(){if(!this.sourceId)return!1;V(!ba,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return ba=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{ba=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let Ra=!1;class v1{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;V(!Ra,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return Ra=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{Ra=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function y1(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function C1(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function jl(t,e,n,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const u=s[l];if(!a(u))return!1;const c=t[u],d=e[u];if(i=void 0,i===!1||i===void 0&&c!==d)return!1}return!0}function Al(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function S1(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function _1(t){return(e=null,n=null)=>{if(!O.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return S1(r),k1(r,n?s=>t(s,n):t)}}function Tp(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=_1(r);e[n]=()=>i}}),e}function Af(t,e){typeof t=="function"?t(e):t.current=e}function k1(t,e){const n=t.ref;return V(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?O.cloneElement(t,{ref:r=>{Af(n,r),Af(e,r)}}):O.cloneElement(t,{ref:e})}class x1{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!jl(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!jl(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Tp({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Al(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Al(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class E1{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!jl(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Tp({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Al(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Wn(){const{dragDropManager:t}=O.useContext(pp);return V(t!=null,"Expected drag drop context"),t}function T1(t,e){const n=Wn(),r=O.useMemo(()=>new x1(n.getBackend()),[n]);return Un(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Un(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function O1(){const t=Wn();return O.useMemo(()=>new m1(t),[t])}class w1{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function P1(t,e,n){const r=O.useMemo(()=>new w1(t,e,n),[e,n]);return O.useEffect(()=>{r.spec=t},[t]),r}function D1(t){return O.useMemo(()=>{const e=t.type;return V(e!=null,"spec.type must be defined"),e},[t])}function b1(t,e,n){const r=Wn(),i=P1(t,e,n),s=D1(t);Un(function(){if(s!=null){const[a,l]=C1(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function R1(t,e){const n=Ep(t,e);V(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=O1(),i=T1(n.options,n.previewOptions);return b1(n,r,i),[xp(n.collect,r,i),p1(i),g1(i)]}function I1(t){const n=Wn().getMonitor(),[r,i]=kp(n,t);return O.useEffect(()=>n.subscribeToOffsetChange(i)),O.useEffect(()=>n.subscribeToStateChange(i)),r}function L1(t){return O.useMemo(()=>t.hooks.dropTarget(),[t])}function M1(t){const e=Wn(),n=O.useMemo(()=>new E1(e.getBackend()),[e]);return Un(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function N1(){const t=Wn();return O.useMemo(()=>new v1(t),[t])}function j1(t){const{accept:e}=t;return O.useMemo(()=>(V(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class A1{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function $1(t,e){const n=O.useMemo(()=>new A1(t,e),[e]);return O.useEffect(()=>{n.spec=t},[t]),n}function z1(t,e,n){const r=Wn(),i=$1(t,e),s=j1(t);Un(function(){const[a,l]=y1(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function F1(t,e){const n=Ep(t,e),r=N1(),i=M1(n.options);return z1(n,r,i),[xp(n.collect,r,i),L1(i)]}function Op(t){let e=null;return()=>(e==null&&(e=t()),e)}function U1(t,e){return t.filter(n=>n!==e)}function B1(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class H1{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=B1(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=U1(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class W1{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const wp="__NATIVE_FILE__",Pp="__NATIVE_URL__",Dp="__NATIVE_TEXT__",bp="__NATIVE_HTML__";var $f=Object.freeze({__proto__:null,FILE:wp,HTML:bp,TEXT:Dp,URL:Pp});function Ia(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const $l={[wp]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[bp]:{exposeProperties:{html:(t,e)=>Ia(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Pp]:{exposeProperties:{urls:(t,e)=>Ia(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Dp]:{exposeProperties:{text:(t,e)=>Ia(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function V1(t,e){const n=$l[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new W1(n);return r.loadDataTransfer(e),r}function La(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys($l).filter(n=>{const r=$l[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const K1=Op(()=>/firefox/i.test(navigator.userAgent)),Rp=Op(()=>!!window.safari);class zf{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,u=o.length-1,c;for(;l<=u;){c=Math.floor(.5*(l+u));const p=n[c];if(p<e)l=c+1;else if(p>e)u=c-1;else return r[c]}a=Math.max(0,u);const d=e-n[a],f=d*d;return r[a]+i[a]*d+s[a]*f+o[a]*d*f}constructor(e,n){const{length:r}=e,i=[];for(let p=0;p<r;p++)i.push(p);i.sort((p,g)=>e[p]<e[g]?-1:1);const s=[],o=[];let a,l;for(let p=0;p<r-1;p++)a=e[p+1]-e[p],l=n[p+1]-n[p],s.push(a),o.push(l/a);const u=[o[0]];for(let p=0;p<s.length-1;p++){const g=o[p],C=o[p+1];if(g*C<=0)u.push(0);else{a=s[p];const P=s[p+1],m=a+P;u.push(3*m/((m+P)/g+(m+a)/C))}}u.push(o[o.length-1]);const c=[],d=[];let f;for(let p=0;p<u.length-1;p++){f=o[p];const g=u[p],C=1/s[p],P=g+u[p+1]-f-f;c.push((f-g-P)*C),d.push(P*C*C)}this.xs=e,this.ys=n,this.c1s=u,this.c2s=c,this.c3s=d}}const Q1=1;function Ip(t){const e=t.nodeType===Q1?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function fs(t){return{x:t.clientX,y:t.clientY}}function G1(t){var e;return t.nodeName==="IMG"&&(K1()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function q1(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return Rp()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function Y1(t,e,n,r,i){const s=G1(e),a=Ip(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:u,offsetHeight:c}=t,{anchorX:d,anchorY:f}=r,{dragPreviewWidth:p,dragPreviewHeight:g}=q1(s,e,u,c),C=()=>{let b=new zf([0,.5,1],[l.y,l.y/c*g,l.y+g-c]).interpolate(f);return Rp()&&s&&(b+=(window.devicePixelRatio-1)*g),b},P=()=>new zf([0,.5,1],[l.x,l.x/u*p,l.x+p-u]).interpolate(d),{offsetX:m,offsetY:h}=i,y=m===0||m,_=h===0||h;return{x:y?m:P(),y:_?h:C()}}let X1=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function J1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ff(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){J1(t,i,n[i])})}return t}class Z1{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return Ff({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return Ff({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys($f).some(n=>$f[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=V1(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&Ip(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=fs(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=La(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const c=this.monitor.getSourceId(),d=this.sourceNodes.get(c),f=this.sourcePreviewNodes.get(c)||d;if(f){const{anchorX:p,anchorY:g,offsetX:C,offsetY:P}=this.getCurrentSourcePreviewNodeOptions(),y=Y1(d,f,o,{anchorX:p,anchorY:g},{offsetX:C,offsetY:P});a.setDragImage(f,y.x,y.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=La(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:fs(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=fs(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else La(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:fs(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new X1(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new H1(this.isNodeInDocument)}}let ds;function eC(){return ds||(ds=new Image,ds.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),ds}const tC=function(e,n,r){return new Z1(e,n,r)};function Uf({isPremovedPiece:t=!1,piece:e,square:n,squares:r}){const{animationDuration:i,arePiecesDraggable:s,boardWidth:o,boardOrientation:a,chessPieces:l,currentPosition:u,deletePieceFromSquare:c,dropOffBoardAction:d,id:f,isDraggablePiece:p,isWaitingForAnimation:g,onPieceClick:C,onPieceDragBegin:P,onPieceDragEnd:m,onPieceDropOffBoard:h,onPromotionCheck:y,positionDifferences:_}=Qt(),[T,b]=O.useState({opacity:1,zIndex:5,touchAction:"none",cursor:s&&p({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:R,isDragging:I},G,U]=R1(()=>({type:"piece",item:()=>(P(e,n),{piece:e,square:n,id:f}),end:(te,he)=>{m(e,n),!he.didDrop()&&(d==="trash"&&c(n),h==null||h(n,e))},collect:te=>({canDrag:p({piece:e,sourceSquare:n}),isDragging:!!te.isDragging()})}),[e,n,u,f]);U(eC(),{captureDraggingState:!0}),O.useEffect(()=>{b(te=>Object.assign(Object.assign({},te),{opacity:I?0:1}))},[I]),O.useEffect(()=>{var te;const he=(te=_.removed)===null||te===void 0?void 0:te[n];if(!_.added||!he)return;const nt=Object.entries(_.added).find(([Qe,be])=>be===he||y(n,Qe,he));if(g&&he&&nt&&!t){const Qe=n,be=nt[0];if(Qe&&be){const Te=o/8;b(L=>Object.assign(Object.assign({},L),{transform:`translate(${(a==="black"?-1:1)*(be.charCodeAt(0)-Qe.charCodeAt(0))*Te}px, ${(a==="black"?-1:1)*(Number(Qe[1])-Number(be[1]))*Te}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[_]),O.useEffect(()=>{const{sourceSq:te}=fe();te&&b(he=>Object.assign(Object.assign({},he),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[u]),O.useEffect(()=>{b(te=>Object.assign(Object.assign({},te),{cursor:s&&p({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,u,s]);function fe(){return{sourceSq:r[n]}}return v.jsx("div",Object.assign({ref:s&&R?G:null,onClick:()=>C(e,n),"data-piece":e,style:T},{children:typeof l[e]=="function"?l[e]({squareWidth:o/8,isDragging:I,square:n}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:v.jsx("g",{children:l[e]})}))}))}function nC({square:t,squareColor:e,setSquares:n,squareHasPremove:r,children:i}){const s=O.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:l,clearArrows:u,currentPosition:c,currentRightClickDown:d,customBoardStyle:f,customDarkSquareStyle:p,customDropSquareStyle:g,customLightSquareStyle:C,customPremoveDarkSquareStyle:P,customPremoveLightSquareStyle:m,customSquare:h,customSquareStyles:y,drawNewArrow:_,handleSetPosition:T,handleSparePieceDrop:b,isWaitingForAnimation:R,lastPieceColour:I,lastSquareDraggedOver:G,onArrowDrawEnd:U,onDragOverSquare:fe,onMouseOutSquare:te,onMouseOverSquare:he,onPieceDrop:nt,onPromotionCheck:Qe,onRightClickDown:be,onRightClickUp:Te,onSquareClick:L,setLastSquareDraggedOver:F,setPromoteFromSquare:H,setPromoteToSquare:Z,setShowPromoteDialog:ie}=Qt(),[{isOver:dt},ze]=F1(()=>({accept:"piece",drop:Dt,collect:W=>({isOver:!!W.isOver()})}),[t,c,nt,R,I]);function Dt(W){if(W.isSpare){b(W.piece,t);return}Qe(W.square,t,W.piece)?o?T(W.square,t,W.piece[0]==="w"?"wQ":"bQ"):(H(W.square),Z(t),ie(!0)):T(W.square,t,W.piece,!0)}O.useEffect(()=>{if(s.current){const{x:W,y:_t}=s.current.getBoundingClientRect();n(jt=>Object.assign(Object.assign({},jt),{[t]:{x:W,y:_t}}))}},[a,l]);const Fe=Object.assign(Object.assign(Object.assign(Object.assign({},rC(t,l,f)),e==="black"?p:C),r&&(e==="black"?P:m)),dt&&g);return v.jsx("div",Object.assign({ref:ze,style:Fe,"data-square-color":e,"data-square":t,onTouchMove:W=>{var _t;const jt=W.touches[0],xn=document.elementsFromPoint(jt.clientX,jt.clientY),Re=(_t=xn==null?void 0:xn.find(Ge=>Ge.getAttribute("data-square")))===null||_t===void 0?void 0:_t.getAttribute("data-square");Re&&Re!==G&&(F(Re),fe(Re))},onMouseOver:W=>{W.buttons===2&&d&&_(d,t),!(W.relatedTarget&&W.currentTarget.contains(W.relatedTarget))&&he(t)},onMouseOut:W=>{W.relatedTarget&&W.currentTarget.contains(W.relatedTarget)||te(t)},onMouseDown:W=>{W.button===2&&be(t)},onMouseUp:W=>{W.button===2&&(d&&U(d,t),Te(t))},onDragEnter:()=>fe(t),onClick:()=>{const W=c[t];L(t,W),u()},onContextMenu:W=>{W.preventDefault()}},{children:typeof h=="string"?v.jsx(h,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},Hf(a)),Bf),!r&&(y==null?void 0:y[t]))},{children:i})):v.jsx(h,Object.assign({ref:s,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},Hf(a)),Bf),!r&&(y==null?void 0:y[t]))},{children:i}))}))}const Bf={display:"flex",justifyContent:"center"},Hf=t=>({width:t/8,height:t/8}),rC=(t,e,n)=>n!=null&&n.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function iC(){const[t,e]=O.useState({}),{arePremovesAllowed:n,boardOrientation:r,boardWidth:i,currentPosition:s,id:o,premoves:a,showBoardNotation:l}=Qt(),u=O.useMemo(()=>{const c=[];return n?(a.forEach((d,f)=>{const{sourceSq:p,targetSq:g,piece:C}=d,P=c.find(m=>{var h;return m.piece===C&&((h=m.premovesRoute.at(-1))===null||h===void 0?void 0:h.targetSq)===p});P?P.premovesRoute.push({sourceSq:p,targetSq:g,index:f}):c.push({piece:C,premovesRoute:[{sourceSq:p,targetSq:g,index:f}]})}),c):[]},[a]);return v.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((c,d)=>v.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((f,p)=>{const g=r==="black"?ji[7-p]+(d+1):ji[p]+(8-d),C=p%2===d%2?"white":"black",P=a.find(h=>h.sourceSq===g||h.targetSq===g),m=u.filter(({premovesRoute:h})=>{var y;return((y=h.at(-1))===null||y===void 0?void 0:y.targetSq)===g}).sort((h,y)=>{var _,T;return((_=y.premovesRoute.at(-1))===null||_===void 0?void 0:_.index)-((T=h.premovesRoute.at(-1))===null||T===void 0?void 0:T.index)}).at(0);return v.jsxs(nC,Object.assign({square:g,squareColor:C,setSquares:e,squareHasPremove:!!P},{children:[!P&&s[g]&&v.jsx(Uf,{piece:s[g],square:g,squares:t}),m&&v.jsx(Uf,{isPremovedPiece:!0,piece:m.piece,square:g,squares:t}),l&&v.jsx(Kv,{row:d,col:p})]}),`${p}${d}`)})}),d.toString()))}))}const sC=()=>{const{arrows:t,newArrow:e,boardOrientation:n,boardWidth:r,customArrowColor:i}=Qt(),s=[...t,e].filter(Boolean);return v.jsx("svg",Object.assign({width:r,height:r,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((o,a)=>{const[l,u,c]=o;if(l===u)return null;const d=Ll(n,r,l),f=Ll(n,r,u);let p=r/32;const g=a===t.length;t.some(y=>y[0]!==l&&y[1]===u)&&!g&&(p=r/16);const C=f.x-d.x,P=f.y-d.y,m=Math.hypot(P,C),h={x:d.x+C*(m-p)/m,y:d.y+P*(m-p)/m};return v.jsxs(O.Fragment,{children:[v.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:v.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:c??i})})),v.jsx("line",{x1:d.x,y1:d.y,x2:h.x,y2:h.y,opacity:g?"0.5":"0.65",stroke:c??i,strokeWidth:g?.9*r/40:r/40,markerEnd:`url(#arrowhead-${a})`})]},`${l}-${u}${g?"-active":""}`)})}))};function oC({option:t}){const[e,n]=O.useState(!1),{boardWidth:r,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:l,promoteFromSquare:u,promoteToSquare:c,promotionDialogVariant:d}=Qt(),f=()=>{switch(t[1]){case"Q":return s.backgroundColor;case"R":return o.backgroundColor;case"N":return d==="default"?o.backgroundColor:s.backgroundColor;case"B":return d==="default"?s.backgroundColor:o.backgroundColor}};return v.jsx("div",Object.assign({onClick:()=>{l(t,u??void 0,c??void 0)&&a(u,c,t,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?v.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:r/8,isDragging:!1})})):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:r/8,height:r/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:v.jsx("g",{children:i[t]})}))}))}function aC(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:n,promoteToSquare:r}=Qt(),i=(r==null?void 0:r[1])==="1"?"b":"w",s=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=Ll(t,e,r||"a8");return v.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[n]),title:"Choose promotion piece"},{children:s.map(l=>v.jsx(oC,{option:l},l))}))}const lC={whiteKing:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:v.jsx("g",{children:v.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function uC({children:t}){try{return v.jsx(v.Fragment,{children:t})}catch(e){return console.log(e),v.jsx(Lp,{showError:!0})}}function Lp({showError:t=!1}){return v.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[v.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:lC.whiteKing})),t&&v.jsx("h1",{children:"Something went wrong"})]}))}function cC(){const t=O.useRef(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:r,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:o}=Qt();return O.useEffect(()=>{function a(l){t.current&&!t.current.contains(l.target)&&n()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?v.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:v.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},fC(e)),o)},{children:[v.jsx(iC,{}),v.jsx(sC,{}),s&&v.jsxs(v.Fragment,{children:[v.jsx("div",{onClick:()=>{i(!1),r==null||r()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),v.jsx(aC,{})]})]}))})):v.jsx(Lp,{})}const fC=t=>({cursor:"default",height:t,width:t});var mn;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(mn||(mn={}));class dC{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function hC(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function pC(t,e,n,r,i){if(!i)return!1;const s=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<i.length;++o){const a=i[o];if(a&&(a.start==null||s>=a.start)&&(a.end==null||s<=a.end))return!0}return!1}const gC={Left:1},mC={Left:0};function Ma(t){return t.button===void 0||t.button===mC.Left}function vC(t){return t.buttons===void 0||(t.buttons&gC.Left)===0}function Mp(t){return!!t.targetTouches}const yC=1;function CC(t){const e=t.nodeType===yC?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function SC(t,e){if(t.targetTouches.length===1)return so(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return so(t.touches[0])}function so(t,e){return Mp(t)?SC(t,e):{x:t.clientX,y:t.clientY}}const Wf=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Xr={[mn.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[mn.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[mn.keyboard]:{keydown:"keydown"}};class gi{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(V(!gi.isSetUp,"Cannot have two Touch backends at the same time."),gi.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(gi.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,i=!1){const s=Wf?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Xr[o][n];a&&e.addEventListener(a,r,s)})}removeEventListener(e,n,r,i=!1){const s=Wf?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Xr[o][n];a&&e.removeEventListener(a,r,s)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const i=s=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(s.type){case Xr.mouse.move:o={x:s.clientX,y:s.clientY};break;case Xr.touch.move:var a,l;o={x:((a=s.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((l=s.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,c=u&&n.contains(u);if(u===n||c)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&CC(s)},this.handleTopMoveStartCapture=i=>{Ma(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!Ma(i))return;const s=so(i);s&&(Mp(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!Ma(i))return;const s=i.type===Xr.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,l=so(i,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&pC(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&hC(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const c=(o||[]).map(g=>this.targetNodes.get(g)).filter(g=>!!g),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,c):this.document.elementsFromPoint(l.x,l.y),f=[];for(const g in d){if(!d.hasOwnProperty(g))continue;let C=d[g];for(C!=null&&f.push(C);C;)C=C.parentElement,C&&f.indexOf(C)===-1&&f.push(C)}const p=f.filter(g=>c.indexOf(g)>-1).map(g=>this._getDropTargetId(g)).filter(g=>!!g).filter((g,C,P)=>P.indexOf(g)===C);if(a)for(const g in this.targetNodes){const C=this.targetNodes.get(g);if(u&&C&&C.contains(u)&&p.indexOf(g)===-1){p.unshift(g);break}}p.reverse(),this.actions.hover(p,{clientOffset:l})},this._getDropTargetId=i=>{const s=this.targetNodes.keys();let o=s.next();for(;o.done===!1;){const a=o.value;if(i===this.targetNodes.get(a))return a;o=s.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!vC(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new dC(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(mn.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(mn.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(mn.keyboard)}}const _C=function(e,n={},r={}){return new gi(e,n,r)},kC=O.createContext({isCustomDndProviderSet:!1}),xC=({children:t})=>v.jsx(v.Fragment,{children:t}),EC=({customDndBackend:t,customDndBackendOptions:e,children:n})=>{const[r,i]=O.useState(),[s,o]=O.useState(!1),[a,l]=O.useState(!1),{isCustomDndProviderSet:u}=O.useContext(kC);O.useEffect(()=>{l("ontouchstart"in window),o(!0),i(window)},[]);const c=u?xC:u1;return s?r?v.jsx(c,Object.assign({backend:t||(a?_C:tC),context:r,options:t?e:void 0},{children:n})):v.jsx(v.Fragment,{children:n}):null};function TC({boardContainer:t}){const{boardWidth:e,chessPieces:n,id:r,snapToCursor:i,allowDragOutsideBoard:s}=Qt(),o=I1(f=>({item:f.getItem(),clientOffset:f.getClientOffset(),sourceClientOffset:f.getSourceClientOffset(),isDragging:f.isDragging()})),{isDragging:a,item:l,clientOffset:u,sourceClientOffset:c}=o,d=O.useCallback((f,p)=>{if(!f||!p)return{display:"none"};let{x:g,y:C}=i?f:p;const P=e/8/2;if(i&&(g-=P,C-=P),!s){const{left:h,top:y}=t,_=h-P,T=y-P,b=h+e-P,R=y+e-P;g=Math.max(_,Math.min(g,b)),C=Math.max(T,Math.min(C,R))}const m=`translate(${g}px, ${C}px)`;return{transform:m,WebkitTransform:m,touchAction:"none"}},[e,s,i,t]);return a&&l.id===r?v.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:v.jsx("div",Object.assign({style:d(u,c)},{children:typeof n[l.piece]=="function"?n[l.piece]({squareWidth:e/8,isDragging:!0}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:v.jsx("g",{children:n[l.piece]})}))}))})):null}const OC=O.forwardRef((t,e)=>{const{customDndBackend:n,customDndBackendOptions:r,onBoardWidthChange:i}=t,s=Mv(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=O.useState(t.boardWidth),l=O.useRef(null),u=O.useRef(null),[c,d]=O.useState({left:0,top:0}),f=O.useMemo(()=>{var p;return(p=l.current)===null||p===void 0?void 0:p.getBoundingClientRect()},[l.current]);return O.useEffect(()=>{o&&(i==null||i(o))},[o]),O.useEffect(()=>{d({left:f!=null&&f.left?f==null?void 0:f.left:0,top:f!=null&&f.top?f==null?void 0:f.top:0})},[f]),O.useEffect(()=>{var p;if(t.boardWidth===void 0&&(!((p=l.current)===null||p===void 0)&&p.offsetWidth)){const g=new ResizeObserver(()=>{var C;a((C=l.current)===null||C===void 0?void 0:C.offsetWidth)});return g.observe(l.current),()=>{g.disconnect()}}},[l.current]),v.jsx(uC,{children:v.jsxs("div",Object.assign({ref:u,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[v.jsx("div",{ref:l,style:{width:"100%"}}),v.jsx(EC,Object.assign({customDndBackend:n,customDndBackendOptions:r},{children:o&&v.jsxs(Vv,Object.assign({boardWidth:o},s,{ref:e},{children:[v.jsx(TC,{boardContainer:c}),v.jsx(cC,{})]}))}))]}))})}),Na=({gameMode:t="local",onExit:e,connection:n,myColor:r})=>{const[i,s]=O.useState(new Pa),[o,a]=O.useState(null),[l,u]=O.useState({}),c=O.useRef(null),[d,f]=O.useState(10);O.useEffect(()=>{if(t==="ai"){try{c.current=new Worker("./stockfish.js"),c.current.onmessage=_=>{const T=_.data;if(T&&typeof T=="string"&&T.startsWith("bestmove")){const R=T.split(" ")[1];R&&p(I=>{I.move({from:R.substring(0,2),to:R.substring(2,4),promotion:R.substring(4,5)||"q"})})}},c.current.postMessage("uci"),c.current.postMessage("isready")}catch(_){console.error("Could not load stockfish worker",_)}return()=>{c.current&&c.current.terminate()}}},[t]),O.useEffect(()=>{t==="online"&&n&&n.on("data",_=>{_.type==="move"?p(T=>{T.move(_.move)}):_.type==="reset"&&p(T=>T.reset())})},[t,n]),O.useEffect(()=>{if(t==="ai"&&i.turn()==="b"&&!i.isGameOver()){const _=i.fen();setTimeout(()=>{c.current&&(c.current.postMessage(`position fen ${_}`),c.current.postMessage(`go depth ${d}`))},500)}},[i,t,d]);function p(_){s(T=>{const b=new Pa(T.fen());return _(b),b})}function g(_){if(t==="ai"&&i.turn()!=="w"||t==="online"&&i.turn()!==r)return!1;const T=i.moves({square:_,verbose:!0});if(T.length===0)return u({}),!1;const b={};return T.map(R=>(b[R.to]={background:i.get(R.to)&&i.get(R.to).color!==i.turn()?"radial-gradient(circle, rgba(0,0,0,.1) 85%, transparent 85%)":"radial-gradient(circle, rgba(0,0,0,.1) 25%, transparent 25%)",borderRadius:"50%"},R)),b[_]={background:"rgba(255, 255, 0, 0.4)"},u(b),!0}function C(_){if(t==="ai"&&i.turn()!=="w"||t==="online"&&i.turn()!==r)return;if(o===_){a(null),u({});return}if(o){const b={from:o,to:_,promotion:"q"};let R=null;try{R=new Pa(i.fen()).move(b)}catch{}if(R){p(I=>{I.move({from:o,to:_,promotion:"q"})}),t==="online"&&n&&n.send({type:"move",move:{from:o,to:_,promotion:"q"}}),a(null),u({});return}}const T=i.get(_);if(T&&T.color===i.turn()){a(_),g(_);return}a(null),u({})}function P(_,T){if(t==="ai"&&i.turn()!=="w"||t==="online"&&i.turn()!==r)return!1;let b=null;return p(R=>{try{b=R.move({from:_,to:T,promotion:"q"})}catch{}}),b===null?!1:(t==="online"&&n&&n.send({type:"move",move:{from:_,to:T,promotion:"q"}}),u({}),a(null),!0)}const m={backgroundColor:"#8b4513"},h={backgroundColor:"#f4ecd8"};let y="";return t==="local"?y=i.turn()==="w"?"White's Turn":"Black's Turn":t==="ai"?y=i.turn()==="w"?"Your Turn":"Grand Inquisitor is thinking...":t==="online"&&(y=i.turn()===r?"Your Turn":"Opponent's Turn"),v.jsxs("div",{className:"flex flex-col items-center gap-4 w-full max-w-[600px] mx-auto",children:[v.jsxs("div",{className:"w-full bg-dostoevsky-ink/5 p-4 rounded-lg shadow-inner",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2 font-serif",children:[v.jsx("span",{className:"text-xl font-bold",children:y}),i.inCheck()&&v.jsx("span",{className:"text-red-700 font-bold animate-pulse",children:"CHECK!"})]}),v.jsx("div",{className:"border-8 border-double border-dostoevsky-ink/20 rounded shadow-2xl",children:v.jsx(OC,{id:"BasicBoard",position:i.fen(),onPieceDrop:P,onSquareClick:C,customDarkSquareStyle:m,customLightSquareStyle:h,animationDuration:200,arePiecesDraggable:t==="local"||t==="ai"&&i.turn()==="w"||t==="online"&&i.turn()===r,boardOrientation:r==="b"?"black":"white"})})]}),v.jsxs("div",{className:"flex gap-4 w-full",children:[t==="local"&&v.jsx("button",{onClick:()=>{p(_=>_.reset()),u({}),a(null)},className:"flex-1 py-2 border border-dostoevsky-ink hover:bg-dostoevsky-ink hover:text-white transition-colors rounded font-serif",children:"Reset Board"}),v.jsx("button",{onClick:e,className:"flex-1 py-2 border border-red-800 text-red-900 hover:bg-red-800 hover:text-white transition-colors rounded font-serif",children:"Exit to Menu"})]}),t==="ai"&&v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsxs("label",{children:["Difficulty (Depth): ",d]}),v.jsx("input",{type:"range",min:"1",max:"20",value:d,onChange:_=>f(Number(_.target.value)),className:"accent-dostoevsky-ink"})]}),v.jsx("div",{className:"w-full text-sm font-mono p-2 bg-dostoevsky-dark text-dostoevsky-paper rounded opacity-80 h-24 overflow-y-auto",children:i.history().map((_,T)=>v.jsxs("span",{className:"mr-2",children:[T%2===0?T/2+1+".":""," ",_]},T))})]})};class wC{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return PC(e).buffer}}function PC(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function Np(t){return new DC(t).unpack()}function jp(t){const e=new bC,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class DC{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",s,o;for(;r<e;)s=n[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class bC{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=n<<31|r+1023<<20|s/o&1048575,l=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const o=n[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new wC,this._textEncoder=new TextEncoder}}let Ap=!0,$p=!0;function ii(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Vn(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const l=u=>{const c=n(u);c&&(a.handleEvent?a.handleEvent(c):a(c))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),i.apply(this,[o,l])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function RC(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Ap=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function IC(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):($p=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function zp(){if(typeof window=="object"){if(Ap)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Xu(t,e){$p&&console.warn(t+" is deprecated, please use "+e+" instead.")}function LC(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(ii(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(ii(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(ii(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=ii(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Vf(t){return Object.prototype.toString.call(t)==="[object Object]"}function Fp(t){return Vf(t)?Object.keys(t).reduce(function(e,n){const r=Vf(t[n]),i=r?Fp(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function zl(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?zl(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{zl(t,t.get(i),n)})}))}function Kf(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&zl(t,a,i)})}),i}const Qf=zp;function Up(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const c=typeof a[u]=="object"?a[u]:{ideal:a[u]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const d=function(f,p){return f?f+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(c.ideal!==void 0){l.optional=l.optional||[];let f={};typeof c.ideal=="number"?(f[d("min",u)]=c.ideal,l.optional.push(f),f={},f[d("max",u)]=c.ideal,l.optional.push(f)):(f[d("",u)]=c.ideal,l.optional.push(f))}c.exact!==void 0&&typeof c.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",u)]=c.exact):["min","max"].forEach(f=>{c[f]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(f,u)]=c[f])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},i=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const u=function(c,d,f){d in c&&!(f in c)&&(c[f]=c[d],delete c[d])};a=JSON.parse(JSON.stringify(a)),u(a.audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let u=a.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const c=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete a.video.facingMode;let d;if(u.exact==="environment"||u.ideal==="environment"?d=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(g=>g.kind==="videoinput");let p=f.find(g=>d.some(C=>g.label.toLowerCase().includes(C)));return!p&&f.length&&d.includes("back")&&(p=f[f.length-1]),p&&(a.video.deviceId=u.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=r(a.video),Qf("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return Qf("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,u){i(a,c=>{n.webkitGetUserMedia(c,l,d=>{u&&u(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,u=>a(u).then(c=>{if(u.audio&&!c.getAudioTracks().length||u.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(s(c))))}}}function Bp(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Hp(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Vn(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Wp(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){let u=i.apply(this,arguments);return u||(u=e(this,a),this._senders.push(u)),u};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Vp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>Kf(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Vn(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>Kf(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Kp(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(d=>d.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(u=>a.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function Qp(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Kp(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const c=n.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const d=new t.MediaStream(c.getTracks());this._streams[c.id]=d,this._reverseStreams[d.id]=c,c=d}r.apply(this,[c])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},t.RTCPeerConnection.prototype.addTrack=function(c,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(C=>C===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(C=>C.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[d.id];if(g)g.addTrack(c),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const C=new t.MediaStream([c]);this._streams[d.id]=C,this._reverseStreams[C.id]=d,this.addStream(C)}return this.getSenders().find(C=>C.track===c)};function s(u,c){let d=c.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const p=u._reverseStreams[f],g=u._streams[p.id];d=d.replace(new RegExp(g.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:d})}function o(u,c){let d=c.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const p=u._reverseStreams[f],g=u._streams[p.id];d=d.replace(new RegExp(p.id,"g"),g.id)}),new RTCSessionDescription({type:c.type,sdp:d})}["createOffer","createAnswer"].forEach(function(u){const c=t.RTCPeerConnection.prototype[u],d={[u](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[g=>{const C=s(this,g);f[0].apply(null,[C])},g=>{f[1]&&f[1].apply(null,g)},arguments[2]]):c.apply(this,arguments).then(g=>s(this,g))}};t.RTCPeerConnection.prototype[u]=d[u]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=l.get.apply(this);return u.type===""?u:s(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(c._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(C=>c.track===C)&&(f=this._streams[p])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Fl(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function Gp(t,e){Vn(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Gf=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Gp,shimAddTrackRemoveTrack:Qp,shimAddTrackRemoveTrackWithNative:Kp,shimGetSendersWithDtmf:Wp,shimGetUserMedia:Up,shimMediaStream:Bp,shimOnTrack:Hp,shimPeerConnection:Fl,shimSenderReceiverGetStats:Vp},Symbol.toStringTag,{value:"Module"}));function qp(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Xu("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function MC(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Yp(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Ul(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;l.forEach((c,d)=>{l.set(d,Object.assign({},c,{type:n[c.type]||c.type}))})}return l}).then(o,a)}}function Xp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Jp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Vn(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Zp(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Xu("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function eg(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function tg(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function ng(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function rg(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function ig(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const qf=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:tg,shimCreateAnswer:ig,shimCreateOffer:rg,shimGetDisplayMedia:MC,shimGetParameters:ng,shimGetUserMedia:qp,shimOnTrack:Yp,shimPeerConnection:Ul,shimRTCDataChannel:eg,shimReceiverGetStats:Jp,shimRemoveStream:Zp,shimSenderGetStats:Xp},Symbol.toStringTag,{value:"Module"}));function sg(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function og(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function ag(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,c){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return c?(f.then(u,c),Promise.resolve()):f},e.createAnswer=function(u,c){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return c?(f.then(u,c),Promise.resolve()):f};let a=function(l,u,c){const d=i.apply(this,[l]);return c?(d.then(u,c),Promise.resolve()):d};e.setLocalDescription=a,a=function(l,u,c){const d=s.apply(this,[l]);return c?(d.then(u,c),Promise.resolve()):d},e.setRemoteDescription=a,a=function(l,u,c){const d=o.apply(this,[l]);return c?(d.then(u,c),Promise.resolve()):d},e.addIceCandidate=a}function lg(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(ug(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function ug(t){return t&&t.video!==void 0?Object.assign({},t,{video:Fp(t.video)}):t}function cg(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Xu("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function fg(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function dg(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function hg(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Yf=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:hg,shimCallbacksAPI:ag,shimConstraints:ug,shimCreateOfferLegacy:dg,shimGetUserMedia:lg,shimLocalStreamsAPI:sg,shimRTCIceServerUrls:cg,shimRemoteStreamsAPI:og,shimTrackEventTransceiver:fg},Symbol.toStringTag,{value:"Module"}));var pg={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],u=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(u){const c=e.parseRtpMap(u),d=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=d.length?e.parseFmtp(d[0]):{},c.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(c=>c.type===l.type&&c.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),l=a.length>0&&a[0].ssrc;let u;const c=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(g=>parseInt(g,10)));c.length>0&&c[0].length>1&&c[0][0]===l&&(u=c[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&u&&(p.rtx={ssrc:u}),r.push(p),s&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&l&&r.push({ssrc:l});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(pg);var gg=pg.exports;const kr=Zf(gg),NC=Ag({__proto__:null,default:kr},[gg]);function Ds(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=kr.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Vn(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Bl(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Vn(t,"icecandidate",e=>{if(e.candidate){const n=kr.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function bs(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=kr.splitSections(a.sdp);return l.shift(),l.some(u=>{const c=kr.parseMLine(u);return c&&c.kind==="application"&&c.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const u=parseInt(l[1],10);return u!==u?-1:u},i=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(a,l){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const c=kr.matchPrefix(a.sdp,"a=max-message-size:");return c.length>0?u=parseInt(c[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),u=i(l),c=s(arguments[0],l);let d;u===0&&c===0?d=Number.POSITIVE_INFINITY:u===0||c===0?d=Math.max(u,c):d=Math.min(u,c);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Rs(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Vn(t,"datachannel",r=>(e(r.channel,r.target),r))}function Hl(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Wl(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Is(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Ls(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const jC=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Wl,shimAddIceCandidateNullOrEmpty:Is,shimConnectionState:Hl,shimMaxMessageSize:bs,shimParameterlessSetLocalDescription:Ls,shimRTCIceCandidate:Ds,shimRTCIceCandidateRelayProtocol:Bl,shimSendThrowTypeError:Rs},Symbol.toStringTag,{value:"Module"}));function AC({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=zp,r=LC(t),i={browserDetails:r,commonShim:jC,extractVersion:ii,disableLog:RC,disableWarnings:IC,sdp:NC};switch(r.browser){case"chrome":if(!Gf||!Fl||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Gf,Is(t,r),Ls(t),Up(t,r),Bp(t),Fl(t,r),Hp(t),Qp(t,r),Wp(t),Vp(t),Gp(t,r),Ds(t),Bl(t),Hl(t),bs(t,r),Rs(t),Wl(t,r);break;case"firefox":if(!qf||!Ul||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=qf,Is(t,r),Ls(t),qp(t,r),Ul(t,r),Yp(t),Zp(t),Xp(t),Jp(t),eg(t),tg(t),ng(t),rg(t),ig(t),Ds(t),Hl(t),bs(t,r),Rs(t);break;case"safari":if(!Yf||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Yf,Is(t,r),Ls(t),cg(t),dg(t),ag(t),sg(t),og(t),fg(t),lg(t),hg(t),Ds(t),Bl(t),bs(t,r),Rs(t),Wl(t,r);break;default:n("Unsupported browser!");break}return i}const Xf=AC({window:typeof window>"u"?void 0:window});function Kn(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class mg{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),l=e.slice(o,a),u={__peerData:this._dataCount,n:s,data:l,total:i};n.push(u),o=a,s++}return this._dataCount++,n}}}function $C(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const ja=Xf.default||Xf,Jr=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return ja.browserDetails.browser}getVersion(){return ja.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=ja.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},zC=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),vg=()=>Math.random().toString(36).slice(2),Jf={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class FC extends mg{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Jf,this.browser=Jr.getBrowser(),this.browserVersion=Jr.getVersion(),this.pack=jp,this.unpack=Np,this.supports=function(){const n={browser:Jr.isBrowserSupported(),webRTC:Jr.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Jf),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!Jr.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=zC,this.randomToken=vg}}const Ye=new FC,UC="PeerJS: ";class BC{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[UC,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var N=new BC,Ju={},HC=Object.prototype.hasOwnProperty,We="~";function Ai(){}Object.create&&(Ai.prototype=Object.create(null),new Ai().__proto__||(We=!1));function WC(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function yg(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new WC(n,r||t,i),o=We?We+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Ms(t,e){--t._eventsCount===0?t._events=new Ai:delete t._events[e]}function $e(){this._events=new Ai,this._eventsCount=0}$e.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)HC.call(n,r)&&e.push(We?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};$e.prototype.listeners=function(e){var n=We?We+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};$e.prototype.listenerCount=function(e){var n=We?We+e:e,r=this._events[n];return r?r.fn?1:r.length:0};$e.prototype.emit=function(e,n,r,i,s,o){var a=We?We+e:e;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,c,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,r),!0;case 4:return l.fn.call(l.context,n,r,i),!0;case 5:return l.fn.call(l.context,n,r,i,s),!0;case 6:return l.fn.call(l.context,n,r,i,s,o),!0}for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l.fn.apply(l.context,c)}else{var f=l.length,p;for(d=0;d<f;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,n);break;case 3:l[d].fn.call(l[d].context,n,r);break;case 4:l[d].fn.call(l[d].context,n,r,i);break;default:if(!c)for(p=1,c=new Array(u-1);p<u;p++)c[p-1]=arguments[p];l[d].fn.apply(l[d].context,c)}}return!0};$e.prototype.on=function(e,n,r){return yg(this,e,n,r,!1)};$e.prototype.once=function(e,n,r){return yg(this,e,n,r,!0)};$e.prototype.removeListener=function(e,n,r,i){var s=We?We+e:e;if(!this._events[s])return this;if(!n)return Ms(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&Ms(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==n||i&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:Ms(this,s)}return this};$e.prototype.removeAllListeners=function(e){var n;return e?(n=We?We+e:e,this._events[n]&&Ms(this,n)):(this._events=new Ai,this._eventsCount=0),this};$e.prototype.off=$e.prototype.removeListener;$e.prototype.addListener=$e.prototype.on;$e.prefixed=We;$e.EventEmitter=$e;Ju=$e;var Qn={};Kn(Qn,"ConnectionType",()=>vn);Kn(Qn,"PeerErrorType",()=>ge);Kn(Qn,"BaseConnectionErrorType",()=>Vl);Kn(Qn,"DataConnectionErrorType",()=>Zu);Kn(Qn,"SerializationType",()=>Ro);Kn(Qn,"SocketEventType",()=>an);Kn(Qn,"ServerMessageType",()=>Ne);var vn=function(t){return t.Data="data",t.Media="media",t}({}),ge=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),Vl=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),Zu=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),Ro=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),an=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),Ne=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const Cg="1.5.5";class VC extends Ju.EventEmitter{constructor(e,n,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+n+":"+r+i+"peerjs?key="+s}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Cg),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),N.log("Server message received:",s)}catch{N.log("Invalid server message",i.data);return}this.emit(an.Message,s)},this._socket.onclose=i=>{this._disconnected||(N.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(an.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),N.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){N.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ne.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(an.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class Sg{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===vn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){N.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;N.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(N.log(`Received ICE candidates for ${n}:`,o.candidate),s.socket.send({type:Ne.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":N.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Vl.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":N.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Vl.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":N.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},N.log("Listening for data channel"),e.ondatachannel=o=>{N.log("Received data channel");const a=o.channel;s.getConnection(n,r)._initializeDataChannel(a)},N.log("Listening for remote stream"),e.ontrack=o=>{N.log("Received remote stream");const a=o.streams[0],l=s.getConnection(n,r);if(l.type===vn.Media){const u=l;this._addStreamToMediaConnection(a,u)}}}cleanup(){N.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);N.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),N.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===vn.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Ne.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ge.WebRTC,i),N.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(ge.WebRTC,r),N.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();N.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),N.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Ne.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(ge.WebRTC,i),N.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(ge.WebRTC,r),N.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;N.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),N.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError(ge.WebRTC,o),N.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){N.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),N.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ge.WebRTC,n),N.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(N.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return N.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){N.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class _g extends Ju.EventEmitter{emitError(e,n){N.error("Error:",n),this.emit("error",new KC(`${e}`,n))}}class KC extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class kg extends _g{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var Ql;const mi=class mi extends kg{get type(){return vn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||mi.ID_PREFIX+Ye.randomToken(),this._negotiator=new Sg(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{N.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{N.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){N.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case Ne.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Ne.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:N.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){N.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Ql=new WeakMap,Ur(mi,Ql,mi.ID_PREFIX="mc_");let oo=mi;class QC{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${n}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",Cg),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){N.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==Ye.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===Ye.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw N.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var Gl,ql;const Dn=class Dn extends kg{get type(){return vn.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||Dn.ID_PREFIX+vg(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new Sg(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{N.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{N.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{N.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(Zu.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case Ne.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case Ne.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:N.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};Gl=new WeakMap,ql=new WeakMap,Ur(Dn,Gl,Dn.ID_PREFIX="dc_"),Ur(Dn,ql,Dn.MAX_BUFFERED_AMOUNT=8388608);let ao=Dn;class ec extends ao{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>ao.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return N.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class Aa extends ec{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new mg,this.serialization=Ro.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=Np(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=$C(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=jp(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);N.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class GC extends ec{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Ro.None}}class qC extends ec{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=Ye.chunkedMTU){this.emitError(Zu.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Ro.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Yl;const vi=class vi extends _g{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:GC,json:qC,binary:Aa,"binary-utf8":Aa,default:Aa},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:Ye.CLOUD_HOST,port:Ye.CLOUD_PORT,path:"/",key:vi.DEFAULT_KEY,token:Ye.randomToken(),config:Ye.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==Ye.CLOUD_HOST?this._options.secure=Ye.isSecure():this._options.host==Ye.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&N.setLogFunction(this._options.logFunction),N.logLevel=this._options.debug||0,this._api=new QC(n),this._socket=this._createServerConnection(),!Ye.supports.audioVideo&&!Ye.supports.data){this._delayedAbort(ge.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!Ye.validateId(r)){this._delayedAbort(ge.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(ge.ServerError,i))}_createServerConnection(){const e=new VC(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(an.Message,n=>{this._handleMessage(n)}),e.on(an.Error,n=>{this._abort(ge.SocketError,n)}),e.on(an.Disconnected,()=>{this.disconnected||(this.emitError(ge.Network,"Lost connection to server."),this.disconnect())}),e.on(an.Close,()=>{this.disconnected||this._abort(ge.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case Ne.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ne.Error:this._abort(ge.ServerError,r.msg);break;case Ne.IdTaken:this._abort(ge.UnavailableID,`ID "${this.id}" is taken`);break;case Ne.InvalidKey:this._abort(ge.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ne.Leave:N.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Ne.Expire:this.emitError(ge.PeerUnavailable,`Could not connect to peer ${i}`);break;case Ne.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),N.warn(`Offer received for existing Connection ID:${s}`)),r.type===vn.Media){const l=new oo(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=l,this._addConnection(i,o),this.emit("call",l)}else if(r.type===vn.Data){const l=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=l,this._addConnection(i,o),this.emit("connection",l)}else{N.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const l of a)o.handleMessage(l);break}default:{if(!r){N.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):N.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){N.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ge.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){N.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ge.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){N.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new oo(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){N.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){N.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(N.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;N.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)N.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)N.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(ge.ServerError,n))}};Yl=new WeakMap,Ur(vi,Yl,vi.DEFAULT_KEY="peerjs");let Kl=vi;var YC=Kl;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var XC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ZC=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>O.createElement("svg",{ref:c,...XC,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${JC(t)}`,a].join(" "),...u},[...e.map(([d,f])=>O.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eS=ZC("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),tS=({onJoinGame:t,onBack:e})=>{const[n,r]=O.useState(""),[i,s]=O.useState(""),[o,a]=O.useState("Initializing..."),l=O.useRef(null);O.useEffect(()=>{const d=new YC;return l.current=d,d.on("open",f=>{r(f),a("Ready to host or join.")}),d.on("connection",f=>{a("Connecting to opponent..."),f.on("open",()=>{t(f,"w")})}),d.on("error",f=>{a("Error: "+f.type),console.error(f)}),()=>{}},[t]);const u=()=>{if(!i)return;a(`Connecting to ${i}...`);const d=l.current.connect(i);d.on("open",()=>{t(d,"b")}),d.on("error",f=>{a("Connection failed.")})},c=()=>{navigator.clipboard.writeText(n),a("ID copied to clipboard!"),setTimeout(()=>a("Ready to host or join."),2e3)};return v.jsxs("div",{className:"bg-white/50 p-8 rounded shadow-xl backdrop-blur-sm max-w-lg w-full text-center border border-dostoevsky-ink/10",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 font-serif",children:"Online Lobby"}),v.jsxs("div",{className:"mb-8",children:[v.jsx("p",{className:"mb-2 text-sm font-bold uppercase tracking-widest",children:"Your ID"}),v.jsxs("div",{className:"flex items-center justify-center gap-2 bg-dostoevsky-ink/5 p-2 rounded",children:[v.jsx("code",{className:"font-mono text-lg select-all",children:n||"Loading..."}),v.jsx("button",{onClick:c,className:"p-2 hover:bg-dostoevsky-ink/10 rounded transition-colors",children:v.jsx(eS,{size:20})})]}),v.jsx("p",{className:"text-xs mt-2 text-dostoevsky-ink/60",children:"Share this with your friend to host a game."})]}),v.jsx("div",{className:"border-t border-dostoevsky-ink/20 my-6"}),v.jsxs("div",{className:"mb-6",children:[v.jsx("p",{className:"mb-2 text-sm font-bold uppercase tracking-widest",children:"Join a Game"}),v.jsxs("div",{className:"flex flex-col gap-2",children:[v.jsx("input",{type:"text",placeholder:"Enter Friend's ID",value:i,onChange:d=>s(d.target.value),className:"p-3 border border-dostoevsky-ink/30 rounded bg-transparent focus:border-dostoevsky-ink focus:outline-none text-center font-mono"}),v.jsx("button",{onClick:u,disabled:!n||!i,className:"w-full py-3 bg-dostoevsky-ink text-dostoevsky-paper rounded hover:bg-dostoevsky-accent disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-bold uppercase tracking-widest",children:"Join Game"})]})]}),v.jsx("p",{className:"text-sm font-mono mb-4 text-dostoevsky-accent",children:o}),v.jsx("button",{onClick:e,className:"underline text-sm hover:text-dostoevsky-accent",children:"Back to Menu"})]})};function nS(){const[t,e]=O.useState("MENU"),[n,r]=O.useState(null),[i,s]=O.useState("w"),o=(l,u)=>{r(l),s(u),e("ONLINE")},a=()=>v.jsxs("div",{className:"bg-white/50 p-8 rounded shadow-xl backdrop-blur-sm max-w-2xl w-full text-center border border-dostoevsky-ink/10",children:[v.jsx("p",{className:"mb-4 text-lg italic",children:'"The chessboard is the world, the pieces are the phenomena of the universe, the rules of the game are what we call the laws of Nature."'}),v.jsxs("div",{className:"mt-8 space-y-4",children:[v.jsx("button",{onClick:()=>e("LOCAL"),className:"w-full py-3 px-6 bg-dostoevsky-ink text-dostoevsky-paper rounded hover:bg-dostoevsky-accent transition-colors font-bold uppercase tracking-widest shadow-lg",children:"Play vs Friend (Local)"}),v.jsx("button",{onClick:()=>e("ONLINE_LOBBY"),className:"w-full py-3 px-6 bg-transparent border-2 border-dostoevsky-ink text-dostoevsky-ink rounded hover:bg-dostoevsky-ink hover:text-dostoevsky-paper transition-colors font-bold uppercase tracking-widest",children:"Play vs Friend (Online)"}),v.jsx("button",{onClick:()=>e("AI"),className:"w-full py-3 px-6 bg-transparent border-2 border-dostoevsky-ink text-dostoevsky-ink rounded hover:bg-dostoevsky-ink hover:text-dostoevsky-paper transition-colors font-bold uppercase tracking-widest",children:"Challenge The Grand Inquisitor (AI)"})]})]});return v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-dostoevsky-paper text-dostoevsky-ink",children:[v.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-8 italic font-serif tracking-tighter",children:"Dostoevsky Chess"}),t==="MENU"&&a(),t==="LOCAL"&&v.jsx(Na,{gameMode:"local",onExit:()=>e("MENU")}),t==="ONLINE_LOBBY"&&v.jsx(tS,{onJoinGame:o,onBack:()=>e("MENU")}),t==="ONLINE"&&v.jsx(Na,{gameMode:"online",connection:n,myColor:i,onExit:()=>{n&&n.close(),e("MENU")}}),t==="AI"&&v.jsx(Na,{gameMode:"ai",onExit:()=>e("MENU")})]})}$a.createRoot(document.getElementById("root")).render(v.jsx(Zg.StrictMode,{children:v.jsx(nS,{})}));
