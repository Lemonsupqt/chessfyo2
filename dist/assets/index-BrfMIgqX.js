var jg=Object.defineProperty;var Ng=t=>{throw TypeError(t)};var Ag=(t,e,n)=>e in t?jg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ae=(t,e,n)=>Ag(t,typeof e!="symbol"?e+"":e,n);var Hr=(t,e,n)=>e.has(t)?Ng("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);function $g(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function ed(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var td={exports:{}},co={},nd={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fi=Symbol.for("react.element"),zg=Symbol.for("react.portal"),Fg=Symbol.for("react.fragment"),Ug=Symbol.for("react.strict_mode"),Bg=Symbol.for("react.profiler"),Hg=Symbol.for("react.provider"),Vg=Symbol.for("react.context"),Wg=Symbol.for("react.forward_ref"),Kg=Symbol.for("react.suspense"),Qg=Symbol.for("react.memo"),Gg=Symbol.for("react.lazy"),cc=Symbol.iterator;function qg(t){return t===null||typeof t!="object"?null:(t=cc&&t[cc]||t["@@iterator"],typeof t=="function"?t:null)}var rd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},id=Object.assign,sd={};function Ir(t,e,n){this.props=t,this.context=e,this.refs=sd,this.updater=n||rd}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ir.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function od(){}od.prototype=Ir.prototype;function Jl(t,e,n){this.props=t,this.context=e,this.refs=sd,this.updater=n||rd}var Zl=Jl.prototype=new od;Zl.constructor=Jl;id(Zl,Ir.prototype);Zl.isPureReactComponent=!0;var fc=Array.isArray,ad=Object.prototype.hasOwnProperty,eu={current:null},ld={key:!0,ref:!0,__self:!0,__source:!0};function ud(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)ad.call(e,r)&&!ld.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Fi,type:t,key:s,ref:o,props:i,_owner:eu.current}}function Yg(t,e){return{$$typeof:Fi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function tu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fi}function Xg(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var dc=/\/+/g;function Xo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Xg(""+t.key):e.toString(36)}function gs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fi:case zg:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Xo(o,0):r,fc(i)?(n="",t!=null&&(n=t.replace(dc,"$&/")+"/"),gs(i,e,n,"",function(u){return u})):i!=null&&(tu(i)&&(i=Yg(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(dc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",fc(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Xo(s,a);o+=gs(s,e,n,l,i)}else if(l=qg(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Xo(s,a++),o+=gs(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Gi(t,e,n){if(t==null)return t;var r=[],i=0;return gs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function Jg(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ye={current:null},ms={transition:null},Zg={ReactCurrentDispatcher:Ye,ReactCurrentBatchConfig:ms,ReactCurrentOwner:eu};function cd(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Gi,forEach:function(t,e,n){Gi(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Gi(t,function(){e++}),e},toArray:function(t){return Gi(t,function(e){return e})||[]},only:function(t){if(!tu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Q.Component=Ir;Q.Fragment=Fg;Q.Profiler=Bg;Q.PureComponent=Jl;Q.StrictMode=Ug;Q.Suspense=Kg;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zg;Q.act=cd;Q.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=id({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=eu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)ad.call(e,l)&&!ld.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Fi,type:t.type,key:i,ref:s,props:r,_owner:o}};Q.createContext=function(t){return t={$$typeof:Vg,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Hg,_context:t},t.Consumer=t};Q.createElement=ud;Q.createFactory=function(t){var e=ud.bind(null,t);return e.type=t,e};Q.createRef=function(){return{current:null}};Q.forwardRef=function(t){return{$$typeof:Wg,render:t}};Q.isValidElement=tu;Q.lazy=function(t){return{$$typeof:Gg,_payload:{_status:-1,_result:t},_init:Jg}};Q.memo=function(t,e){return{$$typeof:Qg,type:t,compare:e===void 0?null:e}};Q.startTransition=function(t){var e=ms.transition;ms.transition={};try{t()}finally{ms.transition=e}};Q.unstable_act=cd;Q.useCallback=function(t,e){return Ye.current.useCallback(t,e)};Q.useContext=function(t){return Ye.current.useContext(t)};Q.useDebugValue=function(){};Q.useDeferredValue=function(t){return Ye.current.useDeferredValue(t)};Q.useEffect=function(t,e){return Ye.current.useEffect(t,e)};Q.useId=function(){return Ye.current.useId()};Q.useImperativeHandle=function(t,e,n){return Ye.current.useImperativeHandle(t,e,n)};Q.useInsertionEffect=function(t,e){return Ye.current.useInsertionEffect(t,e)};Q.useLayoutEffect=function(t,e){return Ye.current.useLayoutEffect(t,e)};Q.useMemo=function(t,e){return Ye.current.useMemo(t,e)};Q.useReducer=function(t,e,n){return Ye.current.useReducer(t,e,n)};Q.useRef=function(t){return Ye.current.useRef(t)};Q.useState=function(t){return Ye.current.useState(t)};Q.useSyncExternalStore=function(t,e,n){return Ye.current.useSyncExternalStore(t,e,n)};Q.useTransition=function(){return Ye.current.useTransition()};Q.version="18.3.1";nd.exports=Q;var T=nd.exports;const e0=ed(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0=T,n0=Symbol.for("react.element"),r0=Symbol.for("react.fragment"),i0=Object.prototype.hasOwnProperty,s0=t0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o0={key:!0,ref:!0,__self:!0,__source:!0};function fd(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)i0.call(e,r)&&!o0.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:n0,type:t,key:s,ref:o,props:i,_owner:s0.current}}co.Fragment=r0;co.jsx=fd;co.jsxs=fd;td.exports=co;var v=td.exports,za={},dd={exports:{}},ht={},hd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,F){var V=R.length;R.push(F);e:for(;0<V;){var Z=V-1>>>1,N=R[Z];if(0<i(N,F))R[Z]=F,R[V]=N,V=Z;else break e}}function n(R){return R.length===0?null:R[0]}function r(R){if(R.length===0)return null;var F=R[0],V=R.pop();if(V!==F){R[0]=V;e:for(var Z=0,N=R.length,Y=N>>>1;Z<Y;){var ue=2*(Z+1)-1,Re=R[ue],_e=ue+1,B=R[_e];if(0>i(Re,V))_e<N&&0>i(B,Re)?(R[Z]=B,R[_e]=V,Z=_e):(R[Z]=Re,R[ue]=V,Z=ue);else if(_e<N&&0>i(B,V))R[Z]=B,R[_e]=V,Z=_e;else break e}}return F}function i(R,F){var V=R.sortIndex-F.sortIndex;return V!==0?V:R.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,p=!1,g=!1,S=!1,O=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,h=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(R){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=R)r(u),F.sortIndex=F.expirationTime,e(l,F);else break;F=n(u)}}function E(R){if(S=!1,y(R),!g)if(n(l)!==null)g=!0,me(D);else{var F=n(u);F!==null&&Ce(E,F.startTime-R)}}function D(R,F){g=!1,S&&(S=!1,m(L),L=-1),p=!0;var V=f;try{for(y(F),d=n(l);d!==null&&(!(d.expirationTime>F)||R&&!J());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var N=Z(d.expirationTime<=F);F=t.unstable_now(),typeof N=="function"?d.callback=N:d===n(l)&&r(l),y(F)}else r(l);d=n(l)}if(d!==null)var Y=!0;else{var ue=n(u);ue!==null&&Ce(E,ue.startTime-F),Y=!1}return Y}finally{d=null,f=V,p=!1}}var b=!1,I=null,L=-1,G=5,U=-1;function J(){return!(t.unstable_now()-U<G)}function re(){if(I!==null){var R=t.unstable_now();U=R;var F=!0;try{F=I(!0,R)}finally{F?he():(b=!1,I=null)}}else b=!1}var he;if(typeof h=="function")he=function(){h(re)};else if(typeof MessageChannel<"u"){var We=new MessageChannel,be=We.port2;We.port1.onmessage=re,he=function(){be.postMessage(null)}}else he=function(){O(re,0)};function me(R){I=R,b||(b=!0,he())}function Ce(R,F){L=O(function(){R(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,me(D))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var V=f;f=F;try{return R()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,F){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var V=f;f=R;try{return F()}finally{f=V}},t.unstable_scheduleCallback=function(R,F,V){var Z=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?Z+V:Z):V=Z,R){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=V+N,R={id:c++,callback:F,priorityLevel:R,startTime:V,expirationTime:N,sortIndex:-1},V>Z?(R.sortIndex=V,e(u,R),n(l)===null&&R===n(u)&&(S?(m(L),L=-1):S=!0,Ce(E,V-Z))):(R.sortIndex=N,e(l,R),g||p||(g=!0,me(D))),R},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(R){var F=f;return function(){var V=f;f=F;try{return R.apply(this,arguments)}finally{f=V}}}})(pd);hd.exports=pd;var a0=hd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l0=T,dt=a0;function P(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gd=new Set,Ci={};function Hn(t,e){Er(t,e),Er(t+"Capture",e)}function Er(t,e){for(Ci[t]=e,t=0;t<e.length;t++)gd.add(e[t])}var Bt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fa=Object.prototype.hasOwnProperty,u0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hc={},pc={};function c0(t){return Fa.call(pc,t)?!0:Fa.call(hc,t)?!1:u0.test(t)?pc[t]=!0:(hc[t]=!0,!1)}function f0(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function d0(t,e,n,r){if(e===null||typeof e>"u"||f0(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xe(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){je[t]=new Xe(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];je[e]=new Xe(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){je[t]=new Xe(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){je[t]=new Xe(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){je[t]=new Xe(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){je[t]=new Xe(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){je[t]=new Xe(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){je[t]=new Xe(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){je[t]=new Xe(t,5,!1,t.toLowerCase(),null,!1,!1)});var nu=/[\-:]([a-z])/g;function ru(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nu,ru);je[e]=new Xe(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nu,ru);je[e]=new Xe(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nu,ru);je[e]=new Xe(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){je[t]=new Xe(t,1,!1,t.toLowerCase(),null,!1,!1)});je.xlinkHref=new Xe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){je[t]=new Xe(t,1,!1,t.toLowerCase(),null,!0,!0)});function iu(t,e,n,r){var i=je.hasOwnProperty(e)?je[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(d0(e,n,i,r)&&(n=null),r||i===null?c0(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Kt=l0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qi=Symbol.for("react.element"),sr=Symbol.for("react.portal"),or=Symbol.for("react.fragment"),su=Symbol.for("react.strict_mode"),Ua=Symbol.for("react.profiler"),md=Symbol.for("react.provider"),vd=Symbol.for("react.context"),ou=Symbol.for("react.forward_ref"),Ba=Symbol.for("react.suspense"),Ha=Symbol.for("react.suspense_list"),au=Symbol.for("react.memo"),Zt=Symbol.for("react.lazy"),yd=Symbol.for("react.offscreen"),gc=Symbol.iterator;function Vr(t){return t===null||typeof t!="object"?null:(t=gc&&t[gc]||t["@@iterator"],typeof t=="function"?t:null)}var de=Object.assign,Jo;function ti(t){if(Jo===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jo=e&&e[1]||""}return`
`+Jo+t}var Zo=!1;function ea(t,e){if(!t||Zo)return"";Zo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Zo=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ti(t):""}function h0(t){switch(t.tag){case 5:return ti(t.type);case 16:return ti("Lazy");case 13:return ti("Suspense");case 19:return ti("SuspenseList");case 0:case 2:case 15:return t=ea(t.type,!1),t;case 11:return t=ea(t.type.render,!1),t;case 1:return t=ea(t.type,!0),t;default:return""}}function Va(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case or:return"Fragment";case sr:return"Portal";case Ua:return"Profiler";case su:return"StrictMode";case Ba:return"Suspense";case Ha:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vd:return(t.displayName||"Context")+".Consumer";case md:return(t._context.displayName||"Context")+".Provider";case ou:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case au:return e=t.displayName||null,e!==null?e:Va(t.type)||"Memo";case Zt:e=t._payload,t=t._init;try{return Va(t(e))}catch{}}return null}function p0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Va(e);case 8:return e===su?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Sd(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function g0(t){var e=Sd(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yi(t){t._valueTracker||(t._valueTracker=g0(t))}function Cd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Sd(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function As(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wa(t,e){var n=e.checked;return de({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function mc(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=yn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _d(t,e){e=e.checked,e!=null&&iu(t,"checked",e,!1)}function Ka(t,e){_d(t,e);var n=yn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qa(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qa(t,e.type,yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function vc(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qa(t,e,n){(e!=="number"||As(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ni=Array.isArray;function vr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ga(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(P(91));return de({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function yc(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(P(92));if(ni(n)){if(1<n.length)throw Error(P(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:yn(n)}}function kd(t,e){var n=yn(e.value),r=yn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Sc(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qa(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xi,Ed=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xi=Xi||document.createElement("div"),Xi.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xi.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _i(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m0=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(t){m0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ai[e]=ai[t]})});function Td(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ai.hasOwnProperty(t)&&ai[t]?(""+e).trim():e+"px"}function Od(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Td(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var v0=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ya(t,e){if(e){if(v0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(P(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(P(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(P(61))}if(e.style!=null&&typeof e.style!="object")throw Error(P(62))}}function Xa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ja=null;function lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Za=null,yr=null,Sr=null;function Cc(t){if(t=Hi(t)){if(typeof Za!="function")throw Error(P(280));var e=t.stateNode;e&&(e=mo(e),Za(t.stateNode,t.type,e))}}function wd(t){yr?Sr?Sr.push(t):Sr=[t]:yr=t}function Pd(){if(yr){var t=yr,e=Sr;if(Sr=yr=null,Cc(t),e)for(t=0;t<e.length;t++)Cc(e[t])}}function Dd(t,e){return t(e)}function bd(){}var ta=!1;function Rd(t,e,n){if(ta)return t(e,n);ta=!0;try{return Dd(t,e,n)}finally{ta=!1,(yr!==null||Sr!==null)&&(bd(),Pd())}}function ki(t,e){var n=t.stateNode;if(n===null)return null;var r=mo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(P(231,e,typeof n));return n}var el=!1;if(Bt)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){el=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{el=!1}function y0(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var li=!1,$s=null,zs=!1,tl=null,S0={onError:function(t){li=!0,$s=t}};function C0(t,e,n,r,i,s,o,a,l){li=!1,$s=null,y0.apply(S0,arguments)}function _0(t,e,n,r,i,s,o,a,l){if(C0.apply(this,arguments),li){if(li){var u=$s;li=!1,$s=null}else throw Error(P(198));zs||(zs=!0,tl=u)}}function Vn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Id(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _c(t){if(Vn(t)!==t)throw Error(P(188))}function k0(t){var e=t.alternate;if(!e){if(e=Vn(t),e===null)throw Error(P(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return _c(i),t;if(s===r)return _c(i),e;s=s.sibling}throw Error(P(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(P(189))}}if(n.alternate!==r)throw Error(P(190))}if(n.tag!==3)throw Error(P(188));return n.stateNode.current===n?t:e}function Ld(t){return t=k0(t),t!==null?Md(t):null}function Md(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Md(t);if(e!==null)return e;t=t.sibling}return null}var jd=dt.unstable_scheduleCallback,kc=dt.unstable_cancelCallback,x0=dt.unstable_shouldYield,E0=dt.unstable_requestPaint,ge=dt.unstable_now,T0=dt.unstable_getCurrentPriorityLevel,uu=dt.unstable_ImmediatePriority,Nd=dt.unstable_UserBlockingPriority,Fs=dt.unstable_NormalPriority,O0=dt.unstable_LowPriority,Ad=dt.unstable_IdlePriority,fo=null,Mt=null;function w0(t){if(Mt&&typeof Mt.onCommitFiberRoot=="function")try{Mt.onCommitFiberRoot(fo,t,void 0,(t.current.flags&128)===128)}catch{}}var wt=Math.clz32?Math.clz32:b0,P0=Math.log,D0=Math.LN2;function b0(t){return t>>>=0,t===0?32:31-(P0(t)/D0|0)|0}var Ji=64,Zi=4194304;function ri(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Us(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ri(a):(s&=o,s!==0&&(r=ri(s)))}else o=n&~i,o!==0?r=ri(o):s!==0&&(r=ri(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wt(e),i=1<<n,r|=t[n],e&=~i;return r}function R0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function I0(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wt(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=R0(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function nl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $d(){var t=Ji;return Ji<<=1,!(Ji&4194240)&&(Ji=64),t}function na(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ui(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wt(e),t[e]=n}function L0(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wt(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wt(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ne=0;function zd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fd,fu,Ud,Bd,Hd,rl=!1,es=[],ln=null,un=null,cn=null,xi=new Map,Ei=new Map,nn=[],M0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function xc(t,e){switch(t){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ei.delete(e.pointerId)}}function Kr(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Hi(e),e!==null&&fu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function j0(t,e,n,r,i){switch(e){case"focusin":return ln=Kr(ln,t,e,n,r,i),!0;case"dragenter":return un=Kr(un,t,e,n,r,i),!0;case"mouseover":return cn=Kr(cn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xi.set(s,Kr(xi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ei.set(s,Kr(Ei.get(s)||null,t,e,n,r,i)),!0}return!1}function Vd(t){var e=Rn(t.target);if(e!==null){var n=Vn(e);if(n!==null){if(e=n.tag,e===13){if(e=Id(n),e!==null){t.blockedOn=e,Hd(t.priority,function(){Ud(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vs(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=il(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ja=r,n.target.dispatchEvent(r),Ja=null}else return e=Hi(n),e!==null&&fu(e),t.blockedOn=n,!1;e.shift()}return!0}function Ec(t,e,n){vs(t)&&n.delete(e)}function N0(){rl=!1,ln!==null&&vs(ln)&&(ln=null),un!==null&&vs(un)&&(un=null),cn!==null&&vs(cn)&&(cn=null),xi.forEach(Ec),Ei.forEach(Ec)}function Qr(t,e){t.blockedOn===e&&(t.blockedOn=null,rl||(rl=!0,dt.unstable_scheduleCallback(dt.unstable_NormalPriority,N0)))}function Ti(t){function e(i){return Qr(i,t)}if(0<es.length){Qr(es[0],t);for(var n=1;n<es.length;n++){var r=es[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ln!==null&&Qr(ln,t),un!==null&&Qr(un,t),cn!==null&&Qr(cn,t),xi.forEach(e),Ei.forEach(e),n=0;n<nn.length;n++)r=nn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<nn.length&&(n=nn[0],n.blockedOn===null);)Vd(n),n.blockedOn===null&&nn.shift()}var Cr=Kt.ReactCurrentBatchConfig,Bs=!0;function A0(t,e,n,r){var i=ne,s=Cr.transition;Cr.transition=null;try{ne=1,du(t,e,n,r)}finally{ne=i,Cr.transition=s}}function $0(t,e,n,r){var i=ne,s=Cr.transition;Cr.transition=null;try{ne=4,du(t,e,n,r)}finally{ne=i,Cr.transition=s}}function du(t,e,n,r){if(Bs){var i=il(t,e,n,r);if(i===null)da(t,e,r,Hs,n),xc(t,r);else if(j0(i,t,e,n,r))r.stopPropagation();else if(xc(t,r),e&4&&-1<M0.indexOf(t)){for(;i!==null;){var s=Hi(i);if(s!==null&&Fd(s),s=il(t,e,n,r),s===null&&da(t,e,r,Hs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else da(t,e,r,null,n)}}var Hs=null;function il(t,e,n,r){if(Hs=null,t=lu(r),t=Rn(t),t!==null)if(e=Vn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Id(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Hs=t,null}function Wd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T0()){case uu:return 1;case Nd:return 4;case Fs:case O0:return 16;case Ad:return 536870912;default:return 16}default:return 16}}var sn=null,hu=null,ys=null;function Kd(){if(ys)return ys;var t,e=hu,n=e.length,r,i="value"in sn?sn.value:sn.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ys=i.slice(t,1<r?1-r:void 0)}function Ss(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ts(){return!0}function Tc(){return!1}function pt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ts:Tc,this.isPropagationStopped=Tc,this}return de(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),e}var Lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pu=pt(Lr),Bi=de({},Lr,{view:0,detail:0}),z0=pt(Bi),ra,ia,Gr,ho=de({},Bi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gr&&(Gr&&t.type==="mousemove"?(ra=t.screenX-Gr.screenX,ia=t.screenY-Gr.screenY):ia=ra=0,Gr=t),ra)},movementY:function(t){return"movementY"in t?t.movementY:ia}}),Oc=pt(ho),F0=de({},ho,{dataTransfer:0}),U0=pt(F0),B0=de({},Bi,{relatedTarget:0}),sa=pt(B0),H0=de({},Lr,{animationName:0,elapsedTime:0,pseudoElement:0}),V0=pt(H0),W0=de({},Lr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),K0=pt(W0),Q0=de({},Lr,{data:0}),wc=pt(Q0),G0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},q0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function X0(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Y0[t])?!!e[t]:!1}function gu(){return X0}var J0=de({},Bi,{key:function(t){if(t.key){var e=G0[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?q0[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(t){return t.type==="keypress"?Ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Z0=pt(J0),em=de({},ho,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pc=pt(em),tm=de({},Bi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),nm=pt(tm),rm=de({},Lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),im=pt(rm),sm=de({},ho,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),om=pt(sm),am=[9,13,27,32],mu=Bt&&"CompositionEvent"in window,ui=null;Bt&&"documentMode"in document&&(ui=document.documentMode);var lm=Bt&&"TextEvent"in window&&!ui,Qd=Bt&&(!mu||ui&&8<ui&&11>=ui),Dc=" ",bc=!1;function Gd(t,e){switch(t){case"keyup":return am.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ar=!1;function um(t,e){switch(t){case"compositionend":return qd(e);case"keypress":return e.which!==32?null:(bc=!0,Dc);case"textInput":return t=e.data,t===Dc&&bc?null:t;default:return null}}function cm(t,e){if(ar)return t==="compositionend"||!mu&&Gd(t,e)?(t=Kd(),ys=hu=sn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qd&&e.locale!=="ko"?null:e.data;default:return null}}var fm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fm[t.type]:e==="textarea"}function Yd(t,e,n,r){wd(r),e=Vs(e,"onChange"),0<e.length&&(n=new pu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ci=null,Oi=null;function dm(t){ah(t,0)}function po(t){var e=cr(t);if(Cd(e))return t}function hm(t,e){if(t==="change")return e}var Xd=!1;if(Bt){var oa;if(Bt){var aa="oninput"in document;if(!aa){var Ic=document.createElement("div");Ic.setAttribute("oninput","return;"),aa=typeof Ic.oninput=="function"}oa=aa}else oa=!1;Xd=oa&&(!document.documentMode||9<document.documentMode)}function Lc(){ci&&(ci.detachEvent("onpropertychange",Jd),Oi=ci=null)}function Jd(t){if(t.propertyName==="value"&&po(Oi)){var e=[];Yd(e,Oi,t,lu(t)),Rd(dm,e)}}function pm(t,e,n){t==="focusin"?(Lc(),ci=e,Oi=n,ci.attachEvent("onpropertychange",Jd)):t==="focusout"&&Lc()}function gm(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return po(Oi)}function mm(t,e){if(t==="click")return po(e)}function vm(t,e){if(t==="input"||t==="change")return po(e)}function ym(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Dt=typeof Object.is=="function"?Object.is:ym;function wi(t,e){if(Dt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fa.call(e,i)||!Dt(t[i],e[i]))return!1}return!0}function Mc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jc(t,e){var n=Mc(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mc(n)}}function Zd(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zd(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function eh(){for(var t=window,e=As();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=As(t.document)}return e}function vu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Sm(t){var e=eh(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zd(n.ownerDocument.documentElement,n)){if(r!==null&&vu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=jc(n,s);var o=jc(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Cm=Bt&&"documentMode"in document&&11>=document.documentMode,lr=null,sl=null,fi=null,ol=!1;function Nc(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ol||lr==null||lr!==As(r)||(r=lr,"selectionStart"in r&&vu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fi&&wi(fi,r)||(fi=r,r=Vs(sl,"onSelect"),0<r.length&&(e=new pu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=lr)))}function ns(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ur={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionend:ns("Transition","TransitionEnd")},la={},th={};Bt&&(th=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function go(t){if(la[t])return la[t];if(!ur[t])return t;var e=ur[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in th)return la[t]=e[n];return t}var nh=go("animationend"),rh=go("animationiteration"),ih=go("animationstart"),sh=go("transitionend"),oh=new Map,Ac="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cn(t,e){oh.set(t,e),Hn(e,[t])}for(var ua=0;ua<Ac.length;ua++){var ca=Ac[ua],_m=ca.toLowerCase(),km=ca[0].toUpperCase()+ca.slice(1);Cn(_m,"on"+km)}Cn(nh,"onAnimationEnd");Cn(rh,"onAnimationIteration");Cn(ih,"onAnimationStart");Cn("dblclick","onDoubleClick");Cn("focusin","onFocus");Cn("focusout","onBlur");Cn(sh,"onTransitionEnd");Er("onMouseEnter",["mouseout","mouseover"]);Er("onMouseLeave",["mouseout","mouseover"]);Er("onPointerEnter",["pointerout","pointerover"]);Er("onPointerLeave",["pointerout","pointerover"]);Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii));function $c(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_0(r,e,void 0,t),t.currentTarget=null}function ah(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;$c(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;$c(i,a,u),s=l}}}if(zs)throw t=tl,zs=!1,tl=null,t}function se(t,e){var n=e[fl];n===void 0&&(n=e[fl]=new Set);var r=t+"__bubble";n.has(r)||(lh(e,t,2,!1),n.add(r))}function fa(t,e,n){var r=0;e&&(r|=4),lh(n,t,r,e)}var rs="_reactListening"+Math.random().toString(36).slice(2);function Pi(t){if(!t[rs]){t[rs]=!0,gd.forEach(function(n){n!=="selectionchange"&&(xm.has(n)||fa(n,!1,t),fa(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[rs]||(e[rs]=!0,fa("selectionchange",!1,e))}}function lh(t,e,n,r){switch(Wd(e)){case 1:var i=A0;break;case 4:i=$0;break;default:i=du}n=i.bind(null,e,n,t),i=void 0,!el||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function da(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Rn(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Rd(function(){var u=s,c=lu(n),d=[];e:{var f=oh.get(t);if(f!==void 0){var p=pu,g=t;switch(t){case"keypress":if(Ss(n)===0)break e;case"keydown":case"keyup":p=Z0;break;case"focusin":g="focus",p=sa;break;case"focusout":g="blur",p=sa;break;case"beforeblur":case"afterblur":p=sa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=U0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=nm;break;case nh:case rh:case ih:p=V0;break;case sh:p=im;break;case"scroll":p=z0;break;case"wheel":p=om;break;case"copy":case"cut":case"paste":p=K0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Pc}var S=(e&4)!==0,O=!S&&t==="scroll",m=S?f!==null?f+"Capture":null:f;S=[];for(var h=u,y;h!==null;){y=h;var E=y.stateNode;if(y.tag===5&&E!==null&&(y=E,m!==null&&(E=ki(h,m),E!=null&&S.push(Di(h,E,y)))),O)break;h=h.return}0<S.length&&(f=new p(f,g,null,n,c),d.push({event:f,listeners:S}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==Ja&&(g=n.relatedTarget||n.fromElement)&&(Rn(g)||g[Ht]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(g=n.relatedTarget||n.toElement,p=u,g=g?Rn(g):null,g!==null&&(O=Vn(g),g!==O||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(S=Oc,E="onMouseLeave",m="onMouseEnter",h="mouse",(t==="pointerout"||t==="pointerover")&&(S=Pc,E="onPointerLeave",m="onPointerEnter",h="pointer"),O=p==null?f:cr(p),y=g==null?f:cr(g),f=new S(E,h+"leave",p,n,c),f.target=O,f.relatedTarget=y,E=null,Rn(c)===u&&(S=new S(m,h+"enter",g,n,c),S.target=y,S.relatedTarget=O,E=S),O=E,p&&g)t:{for(S=p,m=g,h=0,y=S;y;y=rr(y))h++;for(y=0,E=m;E;E=rr(E))y++;for(;0<h-y;)S=rr(S),h--;for(;0<y-h;)m=rr(m),y--;for(;h--;){if(S===m||m!==null&&S===m.alternate)break t;S=rr(S),m=rr(m)}S=null}else S=null;p!==null&&zc(d,f,p,S,!1),g!==null&&O!==null&&zc(d,O,g,S,!0)}}e:{if(f=u?cr(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var D=hm;else if(Rc(f))if(Xd)D=vm;else{D=gm;var b=pm}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(D=mm);if(D&&(D=D(t,u))){Yd(d,D,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Qa(f,"number",f.value)}switch(b=u?cr(u):window,t){case"focusin":(Rc(b)||b.contentEditable==="true")&&(lr=b,sl=u,fi=null);break;case"focusout":fi=sl=lr=null;break;case"mousedown":ol=!0;break;case"contextmenu":case"mouseup":case"dragend":ol=!1,Nc(d,n,c);break;case"selectionchange":if(Cm)break;case"keydown":case"keyup":Nc(d,n,c)}var I;if(mu)e:{switch(t){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else ar?Gd(t,n)&&(L="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(Qd&&n.locale!=="ko"&&(ar||L!=="onCompositionStart"?L==="onCompositionEnd"&&ar&&(I=Kd()):(sn=c,hu="value"in sn?sn.value:sn.textContent,ar=!0)),b=Vs(u,L),0<b.length&&(L=new wc(L,t,null,n,c),d.push({event:L,listeners:b}),I?L.data=I:(I=qd(n),I!==null&&(L.data=I)))),(I=lm?um(t,n):cm(t,n))&&(u=Vs(u,"onBeforeInput"),0<u.length&&(c=new wc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=I))}ah(d,e)})}function Di(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ki(t,n),s!=null&&r.unshift(Di(t,s,i)),s=ki(t,e),s!=null&&r.push(Di(t,s,i))),t=t.return}return r}function rr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zc(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=ki(n,s),l!=null&&o.unshift(Di(n,l,a))):i||(l=ki(n,s),l!=null&&o.push(Di(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Em=/\r\n?/g,Tm=/\u0000|\uFFFD/g;function Fc(t){return(typeof t=="string"?t:""+t).replace(Em,`
`).replace(Tm,"")}function is(t,e,n){if(e=Fc(e),Fc(t)!==e&&n)throw Error(P(425))}function Ws(){}var al=null,ll=null;function ul(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cl=typeof setTimeout=="function"?setTimeout:void 0,Om=typeof clearTimeout=="function"?clearTimeout:void 0,Uc=typeof Promise=="function"?Promise:void 0,wm=typeof queueMicrotask=="function"?queueMicrotask:typeof Uc<"u"?function(t){return Uc.resolve(null).then(t).catch(Pm)}:cl;function Pm(t){setTimeout(function(){throw t})}function ha(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ti(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ti(e)}function fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Bc(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mr=Math.random().toString(36).slice(2),Lt="__reactFiber$"+Mr,bi="__reactProps$"+Mr,Ht="__reactContainer$"+Mr,fl="__reactEvents$"+Mr,Dm="__reactListeners$"+Mr,bm="__reactHandles$"+Mr;function Rn(t){var e=t[Lt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ht]||n[Lt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Bc(t);t!==null;){if(n=t[Lt])return n;t=Bc(t)}return e}t=n,n=t.parentNode}return null}function Hi(t){return t=t[Lt]||t[Ht],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(P(33))}function mo(t){return t[bi]||null}var dl=[],fr=-1;function _n(t){return{current:t}}function oe(t){0>fr||(t.current=dl[fr],dl[fr]=null,fr--)}function ie(t,e){fr++,dl[fr]=t.current,t.current=e}var Sn={},He=_n(Sn),rt=_n(!1),An=Sn;function Tr(t,e){var n=t.type.contextTypes;if(!n)return Sn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function it(t){return t=t.childContextTypes,t!=null}function Ks(){oe(rt),oe(He)}function Hc(t,e,n){if(He.current!==Sn)throw Error(P(168));ie(He,e),ie(rt,n)}function uh(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(P(108,p0(t)||"Unknown",i));return de({},n,r)}function Qs(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Sn,An=He.current,ie(He,t),ie(rt,rt.current),!0}function Vc(t,e,n){var r=t.stateNode;if(!r)throw Error(P(169));n?(t=uh(t,e,An),r.__reactInternalMemoizedMergedChildContext=t,oe(rt),oe(He),ie(He,t)):oe(rt),ie(rt,n)}var $t=null,vo=!1,pa=!1;function ch(t){$t===null?$t=[t]:$t.push(t)}function Rm(t){vo=!0,ch(t)}function kn(){if(!pa&&$t!==null){pa=!0;var t=0,e=ne;try{var n=$t;for(ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$t=null,vo=!1}catch(i){throw $t!==null&&($t=$t.slice(t+1)),jd(uu,kn),i}finally{ne=e,pa=!1}}return null}var dr=[],hr=0,Gs=null,qs=0,mt=[],vt=0,$n=null,zt=1,Ft="";function Pn(t,e){dr[hr++]=qs,dr[hr++]=Gs,Gs=t,qs=e}function fh(t,e,n){mt[vt++]=zt,mt[vt++]=Ft,mt[vt++]=$n,$n=t;var r=zt;t=Ft;var i=32-wt(r)-1;r&=~(1<<i),n+=1;var s=32-wt(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,zt=1<<32-wt(e)+i|n<<i|r,Ft=s+t}else zt=1<<s|n<<i|r,Ft=t}function yu(t){t.return!==null&&(Pn(t,1),fh(t,1,0))}function Su(t){for(;t===Gs;)Gs=dr[--hr],dr[hr]=null,qs=dr[--hr],dr[hr]=null;for(;t===$n;)$n=mt[--vt],mt[vt]=null,Ft=mt[--vt],mt[vt]=null,zt=mt[--vt],mt[vt]=null}var ft=null,ct=null,le=!1,Ot=null;function dh(t,e){var n=St(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Wc(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ft=t,ct=fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ft=t,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$n!==null?{id:zt,overflow:Ft}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=St(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,ft=t,ct=null,!0):!1;default:return!1}}function hl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pl(t){if(le){var e=ct;if(e){var n=e;if(!Wc(t,e)){if(hl(t))throw Error(P(418));e=fn(n.nextSibling);var r=ft;e&&Wc(t,e)?dh(r,n):(t.flags=t.flags&-4097|2,le=!1,ft=t)}}else{if(hl(t))throw Error(P(418));t.flags=t.flags&-4097|2,le=!1,ft=t}}}function Kc(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ft=t}function ss(t){if(t!==ft)return!1;if(!le)return Kc(t),le=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ul(t.type,t.memoizedProps)),e&&(e=ct)){if(hl(t))throw hh(),Error(P(418));for(;e;)dh(t,e),e=fn(e.nextSibling)}if(Kc(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(P(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ct=fn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ct=null}}else ct=ft?fn(t.stateNode.nextSibling):null;return!0}function hh(){for(var t=ct;t;)t=fn(t.nextSibling)}function Or(){ct=ft=null,le=!1}function Cu(t){Ot===null?Ot=[t]:Ot.push(t)}var Im=Kt.ReactCurrentBatchConfig;function qr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(P(309));var r=n.stateNode}if(!r)throw Error(P(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(P(284));if(!n._owner)throw Error(P(290,t))}return t}function os(t,e){throw t=Object.prototype.toString.call(e),Error(P(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Qc(t){var e=t._init;return e(t._payload)}function ph(t){function e(m,h){if(t){var y=m.deletions;y===null?(m.deletions=[h],m.flags|=16):y.push(h)}}function n(m,h){if(!t)return null;for(;h!==null;)e(m,h),h=h.sibling;return null}function r(m,h){for(m=new Map;h!==null;)h.key!==null?m.set(h.key,h):m.set(h.index,h),h=h.sibling;return m}function i(m,h){return m=gn(m,h),m.index=0,m.sibling=null,m}function s(m,h,y){return m.index=y,t?(y=m.alternate,y!==null?(y=y.index,y<h?(m.flags|=2,h):y):(m.flags|=2,h)):(m.flags|=1048576,h)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,h,y,E){return h===null||h.tag!==6?(h=_a(y,m.mode,E),h.return=m,h):(h=i(h,y),h.return=m,h)}function l(m,h,y,E){var D=y.type;return D===or?c(m,h,y.props.children,E,y.key):h!==null&&(h.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zt&&Qc(D)===h.type)?(E=i(h,y.props),E.ref=qr(m,h,y),E.return=m,E):(E=Os(y.type,y.key,y.props,null,m.mode,E),E.ref=qr(m,h,y),E.return=m,E)}function u(m,h,y,E){return h===null||h.tag!==4||h.stateNode.containerInfo!==y.containerInfo||h.stateNode.implementation!==y.implementation?(h=ka(y,m.mode,E),h.return=m,h):(h=i(h,y.children||[]),h.return=m,h)}function c(m,h,y,E,D){return h===null||h.tag!==7?(h=jn(y,m.mode,E,D),h.return=m,h):(h=i(h,y),h.return=m,h)}function d(m,h,y){if(typeof h=="string"&&h!==""||typeof h=="number")return h=_a(""+h,m.mode,y),h.return=m,h;if(typeof h=="object"&&h!==null){switch(h.$$typeof){case qi:return y=Os(h.type,h.key,h.props,null,m.mode,y),y.ref=qr(m,null,h),y.return=m,y;case sr:return h=ka(h,m.mode,y),h.return=m,h;case Zt:var E=h._init;return d(m,E(h._payload),y)}if(ni(h)||Vr(h))return h=jn(h,m.mode,y,null),h.return=m,h;os(m,h)}return null}function f(m,h,y,E){var D=h!==null?h.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return D!==null?null:a(m,h,""+y,E);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case qi:return y.key===D?l(m,h,y,E):null;case sr:return y.key===D?u(m,h,y,E):null;case Zt:return D=y._init,f(m,h,D(y._payload),E)}if(ni(y)||Vr(y))return D!==null?null:c(m,h,y,E,null);os(m,y)}return null}function p(m,h,y,E,D){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(y)||null,a(h,m,""+E,D);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case qi:return m=m.get(E.key===null?y:E.key)||null,l(h,m,E,D);case sr:return m=m.get(E.key===null?y:E.key)||null,u(h,m,E,D);case Zt:var b=E._init;return p(m,h,y,b(E._payload),D)}if(ni(E)||Vr(E))return m=m.get(y)||null,c(h,m,E,D,null);os(h,E)}return null}function g(m,h,y,E){for(var D=null,b=null,I=h,L=h=0,G=null;I!==null&&L<y.length;L++){I.index>L?(G=I,I=null):G=I.sibling;var U=f(m,I,y[L],E);if(U===null){I===null&&(I=G);break}t&&I&&U.alternate===null&&e(m,I),h=s(U,h,L),b===null?D=U:b.sibling=U,b=U,I=G}if(L===y.length)return n(m,I),le&&Pn(m,L),D;if(I===null){for(;L<y.length;L++)I=d(m,y[L],E),I!==null&&(h=s(I,h,L),b===null?D=I:b.sibling=I,b=I);return le&&Pn(m,L),D}for(I=r(m,I);L<y.length;L++)G=p(I,m,L,y[L],E),G!==null&&(t&&G.alternate!==null&&I.delete(G.key===null?L:G.key),h=s(G,h,L),b===null?D=G:b.sibling=G,b=G);return t&&I.forEach(function(J){return e(m,J)}),le&&Pn(m,L),D}function S(m,h,y,E){var D=Vr(y);if(typeof D!="function")throw Error(P(150));if(y=D.call(y),y==null)throw Error(P(151));for(var b=D=null,I=h,L=h=0,G=null,U=y.next();I!==null&&!U.done;L++,U=y.next()){I.index>L?(G=I,I=null):G=I.sibling;var J=f(m,I,U.value,E);if(J===null){I===null&&(I=G);break}t&&I&&J.alternate===null&&e(m,I),h=s(J,h,L),b===null?D=J:b.sibling=J,b=J,I=G}if(U.done)return n(m,I),le&&Pn(m,L),D;if(I===null){for(;!U.done;L++,U=y.next())U=d(m,U.value,E),U!==null&&(h=s(U,h,L),b===null?D=U:b.sibling=U,b=U);return le&&Pn(m,L),D}for(I=r(m,I);!U.done;L++,U=y.next())U=p(I,m,L,U.value,E),U!==null&&(t&&U.alternate!==null&&I.delete(U.key===null?L:U.key),h=s(U,h,L),b===null?D=U:b.sibling=U,b=U);return t&&I.forEach(function(re){return e(m,re)}),le&&Pn(m,L),D}function O(m,h,y,E){if(typeof y=="object"&&y!==null&&y.type===or&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case qi:e:{for(var D=y.key,b=h;b!==null;){if(b.key===D){if(D=y.type,D===or){if(b.tag===7){n(m,b.sibling),h=i(b,y.props.children),h.return=m,m=h;break e}}else if(b.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Zt&&Qc(D)===b.type){n(m,b.sibling),h=i(b,y.props),h.ref=qr(m,b,y),h.return=m,m=h;break e}n(m,b);break}else e(m,b);b=b.sibling}y.type===or?(h=jn(y.props.children,m.mode,E,y.key),h.return=m,m=h):(E=Os(y.type,y.key,y.props,null,m.mode,E),E.ref=qr(m,h,y),E.return=m,m=E)}return o(m);case sr:e:{for(b=y.key;h!==null;){if(h.key===b)if(h.tag===4&&h.stateNode.containerInfo===y.containerInfo&&h.stateNode.implementation===y.implementation){n(m,h.sibling),h=i(h,y.children||[]),h.return=m,m=h;break e}else{n(m,h);break}else e(m,h);h=h.sibling}h=ka(y,m.mode,E),h.return=m,m=h}return o(m);case Zt:return b=y._init,O(m,h,b(y._payload),E)}if(ni(y))return g(m,h,y,E);if(Vr(y))return S(m,h,y,E);os(m,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,h!==null&&h.tag===6?(n(m,h.sibling),h=i(h,y),h.return=m,m=h):(n(m,h),h=_a(y,m.mode,E),h.return=m,m=h),o(m)):n(m,h)}return O}var wr=ph(!0),gh=ph(!1),Ys=_n(null),Xs=null,pr=null,_u=null;function ku(){_u=pr=Xs=null}function xu(t){var e=Ys.current;oe(Ys),t._currentValue=e}function gl(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _r(t,e){Xs=t,_u=pr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(nt=!0),t.firstContext=null)}function _t(t){var e=t._currentValue;if(_u!==t)if(t={context:t,memoizedValue:e,next:null},pr===null){if(Xs===null)throw Error(P(308));pr=t,Xs.dependencies={lanes:0,firstContext:t}}else pr=pr.next=t;return e}var In=null;function Eu(t){In===null?In=[t]:In.push(t)}function mh(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Eu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Vt(t,r)}function Vt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var en=!1;function Tu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ut(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,X&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Vt(t,n)}return i=r.interleaved,i===null?(e.next=e,Eu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Vt(t,n)}function Cs(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cu(t,n)}}function Gc(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Js(t,e,n,r){var i=t.updateQueue;en=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,S=a;switch(f=e,p=n,S.tag){case 1:if(g=S.payload,typeof g=="function"){d=g.call(p,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=S.payload,f=typeof g=="function"?g.call(p,d,f):g,f==null)break e;d=de({},d,f);break e;case 2:en=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=d):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Fn|=o,t.lanes=o,t.memoizedState=d}}function qc(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(P(191,i));i.call(r)}}}var Vi={},jt=_n(Vi),Ri=_n(Vi),Ii=_n(Vi);function Ln(t){if(t===Vi)throw Error(P(174));return t}function Ou(t,e){switch(ie(Ii,e),ie(Ri,t),ie(jt,Vi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qa(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qa(e,t)}oe(jt),ie(jt,e)}function Pr(){oe(jt),oe(Ri),oe(Ii)}function yh(t){Ln(Ii.current);var e=Ln(jt.current),n=qa(e,t.type);e!==n&&(ie(Ri,t),ie(jt,n))}function wu(t){Ri.current===t&&(oe(jt),oe(Ri))}var ce=_n(0);function Zs(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ga=[];function Pu(){for(var t=0;t<ga.length;t++)ga[t]._workInProgressVersionPrimary=null;ga.length=0}var _s=Kt.ReactCurrentDispatcher,ma=Kt.ReactCurrentBatchConfig,zn=0,fe=null,Ee=null,Pe=null,eo=!1,di=!1,Li=0,Lm=0;function $e(){throw Error(P(321))}function Du(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Dt(t[n],e[n]))return!1;return!0}function bu(t,e,n,r,i,s){if(zn=s,fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_s.current=t===null||t.memoizedState===null?Am:$m,t=n(r,i),di){s=0;do{if(di=!1,Li=0,25<=s)throw Error(P(301));s+=1,Pe=Ee=null,e.updateQueue=null,_s.current=zm,t=n(r,i)}while(di)}if(_s.current=to,e=Ee!==null&&Ee.next!==null,zn=0,Pe=Ee=fe=null,eo=!1,e)throw Error(P(300));return t}function Ru(){var t=Li!==0;return Li=0,t}function It(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?fe.memoizedState=Pe=t:Pe=Pe.next=t,Pe}function kt(){if(Ee===null){var t=fe.alternate;t=t!==null?t.memoizedState:null}else t=Ee.next;var e=Pe===null?fe.memoizedState:Pe.next;if(e!==null)Pe=e,Ee=t;else{if(t===null)throw Error(P(310));Ee=t,t={memoizedState:Ee.memoizedState,baseState:Ee.baseState,baseQueue:Ee.baseQueue,queue:Ee.queue,next:null},Pe===null?fe.memoizedState=Pe=t:Pe=Pe.next=t}return Pe}function Mi(t,e){return typeof e=="function"?e(t):e}function va(t){var e=kt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=Ee,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((zn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,fe.lanes|=c,Fn|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,Dt(r,e.memoizedState)||(nt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,fe.lanes|=s,Fn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ya(t){var e=kt(),n=e.queue;if(n===null)throw Error(P(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Dt(s,e.memoizedState)||(nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Sh(){}function Ch(t,e){var n=fe,r=kt(),i=e(),s=!Dt(r.memoizedState,i);if(s&&(r.memoizedState=i,nt=!0),r=r.queue,Iu(xh.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,ji(9,kh.bind(null,n,r,i,e),void 0,null),De===null)throw Error(P(349));zn&30||_h(n,e,i)}return i}function _h(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function kh(t,e,n,r){e.value=n,e.getSnapshot=r,Eh(e)&&Th(t)}function xh(t,e,n){return n(function(){Eh(e)&&Th(t)})}function Eh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Dt(t,n)}catch{return!0}}function Th(t){var e=Vt(t,1);e!==null&&Pt(e,t,1,-1)}function Yc(t){var e=It();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mi,lastRenderedState:t},e.queue=t,t=t.dispatch=Nm.bind(null,fe,t),[e.memoizedState,t]}function ji(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=fe.updateQueue,e===null?(e={lastEffect:null,stores:null},fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Oh(){return kt().memoizedState}function ks(t,e,n,r){var i=It();fe.flags|=t,i.memoizedState=ji(1|e,n,void 0,r===void 0?null:r)}function yo(t,e,n,r){var i=kt();r=r===void 0?null:r;var s=void 0;if(Ee!==null){var o=Ee.memoizedState;if(s=o.destroy,r!==null&&Du(r,o.deps)){i.memoizedState=ji(e,n,s,r);return}}fe.flags|=t,i.memoizedState=ji(1|e,n,s,r)}function Xc(t,e){return ks(8390656,8,t,e)}function Iu(t,e){return yo(2048,8,t,e)}function wh(t,e){return yo(4,2,t,e)}function Ph(t,e){return yo(4,4,t,e)}function Dh(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bh(t,e,n){return n=n!=null?n.concat([t]):null,yo(4,4,Dh.bind(null,e,t),n)}function Lu(){}function Rh(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Du(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ih(t,e){var n=kt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Du(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Lh(t,e,n){return zn&21?(Dt(n,e)||(n=$d(),fe.lanes|=n,Fn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,nt=!0),t.memoizedState=n)}function Mm(t,e){var n=ne;ne=n!==0&&4>n?n:4,t(!0);var r=ma.transition;ma.transition={};try{t(!1),e()}finally{ne=n,ma.transition=r}}function Mh(){return kt().memoizedState}function jm(t,e,n){var r=pn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jh(t))Nh(e,n);else if(n=mh(t,e,n,r),n!==null){var i=Ge();Pt(n,t,r,i),Ah(n,e,r)}}function Nm(t,e,n){var r=pn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jh(t))Nh(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Dt(a,o)){var l=e.interleaved;l===null?(i.next=i,Eu(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=mh(t,e,i,r),n!==null&&(i=Ge(),Pt(n,t,r,i),Ah(n,e,r))}}function jh(t){var e=t.alternate;return t===fe||e!==null&&e===fe}function Nh(t,e){di=eo=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ah(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cu(t,n)}}var to={readContext:_t,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},Am={readContext:_t,useCallback:function(t,e){return It().memoizedState=[t,e===void 0?null:e],t},useContext:_t,useEffect:Xc,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ks(4194308,4,Dh.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ks(4194308,4,t,e)},useInsertionEffect:function(t,e){return ks(4,2,t,e)},useMemo:function(t,e){var n=It();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=It();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jm.bind(null,fe,t),[r.memoizedState,t]},useRef:function(t){var e=It();return t={current:t},e.memoizedState=t},useState:Yc,useDebugValue:Lu,useDeferredValue:function(t){return It().memoizedState=t},useTransition:function(){var t=Yc(!1),e=t[0];return t=Mm.bind(null,t[1]),It().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=fe,i=It();if(le){if(n===void 0)throw Error(P(407));n=n()}else{if(n=e(),De===null)throw Error(P(349));zn&30||_h(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Xc(xh.bind(null,r,s,t),[t]),r.flags|=2048,ji(9,kh.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=It(),e=De.identifierPrefix;if(le){var n=Ft,r=zt;n=(r&~(1<<32-wt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Li++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Lm++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$m={readContext:_t,useCallback:Rh,useContext:_t,useEffect:Iu,useImperativeHandle:bh,useInsertionEffect:wh,useLayoutEffect:Ph,useMemo:Ih,useReducer:va,useRef:Oh,useState:function(){return va(Mi)},useDebugValue:Lu,useDeferredValue:function(t){var e=kt();return Lh(e,Ee.memoizedState,t)},useTransition:function(){var t=va(Mi)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Sh,useSyncExternalStore:Ch,useId:Mh,unstable_isNewReconciler:!1},zm={readContext:_t,useCallback:Rh,useContext:_t,useEffect:Iu,useImperativeHandle:bh,useInsertionEffect:wh,useLayoutEffect:Ph,useMemo:Ih,useReducer:ya,useRef:Oh,useState:function(){return ya(Mi)},useDebugValue:Lu,useDeferredValue:function(t){var e=kt();return Ee===null?e.memoizedState=t:Lh(e,Ee.memoizedState,t)},useTransition:function(){var t=ya(Mi)[0],e=kt().memoizedState;return[t,e]},useMutableSource:Sh,useSyncExternalStore:Ch,useId:Mh,unstable_isNewReconciler:!1};function Et(t,e){if(t&&t.defaultProps){e=de({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ml(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:de({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var So={isMounted:function(t){return(t=t._reactInternals)?Vn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ge(),i=pn(t),s=Ut(r,i);s.payload=e,n!=null&&(s.callback=n),e=dn(t,s,i),e!==null&&(Pt(e,t,i,r),Cs(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ge(),i=pn(t),s=Ut(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=dn(t,s,i),e!==null&&(Pt(e,t,i,r),Cs(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ge(),r=pn(t),i=Ut(n,r);i.tag=2,e!=null&&(i.callback=e),e=dn(t,i,r),e!==null&&(Pt(e,t,r,n),Cs(e,t,r))}};function Jc(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wi(n,r)||!wi(i,s):!0}function $h(t,e,n){var r=!1,i=Sn,s=e.contextType;return typeof s=="object"&&s!==null?s=_t(s):(i=it(e)?An:He.current,r=e.contextTypes,s=(r=r!=null)?Tr(t,i):Sn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=So,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Zc(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&So.enqueueReplaceState(e,e.state,null)}function vl(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Tu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=_t(s):(s=it(e)?An:He.current,i.context=Tr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ml(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&So.enqueueReplaceState(i,i.state,null),Js(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dr(t,e){try{var n="",r=e;do n+=h0(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Sa(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function yl(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fm=typeof WeakMap=="function"?WeakMap:Map;function zh(t,e,n){n=Ut(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ro||(ro=!0,Pl=r),yl(t,e)},n}function Fh(t,e,n){n=Ut(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){yl(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){yl(t,e),typeof r!="function"&&(hn===null?hn=new Set([this]):hn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ef(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Fm;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ev.bind(null,t,e,n),e.then(t,t))}function tf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function nf(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ut(-1,1),e.tag=2,dn(n,e,1))),n.lanes|=1),t)}var Um=Kt.ReactCurrentOwner,nt=!1;function Qe(t,e,n,r){e.child=t===null?gh(e,null,n,r):wr(e,t.child,n,r)}function rf(t,e,n,r,i){n=n.render;var s=e.ref;return _r(e,i),r=bu(t,e,n,r,s,i),n=Ru(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wt(t,e,i)):(le&&n&&yu(e),e.flags|=1,Qe(t,e,r,i),e.child)}function sf(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Uu(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Uh(t,e,s,r,i)):(t=Os(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wi,n(o,r)&&t.ref===e.ref)return Wt(t,e,i)}return e.flags|=1,t=gn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Uh(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wi(s,r)&&t.ref===e.ref)if(nt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(nt=!0);else return e.lanes=t.lanes,Wt(t,e,i)}return Sl(t,e,n,r,i)}function Bh(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ie(mr,ut),ut|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ie(mr,ut),ut|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ie(mr,ut),ut|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ie(mr,ut),ut|=r;return Qe(t,e,i,n),e.child}function Hh(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Sl(t,e,n,r,i){var s=it(n)?An:He.current;return s=Tr(e,s),_r(e,i),n=bu(t,e,n,r,s,i),r=Ru(),t!==null&&!nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wt(t,e,i)):(le&&r&&yu(e),e.flags|=1,Qe(t,e,n,i),e.child)}function of(t,e,n,r,i){if(it(n)){var s=!0;Qs(e)}else s=!1;if(_r(e,i),e.stateNode===null)xs(t,e),$h(e,n,r),vl(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=_t(u):(u=it(n)?An:He.current,u=Tr(e,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&Zc(e,o,r,u),en=!1;var f=e.memoizedState;o.state=f,Js(e,r,o,i),l=e.memoizedState,a!==r||f!==l||rt.current||en?(typeof c=="function"&&(ml(e,n,c,r),l=e.memoizedState),(a=en||Jc(e,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vh(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Et(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=_t(l):(l=it(n)?An:He.current,l=Tr(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&Zc(e,o,r,l),en=!1,f=e.memoizedState,o.state=f,Js(e,r,o,i);var g=e.memoizedState;a!==d||f!==g||rt.current||en?(typeof p=="function"&&(ml(e,n,p,r),g=e.memoizedState),(u=en||Jc(e,n,u,r,f,g,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Cl(t,e,n,r,s,i)}function Cl(t,e,n,r,i,s){Hh(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Vc(e,n,!1),Wt(t,e,s);r=e.stateNode,Um.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wr(e,t.child,null,s),e.child=wr(e,null,a,s)):Qe(t,e,a,s),e.memoizedState=r.state,i&&Vc(e,n,!0),e.child}function Vh(t){var e=t.stateNode;e.pendingContext?Hc(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hc(t,e.context,!1),Ou(t,e.containerInfo)}function af(t,e,n,r,i){return Or(),Cu(i),e.flags|=256,Qe(t,e,n,r),e.child}var _l={dehydrated:null,treeContext:null,retryLane:0};function kl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wh(t,e,n){var r=e.pendingProps,i=ce.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ie(ce,i&1),t===null)return pl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ko(o,r,0,null),t=jn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=kl(n),e.memoizedState=_l,t):Mu(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Bm(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=gn(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=gn(a,s):(s=jn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?kl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=_l,r}return s=t.child,t=s.sibling,r=gn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Mu(t,e){return e=ko({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function as(t,e,n,r){return r!==null&&Cu(r),wr(e,t.child,null,n),t=Mu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Bm(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Sa(Error(P(422))),as(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ko({mode:"visible",children:r.children},i,0,null),s=jn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wr(e,t.child,null,o),e.child.memoizedState=kl(o),e.memoizedState=_l,s);if(!(e.mode&1))return as(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(P(419)),r=Sa(s,r,void 0),as(t,e,o,r)}if(a=(o&t.childLanes)!==0,nt||a){if(r=De,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Vt(t,i),Pt(r,t,i,-1))}return Fu(),r=Sa(Error(P(421))),as(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tv.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ct=fn(i.nextSibling),ft=e,le=!0,Ot=null,t!==null&&(mt[vt++]=zt,mt[vt++]=Ft,mt[vt++]=$n,zt=t.id,Ft=t.overflow,$n=e),e=Mu(e,r.children),e.flags|=4096,e)}function lf(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),gl(t.return,e,n)}function Ca(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Kh(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Qe(t,e,r.children,n),r=ce.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lf(t,n,e);else if(t.tag===19)lf(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ie(ce,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Zs(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ca(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Zs(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ca(e,!0,n,null,s);break;case"together":Ca(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xs(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Fn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(P(153));if(e.child!==null){for(t=e.child,n=gn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=gn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Hm(t,e,n){switch(e.tag){case 3:Vh(e),Or();break;case 5:yh(e);break;case 1:it(e.type)&&Qs(e);break;case 4:Ou(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ie(Ys,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ie(ce,ce.current&1),e.flags|=128,null):n&e.child.childLanes?Wh(t,e,n):(ie(ce,ce.current&1),t=Wt(t,e,n),t!==null?t.sibling:null);ie(ce,ce.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Kh(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ie(ce,ce.current),r)break;return null;case 22:case 23:return e.lanes=0,Bh(t,e,n)}return Wt(t,e,n)}var Qh,xl,Gh,qh;Qh=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xl=function(){};Gh=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ln(jt.current);var s=null;switch(n){case"input":i=Wa(t,i),r=Wa(t,r),s=[];break;case"select":i=de({},i,{value:void 0}),r=de({},r,{value:void 0}),s=[];break;case"textarea":i=Ga(t,i),r=Ga(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ws)}Ya(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ci.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ci.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&se("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};qh=function(t,e,n,r){n!==r&&(e.flags|=4)};function Yr(t,e){if(!le)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ze(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Vm(t,e,n){var r=e.pendingProps;switch(Su(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ze(e),null;case 1:return it(e.type)&&Ks(),ze(e),null;case 3:return r=e.stateNode,Pr(),oe(rt),oe(He),Pu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ss(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ot!==null&&(Rl(Ot),Ot=null))),xl(t,e),ze(e),null;case 5:wu(e);var i=Ln(Ii.current);if(n=e.type,t!==null&&e.stateNode!=null)Gh(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(P(166));return ze(e),null}if(t=Ln(jt.current),ss(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Lt]=e,r[bi]=s,t=(e.mode&1)!==0,n){case"dialog":se("cancel",r),se("close",r);break;case"iframe":case"object":case"embed":se("load",r);break;case"video":case"audio":for(i=0;i<ii.length;i++)se(ii[i],r);break;case"source":se("error",r);break;case"img":case"image":case"link":se("error",r),se("load",r);break;case"details":se("toggle",r);break;case"input":mc(r,s),se("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},se("invalid",r);break;case"textarea":yc(r,s),se("invalid",r)}Ya(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&is(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&is(r.textContent,a,t),i=["children",""+a]):Ci.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&se("scroll",r)}switch(n){case"input":Yi(r),vc(r,s,!0);break;case"textarea":Yi(r),Sc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ws)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xd(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Lt]=e,t[bi]=r,Qh(t,e,!1,!1),e.stateNode=t;e:{switch(o=Xa(n,r),n){case"dialog":se("cancel",t),se("close",t),i=r;break;case"iframe":case"object":case"embed":se("load",t),i=r;break;case"video":case"audio":for(i=0;i<ii.length;i++)se(ii[i],t);i=r;break;case"source":se("error",t),i=r;break;case"img":case"image":case"link":se("error",t),se("load",t),i=r;break;case"details":se("toggle",t),i=r;break;case"input":mc(t,r),i=Wa(t,r),se("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=de({},r,{value:void 0}),se("invalid",t);break;case"textarea":yc(t,r),i=Ga(t,r),se("invalid",t);break;default:i=r}Ya(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Od(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Ed(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&_i(t,l):typeof l=="number"&&_i(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ci.hasOwnProperty(s)?l!=null&&s==="onScroll"&&se("scroll",t):l!=null&&iu(t,s,l,o))}switch(n){case"input":Yi(t),vc(t,r,!1);break;case"textarea":Yi(t),Sc(t);break;case"option":r.value!=null&&t.setAttribute("value",""+yn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?vr(t,!!r.multiple,s,!1):r.defaultValue!=null&&vr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ws)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ze(e),null;case 6:if(t&&e.stateNode!=null)qh(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(P(166));if(n=Ln(Ii.current),Ln(jt.current),ss(e)){if(r=e.stateNode,n=e.memoizedProps,r[Lt]=e,(s=r.nodeValue!==n)&&(t=ft,t!==null))switch(t.tag){case 3:is(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&is(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Lt]=e,e.stateNode=r}return ze(e),null;case 13:if(oe(ce),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(le&&ct!==null&&e.mode&1&&!(e.flags&128))hh(),Or(),e.flags|=98560,s=!1;else if(s=ss(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(P(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(P(317));s[Lt]=e}else Or(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ze(e),s=!1}else Ot!==null&&(Rl(Ot),Ot=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ce.current&1?Te===0&&(Te=3):Fu())),e.updateQueue!==null&&(e.flags|=4),ze(e),null);case 4:return Pr(),xl(t,e),t===null&&Pi(e.stateNode.containerInfo),ze(e),null;case 10:return xu(e.type._context),ze(e),null;case 17:return it(e.type)&&Ks(),ze(e),null;case 19:if(oe(ce),s=e.memoizedState,s===null)return ze(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Yr(s,!1);else{if(Te!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zs(t),o!==null){for(e.flags|=128,Yr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ie(ce,ce.current&1|2),e.child}t=t.sibling}s.tail!==null&&ge()>br&&(e.flags|=128,r=!0,Yr(s,!1),e.lanes=4194304)}else{if(!r)if(t=Zs(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Yr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!le)return ze(e),null}else 2*ge()-s.renderingStartTime>br&&n!==1073741824&&(e.flags|=128,r=!0,Yr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ge(),e.sibling=null,n=ce.current,ie(ce,r?n&1|2:n&1),e):(ze(e),null);case 22:case 23:return zu(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ut&1073741824&&(ze(e),e.subtreeFlags&6&&(e.flags|=8192)):ze(e),null;case 24:return null;case 25:return null}throw Error(P(156,e.tag))}function Wm(t,e){switch(Su(e),e.tag){case 1:return it(e.type)&&Ks(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pr(),oe(rt),oe(He),Pu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wu(e),null;case 13:if(oe(ce),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(P(340));Or()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return oe(ce),null;case 4:return Pr(),null;case 10:return xu(e.type._context),null;case 22:case 23:return zu(),null;case 24:return null;default:return null}}var ls=!1,Be=!1,Km=typeof WeakSet=="function"?WeakSet:Set,M=null;function gr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){pe(t,e,r)}else n.current=null}function El(t,e,n){try{n()}catch(r){pe(t,e,r)}}var uf=!1;function Qm(t,e){if(al=Bs,t=eh(),vu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ll={focusedElem:t,selectionRange:n},Bs=!1,M=e;M!==null;)if(e=M,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,M=t;else for(;M!==null;){e=M;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var S=g.memoizedProps,O=g.memoizedState,m=e.stateNode,h=m.getSnapshotBeforeUpdate(e.elementType===e.type?S:Et(e.type,S),O);m.__reactInternalSnapshotBeforeUpdate=h}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(P(163))}}catch(E){pe(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,M=t;break}M=e.return}return g=uf,uf=!1,g}function hi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&El(e,n,s)}i=i.next}while(i!==r)}}function Co(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tl(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Yh(t){var e=t.alternate;e!==null&&(t.alternate=null,Yh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Lt],delete e[bi],delete e[fl],delete e[Dm],delete e[bm])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Xh(t){return t.tag===5||t.tag===3||t.tag===4}function cf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Xh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ol(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ws));else if(r!==4&&(t=t.child,t!==null))for(Ol(t,e,n),t=t.sibling;t!==null;)Ol(t,e,n),t=t.sibling}function wl(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wl(t,e,n),t=t.sibling;t!==null;)wl(t,e,n),t=t.sibling}var Le=null,Tt=!1;function Yt(t,e,n){for(n=n.child;n!==null;)Jh(t,e,n),n=n.sibling}function Jh(t,e,n){if(Mt&&typeof Mt.onCommitFiberUnmount=="function")try{Mt.onCommitFiberUnmount(fo,n)}catch{}switch(n.tag){case 5:Be||gr(n,e);case 6:var r=Le,i=Tt;Le=null,Yt(t,e,n),Le=r,Tt=i,Le!==null&&(Tt?(t=Le,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Le.removeChild(n.stateNode));break;case 18:Le!==null&&(Tt?(t=Le,n=n.stateNode,t.nodeType===8?ha(t.parentNode,n):t.nodeType===1&&ha(t,n),Ti(t)):ha(Le,n.stateNode));break;case 4:r=Le,i=Tt,Le=n.stateNode.containerInfo,Tt=!0,Yt(t,e,n),Le=r,Tt=i;break;case 0:case 11:case 14:case 15:if(!Be&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&El(n,e,o),i=i.next}while(i!==r)}Yt(t,e,n);break;case 1:if(!Be&&(gr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){pe(n,e,a)}Yt(t,e,n);break;case 21:Yt(t,e,n);break;case 22:n.mode&1?(Be=(r=Be)||n.memoizedState!==null,Yt(t,e,n),Be=r):Yt(t,e,n);break;default:Yt(t,e,n)}}function ff(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Km),e.forEach(function(r){var i=nv.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Le=a.stateNode,Tt=!1;break e;case 3:Le=a.stateNode.containerInfo,Tt=!0;break e;case 4:Le=a.stateNode.containerInfo,Tt=!0;break e}a=a.return}if(Le===null)throw Error(P(160));Jh(s,o,i),Le=null,Tt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){pe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zh(e,t),e=e.sibling}function Zh(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(e,t),Rt(t),r&4){try{hi(3,t,t.return),Co(3,t)}catch(S){pe(t,t.return,S)}try{hi(5,t,t.return)}catch(S){pe(t,t.return,S)}}break;case 1:xt(e,t),Rt(t),r&512&&n!==null&&gr(n,n.return);break;case 5:if(xt(e,t),Rt(t),r&512&&n!==null&&gr(n,n.return),t.flags&32){var i=t.stateNode;try{_i(i,"")}catch(S){pe(t,t.return,S)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&_d(i,s),Xa(a,o);var u=Xa(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?Od(i,d):c==="dangerouslySetInnerHTML"?Ed(i,d):c==="children"?_i(i,d):iu(i,c,d,u)}switch(a){case"input":Ka(i,s);break;case"textarea":kd(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?vr(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?vr(i,!!s.multiple,s.defaultValue,!0):vr(i,!!s.multiple,s.multiple?[]:"",!1))}i[bi]=s}catch(S){pe(t,t.return,S)}}break;case 6:if(xt(e,t),Rt(t),r&4){if(t.stateNode===null)throw Error(P(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(S){pe(t,t.return,S)}}break;case 3:if(xt(e,t),Rt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ti(e.containerInfo)}catch(S){pe(t,t.return,S)}break;case 4:xt(e,t),Rt(t);break;case 13:xt(e,t),Rt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Au=ge())),r&4&&ff(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Be=(u=Be)||c,xt(e,t),Be=u):xt(e,t),Rt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(M=t,c=t.child;c!==null;){for(d=M=c;M!==null;){switch(f=M,p=f.child,f.tag){case 0:case 11:case 14:case 15:hi(4,f,f.return);break;case 1:gr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(S){pe(r,n,S)}}break;case 5:gr(f,f.return);break;case 22:if(f.memoizedState!==null){hf(d);continue}}p!==null?(p.return=f,M=p):hf(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Td("display",o))}catch(S){pe(t,t.return,S)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(S){pe(t,t.return,S)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xt(e,t),Rt(t),r&4&&ff(t);break;case 21:break;default:xt(e,t),Rt(t)}}function Rt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Xh(n)){var r=n;break e}n=n.return}throw Error(P(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(_i(i,""),r.flags&=-33);var s=cf(t);wl(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=cf(t);Ol(t,a,o);break;default:throw Error(P(161))}}catch(l){pe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Gm(t,e,n){M=t,ep(t)}function ep(t,e,n){for(var r=(t.mode&1)!==0;M!==null;){var i=M,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ls;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Be;a=ls;var u=Be;if(ls=o,(Be=l)&&!u)for(M=i;M!==null;)o=M,l=o.child,o.tag===22&&o.memoizedState!==null?pf(i):l!==null?(l.return=o,M=l):pf(i);for(;s!==null;)M=s,ep(s),s=s.sibling;M=i,ls=a,Be=u}df(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,M=s):df(t)}}function df(t){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Be||Co(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Be)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Et(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&qc(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}qc(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Ti(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(P(163))}Be||e.flags&512&&Tl(e)}catch(f){pe(e,e.return,f)}}if(e===t){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function hf(t){for(;M!==null;){var e=M;if(e===t){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function pf(t){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Co(4,e)}catch(l){pe(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){pe(e,i,l)}}var s=e.return;try{Tl(e)}catch(l){pe(e,s,l)}break;case 5:var o=e.return;try{Tl(e)}catch(l){pe(e,o,l)}}}catch(l){pe(e,e.return,l)}if(e===t){M=null;break}var a=e.sibling;if(a!==null){a.return=e.return,M=a;break}M=e.return}}var qm=Math.ceil,no=Kt.ReactCurrentDispatcher,ju=Kt.ReactCurrentOwner,Ct=Kt.ReactCurrentBatchConfig,X=0,De=null,Se=null,Me=0,ut=0,mr=_n(0),Te=0,Ni=null,Fn=0,_o=0,Nu=0,pi=null,tt=null,Au=0,br=1/0,At=null,ro=!1,Pl=null,hn=null,us=!1,on=null,io=0,gi=0,Dl=null,Es=-1,Ts=0;function Ge(){return X&6?ge():Es!==-1?Es:Es=ge()}function pn(t){return t.mode&1?X&2&&Me!==0?Me&-Me:Im.transition!==null?(Ts===0&&(Ts=$d()),Ts):(t=ne,t!==0||(t=window.event,t=t===void 0?16:Wd(t.type)),t):1}function Pt(t,e,n,r){if(50<gi)throw gi=0,Dl=null,Error(P(185));Ui(t,n,r),(!(X&2)||t!==De)&&(t===De&&(!(X&2)&&(_o|=n),Te===4&&rn(t,Me)),st(t,r),n===1&&X===0&&!(e.mode&1)&&(br=ge()+500,vo&&kn()))}function st(t,e){var n=t.callbackNode;I0(t,e);var r=Us(t,t===De?Me:0);if(r===0)n!==null&&kc(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&kc(n),e===1)t.tag===0?Rm(gf.bind(null,t)):ch(gf.bind(null,t)),wm(function(){!(X&6)&&kn()}),n=null;else{switch(zd(r)){case 1:n=uu;break;case 4:n=Nd;break;case 16:n=Fs;break;case 536870912:n=Ad;break;default:n=Fs}n=lp(n,tp.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tp(t,e){if(Es=-1,Ts=0,X&6)throw Error(P(327));var n=t.callbackNode;if(kr()&&t.callbackNode!==n)return null;var r=Us(t,t===De?Me:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=so(t,r);else{e=r;var i=X;X|=2;var s=rp();(De!==t||Me!==e)&&(At=null,br=ge()+500,Mn(t,e));do try{Jm();break}catch(a){np(t,a)}while(!0);ku(),no.current=s,X=i,Se!==null?e=0:(De=null,Me=0,e=Te)}if(e!==0){if(e===2&&(i=nl(t),i!==0&&(r=i,e=bl(t,i))),e===1)throw n=Ni,Mn(t,0),rn(t,r),st(t,ge()),n;if(e===6)rn(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ym(i)&&(e=so(t,r),e===2&&(s=nl(t),s!==0&&(r=s,e=bl(t,s))),e===1))throw n=Ni,Mn(t,0),rn(t,r),st(t,ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(P(345));case 2:Dn(t,tt,At);break;case 3:if(rn(t,r),(r&130023424)===r&&(e=Au+500-ge(),10<e)){if(Us(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ge(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cl(Dn.bind(null,t,tt,At),e);break}Dn(t,tt,At);break;case 4:if(rn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wt(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qm(r/1960))-r,10<r){t.timeoutHandle=cl(Dn.bind(null,t,tt,At),r);break}Dn(t,tt,At);break;case 5:Dn(t,tt,At);break;default:throw Error(P(329))}}}return st(t,ge()),t.callbackNode===n?tp.bind(null,t):null}function bl(t,e){var n=pi;return t.current.memoizedState.isDehydrated&&(Mn(t,e).flags|=256),t=so(t,e),t!==2&&(e=tt,tt=n,e!==null&&Rl(e)),t}function Rl(t){tt===null?tt=t:tt.push.apply(tt,t)}function Ym(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Dt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function rn(t,e){for(e&=~Nu,e&=~_o,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wt(e),r=1<<n;t[n]=-1,e&=~r}}function gf(t){if(X&6)throw Error(P(327));kr();var e=Us(t,0);if(!(e&1))return st(t,ge()),null;var n=so(t,e);if(t.tag!==0&&n===2){var r=nl(t);r!==0&&(e=r,n=bl(t,r))}if(n===1)throw n=Ni,Mn(t,0),rn(t,e),st(t,ge()),n;if(n===6)throw Error(P(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Dn(t,tt,At),st(t,ge()),null}function $u(t,e){var n=X;X|=1;try{return t(e)}finally{X=n,X===0&&(br=ge()+500,vo&&kn())}}function Un(t){on!==null&&on.tag===0&&!(X&6)&&kr();var e=X;X|=1;var n=Ct.transition,r=ne;try{if(Ct.transition=null,ne=1,t)return t()}finally{ne=r,Ct.transition=n,X=e,!(X&6)&&kn()}}function zu(){ut=mr.current,oe(mr)}function Mn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Om(n)),Se!==null)for(n=Se.return;n!==null;){var r=n;switch(Su(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ks();break;case 3:Pr(),oe(rt),oe(He),Pu();break;case 5:wu(r);break;case 4:Pr();break;case 13:oe(ce);break;case 19:oe(ce);break;case 10:xu(r.type._context);break;case 22:case 23:zu()}n=n.return}if(De=t,Se=t=gn(t.current,null),Me=ut=e,Te=0,Ni=null,Nu=_o=Fn=0,tt=pi=null,In!==null){for(e=0;e<In.length;e++)if(n=In[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}In=null}return t}function np(t,e){do{var n=Se;try{if(ku(),_s.current=to,eo){for(var r=fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}eo=!1}if(zn=0,Pe=Ee=fe=null,di=!1,Li=0,ju.current=null,n===null||n.return===null){Te=1,Ni=e,Se=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Me,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=tf(o);if(p!==null){p.flags&=-257,nf(p,o,a,s,e),p.mode&1&&ef(s,u,e),e=p,l=u;var g=e.updateQueue;if(g===null){var S=new Set;S.add(l),e.updateQueue=S}else g.add(l);break e}else{if(!(e&1)){ef(s,u,e),Fu();break e}l=Error(P(426))}}else if(le&&a.mode&1){var O=tf(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),nf(O,o,a,s,e),Cu(Dr(l,a));break e}}s=l=Dr(l,a),Te!==4&&(Te=2),pi===null?pi=[s]:pi.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=zh(s,l,e);Gc(s,m);break e;case 1:a=l;var h=s.type,y=s.stateNode;if(!(s.flags&128)&&(typeof h.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(hn===null||!hn.has(y)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=Fh(s,a,e);Gc(s,E);break e}}s=s.return}while(s!==null)}sp(n)}catch(D){e=D,Se===n&&n!==null&&(Se=n=n.return);continue}break}while(!0)}function rp(){var t=no.current;return no.current=to,t===null?to:t}function Fu(){(Te===0||Te===3||Te===2)&&(Te=4),De===null||!(Fn&268435455)&&!(_o&268435455)||rn(De,Me)}function so(t,e){var n=X;X|=2;var r=rp();(De!==t||Me!==e)&&(At=null,Mn(t,e));do try{Xm();break}catch(i){np(t,i)}while(!0);if(ku(),X=n,no.current=r,Se!==null)throw Error(P(261));return De=null,Me=0,Te}function Xm(){for(;Se!==null;)ip(Se)}function Jm(){for(;Se!==null&&!x0();)ip(Se)}function ip(t){var e=ap(t.alternate,t,ut);t.memoizedProps=t.pendingProps,e===null?sp(t):Se=e,ju.current=null}function sp(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Wm(n,e),n!==null){n.flags&=32767,Se=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Te=6,Se=null;return}}else if(n=Vm(n,e,ut),n!==null){Se=n;return}if(e=e.sibling,e!==null){Se=e;return}Se=e=t}while(e!==null);Te===0&&(Te=5)}function Dn(t,e,n){var r=ne,i=Ct.transition;try{Ct.transition=null,ne=1,Zm(t,e,n,r)}finally{Ct.transition=i,ne=r}return null}function Zm(t,e,n,r){do kr();while(on!==null);if(X&6)throw Error(P(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(P(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(L0(t,s),t===De&&(Se=De=null,Me=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||us||(us=!0,lp(Fs,function(){return kr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var o=ne;ne=1;var a=X;X|=4,ju.current=null,Qm(t,n),Zh(n,t),Sm(ll),Bs=!!al,ll=al=null,t.current=n,Gm(n),E0(),X=a,ne=o,Ct.transition=s}else t.current=n;if(us&&(us=!1,on=t,io=i),s=t.pendingLanes,s===0&&(hn=null),w0(n.stateNode),st(t,ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ro)throw ro=!1,t=Pl,Pl=null,t;return io&1&&t.tag!==0&&kr(),s=t.pendingLanes,s&1?t===Dl?gi++:(gi=0,Dl=t):gi=0,kn(),null}function kr(){if(on!==null){var t=zd(io),e=Ct.transition,n=ne;try{if(Ct.transition=null,ne=16>t?16:t,on===null)var r=!1;else{if(t=on,on=null,io=0,X&6)throw Error(P(331));var i=X;for(X|=4,M=t.current;M!==null;){var s=M,o=s.child;if(M.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(M=u;M!==null;){var c=M;switch(c.tag){case 0:case 11:case 15:hi(8,c,s)}var d=c.child;if(d!==null)d.return=c,M=d;else for(;M!==null;){c=M;var f=c.sibling,p=c.return;if(Yh(c),c===u){M=null;break}if(f!==null){f.return=p,M=f;break}M=p}}}var g=s.alternate;if(g!==null){var S=g.child;if(S!==null){g.child=null;do{var O=S.sibling;S.sibling=null,S=O}while(S!==null)}}M=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,M=o;else e:for(;M!==null;){if(s=M,s.flags&2048)switch(s.tag){case 0:case 11:case 15:hi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,M=m;break e}M=s.return}}var h=t.current;for(M=h;M!==null;){o=M;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,M=y;else e:for(o=h;M!==null;){if(a=M,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Co(9,a)}}catch(D){pe(a,a.return,D)}if(a===o){M=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,M=E;break e}M=a.return}}if(X=i,kn(),Mt&&typeof Mt.onPostCommitFiberRoot=="function")try{Mt.onPostCommitFiberRoot(fo,t)}catch{}r=!0}return r}finally{ne=n,Ct.transition=e}}return!1}function mf(t,e,n){e=Dr(n,e),e=zh(t,e,1),t=dn(t,e,1),e=Ge(),t!==null&&(Ui(t,1,e),st(t,e))}function pe(t,e,n){if(t.tag===3)mf(t,t,n);else for(;e!==null;){if(e.tag===3){mf(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hn===null||!hn.has(r))){t=Dr(n,t),t=Fh(e,t,1),e=dn(e,t,1),t=Ge(),e!==null&&(Ui(e,1,t),st(e,t));break}}e=e.return}}function ev(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ge(),t.pingedLanes|=t.suspendedLanes&n,De===t&&(Me&n)===n&&(Te===4||Te===3&&(Me&130023424)===Me&&500>ge()-Au?Mn(t,0):Nu|=n),st(t,e)}function op(t,e){e===0&&(t.mode&1?(e=Zi,Zi<<=1,!(Zi&130023424)&&(Zi=4194304)):e=1);var n=Ge();t=Vt(t,e),t!==null&&(Ui(t,e,n),st(t,n))}function tv(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),op(t,n)}function nv(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(P(314))}r!==null&&r.delete(e),op(t,n)}var ap;ap=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rt.current)nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return nt=!1,Hm(t,e,n);nt=!!(t.flags&131072)}else nt=!1,le&&e.flags&1048576&&fh(e,qs,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xs(t,e),t=e.pendingProps;var i=Tr(e,He.current);_r(e,n),i=bu(null,e,r,t,i,n);var s=Ru();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,it(r)?(s=!0,Qs(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Tu(e),i.updater=So,e.stateNode=i,i._reactInternals=e,vl(e,r,t,n),e=Cl(null,e,r,!0,s,n)):(e.tag=0,le&&s&&yu(e),Qe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xs(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=iv(r),t=Et(r,t),i){case 0:e=Sl(null,e,r,t,n);break e;case 1:e=of(null,e,r,t,n);break e;case 11:e=rf(null,e,r,t,n);break e;case 14:e=sf(null,e,r,Et(r.type,t),n);break e}throw Error(P(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),Sl(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),of(t,e,r,i,n);case 3:e:{if(Vh(e),t===null)throw Error(P(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vh(t,e),Js(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Dr(Error(P(423)),e),e=af(t,e,r,n,i);break e}else if(r!==i){i=Dr(Error(P(424)),e),e=af(t,e,r,n,i);break e}else for(ct=fn(e.stateNode.containerInfo.firstChild),ft=e,le=!0,Ot=null,n=gh(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Or(),r===i){e=Wt(t,e,n);break e}Qe(t,e,r,n)}e=e.child}return e;case 5:return yh(e),t===null&&pl(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ul(r,i)?o=null:s!==null&&ul(r,s)&&(e.flags|=32),Hh(t,e),Qe(t,e,o,n),e.child;case 6:return t===null&&pl(e),null;case 13:return Wh(t,e,n);case 4:return Ou(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wr(e,null,r,n):Qe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),rf(t,e,r,i,n);case 7:return Qe(t,e,e.pendingProps,n),e.child;case 8:return Qe(t,e,e.pendingProps.children,n),e.child;case 12:return Qe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ie(Ys,r._currentValue),r._currentValue=o,s!==null)if(Dt(s.value,o)){if(s.children===i.children&&!rt.current){e=Wt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ut(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),gl(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(P(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),gl(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Qe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_r(e,n),i=_t(i),r=r(i),e.flags|=1,Qe(t,e,r,n),e.child;case 14:return r=e.type,i=Et(r,e.pendingProps),i=Et(r.type,i),sf(t,e,r,i,n);case 15:return Uh(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Et(r,i),xs(t,e),e.tag=1,it(r)?(t=!0,Qs(e)):t=!1,_r(e,n),$h(e,r,i),vl(e,r,i,n),Cl(null,e,r,!0,t,n);case 19:return Kh(t,e,n);case 22:return Bh(t,e,n)}throw Error(P(156,e.tag))};function lp(t,e){return jd(t,e)}function rv(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function St(t,e,n,r){return new rv(t,e,n,r)}function Uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iv(t){if(typeof t=="function")return Uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ou)return 11;if(t===au)return 14}return 2}function gn(t,e){var n=t.alternate;return n===null?(n=St(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Os(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Uu(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case or:return jn(n.children,i,s,e);case su:o=8,i|=8;break;case Ua:return t=St(12,n,e,i|2),t.elementType=Ua,t.lanes=s,t;case Ba:return t=St(13,n,e,i),t.elementType=Ba,t.lanes=s,t;case Ha:return t=St(19,n,e,i),t.elementType=Ha,t.lanes=s,t;case yd:return ko(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case md:o=10;break e;case vd:o=9;break e;case ou:o=11;break e;case au:o=14;break e;case Zt:o=16,r=null;break e}throw Error(P(130,t==null?t:typeof t,""))}return e=St(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function jn(t,e,n,r){return t=St(7,t,r,e),t.lanes=n,t}function ko(t,e,n,r){return t=St(22,t,r,e),t.elementType=yd,t.lanes=n,t.stateNode={isHidden:!1},t}function _a(t,e,n){return t=St(6,t,null,e),t.lanes=n,t}function ka(t,e,n){return e=St(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sv(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=na(0),this.expirationTimes=na(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=na(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(t,e,n,r,i,s,o,a,l){return t=new sv(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=St(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tu(s),t}function ov(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sr,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function up(t){if(!t)return Sn;t=t._reactInternals;e:{if(Vn(t)!==t||t.tag!==1)throw Error(P(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(it(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(P(171))}if(t.tag===1){var n=t.type;if(it(n))return uh(t,n,e)}return e}function cp(t,e,n,r,i,s,o,a,l){return t=Bu(n,r,!0,t,i,s,o,a,l),t.context=up(null),n=t.current,r=Ge(),i=pn(n),s=Ut(r,i),s.callback=e??null,dn(n,s,i),t.current.lanes=i,Ui(t,i,r),st(t,r),t}function xo(t,e,n,r){var i=e.current,s=Ge(),o=pn(i);return n=up(n),e.context===null?e.context=n:e.pendingContext=n,e=Ut(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dn(i,e,o),t!==null&&(Pt(t,i,o,s),Cs(t,i,o)),o}function oo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hu(t,e){vf(t,e),(t=t.alternate)&&vf(t,e)}function av(){return null}var fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vu(t){this._internalRoot=t}Eo.prototype.render=Vu.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(P(409));xo(t,e,null,null)};Eo.prototype.unmount=Vu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Un(function(){xo(null,t,null,null)}),e[Ht]=null}};function Eo(t){this._internalRoot=t}Eo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bd();t={blockedOn:null,target:t,priority:e};for(var n=0;n<nn.length&&e!==0&&e<nn[n].priority;n++);nn.splice(n,0,t),n===0&&Vd(t)}};function Wu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function To(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yf(){}function lv(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=oo(o);s.call(u)}}var o=cp(e,r,t,0,null,!1,!1,"",yf);return t._reactRootContainer=o,t[Ht]=o.current,Pi(t.nodeType===8?t.parentNode:t),Un(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=oo(l);a.call(u)}}var l=Bu(t,0,!1,null,null,!1,!1,"",yf);return t._reactRootContainer=l,t[Ht]=l.current,Pi(t.nodeType===8?t.parentNode:t),Un(function(){xo(e,l,n,r)}),l}function Oo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=oo(o);a.call(l)}}xo(e,o,t,i)}else o=lv(n,e,t,i,r);return oo(o)}Fd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ri(e.pendingLanes);n!==0&&(cu(e,n|1),st(e,ge()),!(X&6)&&(br=ge()+500,kn()))}break;case 13:Un(function(){var r=Vt(t,1);if(r!==null){var i=Ge();Pt(r,t,1,i)}}),Hu(t,1)}};fu=function(t){if(t.tag===13){var e=Vt(t,134217728);if(e!==null){var n=Ge();Pt(e,t,134217728,n)}Hu(t,134217728)}};Ud=function(t){if(t.tag===13){var e=pn(t),n=Vt(t,e);if(n!==null){var r=Ge();Pt(n,t,e,r)}Hu(t,e)}};Bd=function(){return ne};Hd=function(t,e){var n=ne;try{return ne=t,e()}finally{ne=n}};Za=function(t,e,n){switch(e){case"input":if(Ka(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=mo(r);if(!i)throw Error(P(90));Cd(r),Ka(r,i)}}}break;case"textarea":kd(t,n);break;case"select":e=n.value,e!=null&&vr(t,!!n.multiple,e,!1)}};Dd=$u;bd=Un;var uv={usingClientEntryPoint:!1,Events:[Hi,cr,mo,wd,Pd,$u]},Xr={findFiberByHostInstance:Rn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cv={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ld(t),t===null?null:t.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||av,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cs=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cs.isDisabled&&cs.supportsFiber)try{fo=cs.inject(cv),Mt=cs}catch{}}ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uv;ht.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wu(e))throw Error(P(200));return ov(t,e,null,n)};ht.createRoot=function(t,e){if(!Wu(t))throw Error(P(299));var n=!1,r="",i=fp;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Bu(t,1,!1,null,null,n,!1,r,i),t[Ht]=e.current,Pi(t.nodeType===8?t.parentNode:t),new Vu(e)};ht.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(P(188)):(t=Object.keys(t).join(","),Error(P(268,t)));return t=Ld(e),t=t===null?null:t.stateNode,t};ht.flushSync=function(t){return Un(t)};ht.hydrate=function(t,e,n){if(!To(e))throw Error(P(200));return Oo(null,t,e,!0,n)};ht.hydrateRoot=function(t,e,n){if(!Wu(t))throw Error(P(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=fp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=cp(e,null,t,1,n??null,i,!1,s,o),t[Ht]=e.current,Pi(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Eo(e)};ht.render=function(t,e,n){if(!To(e))throw Error(P(200));return Oo(null,t,e,!1,n)};ht.unmountComponentAtNode=function(t){if(!To(t))throw Error(P(40));return t._reactRootContainer?(Un(function(){Oo(null,null,t,!1,function(){t._reactRootContainer=null,t[Ht]=null})}),!0):!1};ht.unstable_batchedUpdates=$u;ht.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!To(n))throw Error(P(200));if(t==null||t._reactInternals===void 0)throw Error(P(38));return Oo(t,e,n,!1,r)};ht.version="18.3.1-next-f1338f8080-20240426";function dp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dp)}catch(t){console.error(t)}}dp(),dd.exports=ht;var fv=dd.exports,Sf=fv;za.createRoot=Sf.createRoot,za.hydrateRoot=Sf.hydrateRoot;function dv(t){return t!==null?{comment:t,variations:[]}:{variations:[]}}function hv(t,e,n,r,i){const s={move:t,variations:i};return e&&(s.suffix=e),n&&(s.nag=n),r!==null&&(s.comment=r),s}function pv(...t){const[e,...n]=t;let r=e;for(const i of n)i!==null&&(r.variations=[i,...i.variations],i.variations=[],r=i);return e}function gv(t,e){if(e.marker&&e.marker.comment){let n=e.root;for(;;){const r=n.variations[0];if(!r){n.comment=e.marker.comment;break}n=r}}return{headers:t,root:e.root,result:(e.marker&&e.marker.result)??void 0}}function mv(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}function Rr(t,e,n,r){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,Rr.prototype),i.expected=e,i.found=n,i.location=r,i.name="SyntaxError",i}mv(Rr,Error);function xa(t,e,n){return n=n||" ",t.length>e?t:(e-=t.length,n+=n.repeat(e),t+n.slice(0,e))}Rr.prototype.format=function(t){var e="Error: "+this.message;if(this.location){var n=null,r;for(r=0;r<t.length;r++)if(t[r].source===this.location.source){n=t[r].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,s=this.location.source&&typeof this.location.source.offset=="function"?this.location.source.offset(i):i,o=this.location.source+":"+s.line+":"+s.column;if(n){var a=this.location.end,l=xa("",s.line.toString().length," "),u=n[i.line-1],c=i.line===a.line?a.column:u.length+1,d=c-i.column||1;e+=`
 --> `+o+`
`+l+` |
`+s.line+" | "+u+`
`+l+" | "+xa("",i.column-1," ")+xa("",d,"^")}else e+=`
 at `+o}return e};Rr.buildMessage=function(t,e){var n={literal:function(u){return'"'+i(u.text)+'"'},class:function(u){var c=u.parts.map(function(d){return Array.isArray(d)?s(d[0])+"-"+s(d[1]):s(d)});return"["+(u.inverted?"^":"")+c.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(u){return u.description}};function r(u){return u.charCodeAt(0).toString(16).toUpperCase()}function i(u){return u.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function s(u){return u.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(c){return"\\x0"+r(c)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(c){return"\\x"+r(c)})}function o(u){return n[u.type](u)}function a(u){var c=u.map(o),d,f;if(c.sort(),c.length>0){for(d=1,f=1;d<c.length;d++)c[d-1]!==c[d]&&(c[f]=c[d],f++);c.length=f}switch(c.length){case 1:return c[0];case 2:return c[0]+" or "+c[1];default:return c.slice(0,-1).join(", ")+", or "+c[c.length-1]}}function l(u){return u?'"'+i(u)+'"':"end of input"}return"Expected "+a(t)+" but "+l(e)+" found."};function vv(t,e){e=e!==void 0?e:{};var n={},r=e.grammarSource,i={pgn:ic},s=ic,o="[",a='"',l="]",u=".",c="O-O-O",d="O-O",f="0-0-0",p="0-0",g="$",S="{",O="}",m=";",h="(",y=")",E="1-0",D="0-1",b="1/2-1/2",I="*",L=/^[a-zA-Z]/,G=/^[^"]/,U=/^[0-9]/,J=/^[.]/,re=/^[a-zA-Z1-8\-=]/,he=/^[+#]/,We=/^[!?]/,be=/^[^}]/,me=/^[^\r\n]/,Ce=/^[ \t\r\n]/,R=Ze("tag pair"),F=q("[",!1),V=q('"',!1),Z=q("]",!1),N=Ze("tag name"),Y=ke([["a","z"],["A","Z"]],!1,!1),ue=Ze("tag value"),Re=ke(['"'],!0,!1),_e=Ze("move number"),B=ke([["0","9"]],!1,!1),Ne=q(".",!1),Nt=ke(["."],!1,!1),xn=Ze("standard algebraic notation"),Ae=q("O-O-O",!1),Je=q("O-O",!1),qn=q("0-0-0",!1),Mo=q("0-0",!1),Yn=ke([["a","z"],["A","Z"],["1","8"],"-","="],!1,!1),Gt=ke(["+","#"],!1,!1),jo=Ze("suffix annotation"),Xn=ke(["!","?"],!1,!1),No=Ze("NAG"),Wi=q("$",!1),Ao=Ze("brace comment"),Nr=q("{",!1),Ar=ke(["}"],!0,!1),$r=q("}",!1),bt=Ze("rest of line comment"),zr=q(";",!1),En=ke(["\r",`
`],!0,!1),$o=Ze("variation"),zo=q("(",!1),Fo=q(")",!1),Jn=Ze("game termination marker"),Zn=q("1-0",!1),er=q("0-1",!1),tr=q("1/2-1/2",!1),Uo=q("*",!1),Bo=Ze("whitespace"),Ki=ke([" ","	","\r",`
`],!1,!1),Ho=function(C,k){return gv(C,k)},Fr=function(C){return Object.fromEntries(C)},Vo=function(C,k){return[C,k]},Wo=function(C,k){return{root:C,marker:k}},Ko=function(C,k){return pv(dv(C),...k.flat())},Qo=function(C,k,x,$,z){return hv(C,k,x,$,z)},Ur=function(C){return C},Go=function(C){return C.replace(/[\r\n]+/g," ")},nr=function(C){return C.trim()},Br=function(C){return C},qo=function(C,k){return{result:C,comment:k}},_=e.peg$currPos|0,qt=[{line:1,column:1}],ot=_,ee=e.peg$maxFailExpected||[],w=e.peg$silentFails|0,Oe;if(e.startRule){if(!(e.startRule in i))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');s=i[e.startRule]}function q(C,k){return{type:"literal",text:C,ignoreCase:k}}function ke(C,k,x){return{type:"class",parts:C,inverted:k,ignoreCase:x}}function at(){return{type:"end"}}function Ze(C){return{type:"other",description:C}}function nc(C){var k=qt[C],x;if(k)return k;if(C>=qt.length)x=qt.length-1;else for(x=C;!qt[--x];);for(k=qt[x],k={line:k.line,column:k.column};x<C;)t.charCodeAt(x)===10?(k.line++,k.column=1):k.column++,x++;return qt[C]=k,k}function rc(C,k,x){var $=nc(C),z=nc(k),te={source:r,start:{offset:C,line:$.line,column:$.column},end:{offset:k,line:z.line,column:z.column}};return te}function A(C){_<ot||(_>ot&&(ot=_,ee=[]),ee.push(C))}function Eg(C,k,x){return new Rr(Rr.buildMessage(C,k),C,k,x)}function ic(){var C,k,x;return C=_,k=Tg(),x=Pg(),C=Ho(k,x),C}function Tg(){var C,k,x;for(C=_,k=[],x=sc();x!==n;)k.push(x),x=sc();return x=Ke(),C=Fr(k),C}function sc(){var C,k,x,$,z,te,Tn;return w++,C=_,Ke(),t.charCodeAt(_)===91?(k=o,_++):(k=n,w===0&&A(F)),k!==n?(Ke(),x=Og(),x!==n?(Ke(),t.charCodeAt(_)===34?($=a,_++):($=n,w===0&&A(V)),$!==n?(z=wg(),t.charCodeAt(_)===34?(te=a,_++):(te=n,w===0&&A(V)),te!==n?(Ke(),t.charCodeAt(_)===93?(Tn=l,_++):(Tn=n,w===0&&A(Z)),Tn!==n?C=Vo(x,z):(_=C,C=n)):(_=C,C=n)):(_=C,C=n)):(_=C,C=n)):(_=C,C=n),w--,C===n&&w===0&&A(R),C}function Og(){var C,k,x;if(w++,C=_,k=[],x=t.charAt(_),L.test(x)?_++:(x=n,w===0&&A(Y)),x!==n)for(;x!==n;)k.push(x),x=t.charAt(_),L.test(x)?_++:(x=n,w===0&&A(Y));else k=n;return k!==n?C=t.substring(C,_):C=k,w--,C===n&&(k=n,w===0&&A(N)),C}function wg(){var C,k,x;for(w++,C=_,k=[],x=t.charAt(_),G.test(x)?_++:(x=n,w===0&&A(Re));x!==n;)k.push(x),x=t.charAt(_),G.test(x)?_++:(x=n,w===0&&A(Re));return C=t.substring(C,_),w--,k=n,w===0&&A(ue),C}function Pg(){var C,k,x;return C=_,k=oc(),Ke(),x=Mg(),x===n&&(x=null),Ke(),C=Wo(k,x),C}function oc(){var C,k,x,$;for(C=_,k=Yo(),k===n&&(k=null),x=[],$=ac();$!==n;)x.push($),$=ac();return C=Ko(k,x),C}function ac(){var C,k,x,$,z,te,Tn,Qi;if(C=_,Ke(),Dg(),Ke(),k=bg(),k!==n){for(x=Rg(),x===n&&(x=null),$=[],z=lc();z!==n;)$.push(z),z=lc();for(z=Ke(),te=Yo(),te===n&&(te=null),Tn=[],Qi=uc();Qi!==n;)Tn.push(Qi),Qi=uc();C=Qo(k,x,$,te,Tn)}else _=C,C=n;return C}function Dg(){var C,k,x,$,z,te;for(w++,C=_,k=[],x=t.charAt(_),U.test(x)?_++:(x=n,w===0&&A(B));x!==n;)k.push(x),x=t.charAt(_),U.test(x)?_++:(x=n,w===0&&A(B));if(t.charCodeAt(_)===46?(x=u,_++):(x=n,w===0&&A(Ne)),x!==n){for($=Ke(),z=[],te=t.charAt(_),J.test(te)?_++:(te=n,w===0&&A(Nt));te!==n;)z.push(te),te=t.charAt(_),J.test(te)?_++:(te=n,w===0&&A(Nt));k=[k,x,$,z],C=k}else _=C,C=n;return w--,C===n&&(k=n,w===0&&A(_e)),C}function bg(){var C,k,x,$,z,te;if(w++,C=_,k=_,t.substr(_,5)===c?(x=c,_+=5):(x=n,w===0&&A(Ae)),x===n&&(t.substr(_,3)===d?(x=d,_+=3):(x=n,w===0&&A(Je)),x===n&&(t.substr(_,5)===f?(x=f,_+=5):(x=n,w===0&&A(qn)),x===n&&(t.substr(_,3)===p?(x=p,_+=3):(x=n,w===0&&A(Mo)),x===n))))if(x=_,$=t.charAt(_),L.test($)?_++:($=n,w===0&&A(Y)),$!==n){if(z=[],te=t.charAt(_),re.test(te)?_++:(te=n,w===0&&A(Yn)),te!==n)for(;te!==n;)z.push(te),te=t.charAt(_),re.test(te)?_++:(te=n,w===0&&A(Yn));else z=n;z!==n?($=[$,z],x=$):(_=x,x=n)}else _=x,x=n;return x!==n?($=t.charAt(_),he.test($)?_++:($=n,w===0&&A(Gt)),$===n&&($=null),x=[x,$],k=x):(_=k,k=n),k!==n?C=t.substring(C,_):C=k,w--,C===n&&(k=n,w===0&&A(xn)),C}function Rg(){var C,k,x;for(w++,C=_,k=[],x=t.charAt(_),We.test(x)?_++:(x=n,w===0&&A(Xn));x!==n;)k.push(x),k.length>=2?x=n:(x=t.charAt(_),We.test(x)?_++:(x=n,w===0&&A(Xn)));return k.length<1?(_=C,C=n):C=k,w--,C===n&&(k=n,w===0&&A(jo)),C}function lc(){var C,k,x,$,z;if(w++,C=_,Ke(),t.charCodeAt(_)===36?(k=g,_++):(k=n,w===0&&A(Wi)),k!==n){if(x=_,$=[],z=t.charAt(_),U.test(z)?_++:(z=n,w===0&&A(B)),z!==n)for(;z!==n;)$.push(z),z=t.charAt(_),U.test(z)?_++:(z=n,w===0&&A(B));else $=n;$!==n?x=t.substring(x,_):x=$,x!==n?C=Ur(x):(_=C,C=n)}else _=C,C=n;return w--,C===n&&w===0&&A(No),C}function Yo(){var C;return C=Ig(),C===n&&(C=Lg()),C}function Ig(){var C,k,x,$,z;if(w++,C=_,t.charCodeAt(_)===123?(k=S,_++):(k=n,w===0&&A(Nr)),k!==n){for(x=_,$=[],z=t.charAt(_),be.test(z)?_++:(z=n,w===0&&A(Ar));z!==n;)$.push(z),z=t.charAt(_),be.test(z)?_++:(z=n,w===0&&A(Ar));x=t.substring(x,_),t.charCodeAt(_)===125?($=O,_++):($=n,w===0&&A($r)),$!==n?C=Go(x):(_=C,C=n)}else _=C,C=n;return w--,C===n&&(k=n,w===0&&A(Ao)),C}function Lg(){var C,k,x,$,z;if(w++,C=_,t.charCodeAt(_)===59?(k=m,_++):(k=n,w===0&&A(zr)),k!==n){for(x=_,$=[],z=t.charAt(_),me.test(z)?_++:(z=n,w===0&&A(En));z!==n;)$.push(z),z=t.charAt(_),me.test(z)?_++:(z=n,w===0&&A(En));x=t.substring(x,_),C=nr(x)}else _=C,C=n;return w--,C===n&&(k=n,w===0&&A(bt)),C}function uc(){var C,k,x,$;return w++,C=_,Ke(),t.charCodeAt(_)===40?(k=h,_++):(k=n,w===0&&A(zo)),k!==n?(x=oc(),x!==n?(Ke(),t.charCodeAt(_)===41?($=y,_++):($=n,w===0&&A(Fo)),$!==n?C=Br(x):(_=C,C=n)):(_=C,C=n)):(_=C,C=n),w--,C===n&&w===0&&A($o),C}function Mg(){var C,k,x;return w++,C=_,t.substr(_,3)===E?(k=E,_+=3):(k=n,w===0&&A(Zn)),k===n&&(t.substr(_,3)===D?(k=D,_+=3):(k=n,w===0&&A(er)),k===n&&(t.substr(_,7)===b?(k=b,_+=7):(k=n,w===0&&A(tr)),k===n&&(t.charCodeAt(_)===42?(k=I,_++):(k=n,w===0&&A(Uo))))),k!==n?(Ke(),x=Yo(),x===n&&(x=null),C=qo(k,x)):(_=C,C=n),w--,C===n&&(k=n,w===0&&A(Jn)),C}function Ke(){var C,k;for(w++,C=[],k=t.charAt(_),Ce.test(k)?_++:(k=n,w===0&&A(Ki));k!==n;)C.push(k),k=t.charAt(_),Ce.test(k)?_++:(k=n,w===0&&A(Ki));return w--,k=n,w===0&&A(Bo),C}if(Oe=s(),e.peg$library)return{peg$result:Oe,peg$currPos:_,peg$FAILED:n,peg$maxFailExpected:ee,peg$maxFailPos:ot};if(Oe!==n&&_===t.length)return Oe;throw Oe!==n&&_<t.length&&A(at()),Eg(ee,ot<t.length?t.charAt(ot):null,ot<t.length?rc(ot,ot+1):rc(ot,ot))}/**
 * @license
 * Copyright (c) 2025, Jeff Hlywa (jhlywa@gmail.com)
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice,
 *    this list of conditions and the following disclaimer.
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
 * ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
 * LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
 * CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
 * SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
 * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
 * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
 * ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
 * POSSIBILITY OF SUCH DAMAGE.
 */const ws=0xffffffffffffffffn;function Ea(t,e){return(t<<e|t>>64n-e)&0xffffffffffffffffn}function Cf(t,e){return t*e&ws}function yv(t){return function(){let e=BigInt(t&ws),n=BigInt(t>>64n&ws);const r=Cf(Ea(Cf(e,5n),7n),9n);return n^=e,e=(Ea(e,24n)^n^n<<16n)&ws,n=Ea(n,37n),t=n<<64n|e,r}}const wo=yv(0xa187eb39cdcaed8f31c4b365b102e01en),Sv=Array.from({length:2},()=>Array.from({length:6},()=>Array.from({length:128},()=>wo()))),Cv=Array.from({length:8},()=>wo()),_v=Array.from({length:16},()=>wo()),Ta=wo(),Fe="w",lt="b",ve="p",Il="n",Ps="b",si="r",tn="q",xe="k",Oa="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class fs{constructor(e,n){ae(this,"color");ae(this,"from");ae(this,"to");ae(this,"piece");ae(this,"captured");ae(this,"promotion");ae(this,"flags");ae(this,"san");ae(this,"lan");ae(this,"before");ae(this,"after");const{color:r,piece:i,from:s,to:o,flags:a,captured:l,promotion:u}=n,c=we(s),d=we(o);this.color=r,this.piece=i,this.from=c,this.to=d,this.san=e._moveToSan(n,e._moves({legal:!0})),this.lan=c+d,this.before=e.fen(),e._makeMove(n),this.after=e.fen(),e._undoMove(),this.flags="";for(const f in W)W[f]&a&&(this.flags+=On[f]);l&&(this.captured=l),u&&(this.promotion=u,this.lan+=u)}isCapture(){return this.flags.indexOf(On.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(On.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(On.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(On.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(On.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(On.BIG_PAWN)>-1}}const Ie=-1,On={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q",NULL_MOVE:"-"},W={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64,NULL_MOVE:128},Ll={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},kv={WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},xv={...Ll,...kv},H={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},wa={b:[16,32,17,15],w:[-16,-32,-17,-15]},_f={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},Ev=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],Tv=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],Ov={p:1,n:2,b:4,r:8,q:16,k:32},wv="pnbrqkPNBRQK",kf=[Il,Ps,si,tn],Pv=7,Dv=6,bv=1,Rv=0,ds={[xe]:W.KSIDE_CASTLE,[tn]:W.QSIDE_CASTLE},Xt={w:[{square:H.a1,flag:W.QSIDE_CASTLE},{square:H.h1,flag:W.KSIDE_CASTLE}],b:[{square:H.a8,flag:W.QSIDE_CASTLE},{square:H.h8,flag:W.KSIDE_CASTLE}]},Iv={b:bv,w:Dv},Pa="--";function Nn(t){return t>>4}function Ai(t){return t&15}function hp(t){return"0123456789".indexOf(t)!==-1}function we(t){const e=Ai(t),n=Nn(t);return"abcdefgh".substring(e,e+1)+"87654321".substring(n,n+1)}function Jr(t){return t===Fe?lt:Fe}function Lv(t){const e=t.split(/\s+/);if(e.length!==6)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};const n=parseInt(e[5],10);if(isNaN(n)||n<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};const r=parseInt(e[4],10);if(isNaN(r)||r<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(e[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(e[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(e[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};const i=e[0].split("/");if(i.length!==8)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let o=0;o<i.length;o++){let a=0,l=!1;for(let u=0;u<i[o].length;u++)if(hp(i[o][u])){if(l)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};a+=parseInt(i[o][u],10),l=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[o][u]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};a+=1,l=!1}if(a!==8)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if(e[3][1]=="3"&&e[1]=="w"||e[3][1]=="6"&&e[1]=="b")return{ok:!1,error:"Invalid FEN: illegal en-passant square"};const s=[{color:"white",regex:/K/g},{color:"black",regex:/k/g}];for(const{color:o,regex:a}of s){if(!a.test(e[0]))return{ok:!1,error:`Invalid FEN: missing ${o} king`};if((e[0].match(a)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${o} kings`}}return Array.from(i[0]+i[7]).some(o=>o.toUpperCase()==="P")?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}function Mv(t,e){const n=t.from,r=t.to,i=t.piece;let s=0,o=0,a=0;for(let l=0,u=e.length;l<u;l++){const c=e[l].from,d=e[l].to,f=e[l].piece;i===f&&n!==c&&r===d&&(s++,Nn(n)===Nn(c)&&o++,Ai(n)===Ai(c)&&a++)}return s>0?o>0&&a>0?we(n):a>0?we(n).charAt(1):we(n).charAt(0):""}function Jt(t,e,n,r,i,s=void 0,o=W.NORMAL){const a=Nn(r);if(i===ve&&(a===Pv||a===Rv))for(let l=0;l<kf.length;l++){const u=kf[l];t.push({color:e,from:n,to:r,piece:i,captured:s,promotion:u,flags:o|W.PROMOTION})}else t.push({color:e,from:n,to:r,piece:i,captured:s,flags:o})}function xf(t){let e=t.charAt(0);return e>="a"&&e<="h"?t.match(/[a-h]\d.*[a-h]\d/)?void 0:ve:(e=e.toLowerCase(),e==="o"?xe:e)}function Da(t){return t.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}class ba{constructor(e=Oa,{skipValidation:n=!1}={}){ae(this,"_board",new Array(128));ae(this,"_turn",Fe);ae(this,"_header",{});ae(this,"_kings",{w:Ie,b:Ie});ae(this,"_epSquare",-1);ae(this,"_halfMoves",0);ae(this,"_moveNumber",0);ae(this,"_history",[]);ae(this,"_comments",{});ae(this,"_castling",{w:0,b:0});ae(this,"_hash",0n);ae(this,"_positionCount",new Map);this.load(e,{skipValidation:n})}clear({preserveHeaders:e=!1}={}){this._board=new Array(128),this._kings={w:Ie,b:Ie},this._turn=Fe,this._castling={w:0,b:0},this._epSquare=Ie,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...xv},this._hash=this._computeHash(),this._positionCount=new Map,this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:n=!1,preserveHeaders:r=!1}={}){let i=e.split(/\s+/);if(i.length>=2&&i.length<6){const a=["-","-","0","1"];e=i.concat(a.slice(-(6-i.length))).join(" ")}if(i=e.split(/\s+/),!n){const{ok:a,error:l}=Lv(e);if(!a)throw new Error(l)}const s=i[0];let o=0;this.clear({preserveHeaders:r});for(let a=0;a<s.length;a++){const l=s.charAt(a);if(l==="/")o+=8;else if(hp(l))o+=parseInt(l,10);else{const u=l<"a"?Fe:lt;this._put({type:l.toLowerCase(),color:u},we(o)),o++}}this._turn=i[1],i[2].indexOf("K")>-1&&(this._castling.w|=W.KSIDE_CASTLE),i[2].indexOf("Q")>-1&&(this._castling.w|=W.QSIDE_CASTLE),i[2].indexOf("k")>-1&&(this._castling.b|=W.KSIDE_CASTLE),i[2].indexOf("q")>-1&&(this._castling.b|=W.QSIDE_CASTLE),this._epSquare=i[3]==="-"?Ie:H[i[3]],this._halfMoves=parseInt(i[4],10),this._moveNumber=parseInt(i[5],10),this._hash=this._computeHash(),this._updateSetup(e),this._incPositionCount()}fen({forceEnpassantSquare:e=!1}={}){var o,a;let n=0,r="";for(let l=H.a8;l<=H.h1;l++){if(this._board[l]){n>0&&(r+=n,n=0);const{color:u,type:c}=this._board[l];r+=u===Fe?c.toUpperCase():c.toLowerCase()}else n++;l+1&136&&(n>0&&(r+=n),l!==H.h1&&(r+="/"),n=0,l+=8)}let i="";this._castling[Fe]&W.KSIDE_CASTLE&&(i+="K"),this._castling[Fe]&W.QSIDE_CASTLE&&(i+="Q"),this._castling[lt]&W.KSIDE_CASTLE&&(i+="k"),this._castling[lt]&W.QSIDE_CASTLE&&(i+="q"),i=i||"-";let s="-";if(this._epSquare!==Ie)if(e)s=we(this._epSquare);else{const l=this._epSquare+(this._turn===Fe?16:-16),u=[l+1,l-1];for(const c of u){if(c&136)continue;const d=this._turn;if(((o=this._board[c])==null?void 0:o.color)===d&&((a=this._board[c])==null?void 0:a.type)===ve){this._makeMove({color:d,from:c,to:this._epSquare,piece:ve,captured:ve,flags:W.EP_CAPTURE});const f=!this._isKingAttacked(d);if(this._undoMove(),f){s=we(this._epSquare);break}}}}return[r,this._turn,i,s,this._halfMoves,this._moveNumber].join(" ")}_pieceKey(e){if(!this._board[e])return 0n;const{color:n,type:r}=this._board[e],i={w:0,b:1}[n],s={p:0,n:1,b:2,r:3,q:4,k:5}[r];return Sv[i][s][e]}_epKey(){return this._epSquare===Ie?0n:Cv[this._epSquare&7]}_castlingKey(){const e=this._castling.w>>5|this._castling.b>>3;return _v[e]}_computeHash(){let e=0n;for(let n=H.a8;n<=H.h1;n++){if(n&136){n+=7;continue}this._board[n]&&(e^=this._pieceKey(n))}return e^=this._epKey(),e^=this._castlingKey(),this._turn==="b"&&(e^=Ta),e}_updateSetup(e){this._history.length>0||(e!==Oa?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(Oa)}get(e){return this._board[H[e]]}findPiece(e){var r;const n=[];for(let i=H.a8;i<=H.h1;i++){if(i&136){i+=7;continue}!this._board[i]||((r=this._board[i])==null?void 0:r.color)!==e.color||this._board[i].color===e.color&&this._board[i].type===e.type&&n.push(we(i))}return n}put({type:e,color:n},r){return this._put({type:e,color:n},r)?(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0):!1}_set(e,n){this._hash^=this._pieceKey(e),this._board[e]=n,this._hash^=this._pieceKey(e)}_put({type:e,color:n},r){if(wv.indexOf(e.toLowerCase())===-1||!(r in H))return!1;const i=H[r];if(e==xe&&!(this._kings[n]==Ie||this._kings[n]==i))return!1;const s=this._board[i];return s&&s.type===xe&&(this._kings[s.color]=Ie),this._set(i,{type:e,color:n}),e===xe&&(this._kings[n]=i),!0}_clear(e){this._hash^=this._pieceKey(e),delete this._board[e]}remove(e){const n=this.get(e);return this._clear(H[e]),n&&n.type===xe&&(this._kings[n.color]=Ie),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),n}_updateCastlingRights(){var r,i,s,o,a,l,u,c,d,f,p,g;this._hash^=this._castlingKey();const e=((r=this._board[H.e1])==null?void 0:r.type)===xe&&((i=this._board[H.e1])==null?void 0:i.color)===Fe,n=((s=this._board[H.e8])==null?void 0:s.type)===xe&&((o=this._board[H.e8])==null?void 0:o.color)===lt;(!e||((a=this._board[H.a1])==null?void 0:a.type)!==si||((l=this._board[H.a1])==null?void 0:l.color)!==Fe)&&(this._castling.w&=-65),(!e||((u=this._board[H.h1])==null?void 0:u.type)!==si||((c=this._board[H.h1])==null?void 0:c.color)!==Fe)&&(this._castling.w&=-33),(!n||((d=this._board[H.a8])==null?void 0:d.type)!==si||((f=this._board[H.a8])==null?void 0:f.color)!==lt)&&(this._castling.b&=-65),(!n||((p=this._board[H.h8])==null?void 0:p.type)!==si||((g=this._board[H.h8])==null?void 0:g.color)!==lt)&&(this._castling.b&=-33),this._hash^=this._castlingKey()}_updateEnPassantSquare(){var s,o;if(this._epSquare===Ie)return;const e=this._epSquare+(this._turn===Fe?-16:16),n=this._epSquare+(this._turn===Fe?16:-16),r=[n+1,n-1];if(this._board[e]!==null||this._board[this._epSquare]!==null||((s=this._board[n])==null?void 0:s.color)!==Jr(this._turn)||((o=this._board[n])==null?void 0:o.type)!==ve){this._hash^=this._epKey(),this._epSquare=Ie;return}const i=a=>{var l,u;return!(a&136)&&((l=this._board[a])==null?void 0:l.color)===this._turn&&((u=this._board[a])==null?void 0:u.type)===ve};r.some(i)||(this._hash^=this._epKey(),this._epSquare=Ie)}_attacked(e,n,r){const i=[];for(let s=H.a8;s<=H.h1;s++){if(s&136){s+=7;continue}if(this._board[s]===void 0||this._board[s].color!==e)continue;const o=this._board[s],a=s-n;if(a===0)continue;const l=a+119;if(Ev[l]&Ov[o.type]){if(o.type===ve){if(a>0&&o.color===Fe||a<=0&&o.color===lt)if(r)i.push(we(s));else return!0;continue}if(o.type==="n"||o.type==="k")if(r){i.push(we(s));continue}else return!0;const u=Tv[l];let c=s+u,d=!1;for(;c!==n;){if(this._board[c]!=null){d=!0;break}c+=u}if(!d)if(r){i.push(we(s));continue}else return!0}}return r?i:!1}attackers(e,n){return n?this._attacked(n,H[e],!0):this._attacked(this._turn,H[e],!0)}_isKingAttacked(e){const n=this._kings[e];return n===-1?!1:this._attacked(Jr(e),n)}hash(){return this._hash.toString(16)}isAttacked(e,n){return this._attacked(n,H[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&this._moves().length===0}isStalemate(){return!this.isCheck()&&this._moves().length===0}isInsufficientMaterial(){const e={b:0,n:0,r:0,q:0,k:0,p:0},n=[];let r=0,i=0;for(let s=H.a8;s<=H.h1;s++){if(i=(i+1)%2,s&136){s+=7;continue}const o=this._board[s];o&&(e[o.type]=o.type in e?e[o.type]+1:1,o.type===Ps&&n.push(i),r++)}if(r===2)return!0;if(r===3&&(e[Ps]===1||e[Il]===1))return!0;if(r===e[Ps]+2){let s=0;const o=n.length;for(let a=0;a<o;a++)s+=n[a];if(s===0||s===o)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this._hash)>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isDraw()}moves({verbose:e=!1,square:n=void 0,piece:r=void 0}={}){const i=this._moves({square:n,piece:r});return e?i.map(s=>new fs(this,s)):i.map(s=>this._moveToSan(s,i))}_moves({legal:e=!0,piece:n=void 0,square:r=void 0}={}){var p;const i=r?r.toLowerCase():void 0,s=n==null?void 0:n.toLowerCase(),o=[],a=this._turn,l=Jr(a);let u=H.a8,c=H.h1,d=!1;if(i)if(i in H)u=c=H[i],d=!0;else return[];for(let g=u;g<=c;g++){if(g&136){g+=7;continue}if(!this._board[g]||this._board[g].color===l)continue;const{type:S}=this._board[g];let O;if(S===ve){if(s&&s!==S)continue;O=g+wa[a][0],this._board[O]||(Jt(o,a,g,O,ve),O=g+wa[a][1],Iv[a]===Nn(g)&&!this._board[O]&&Jt(o,a,g,O,ve,void 0,W.BIG_PAWN));for(let m=2;m<4;m++)O=g+wa[a][m],!(O&136)&&(((p=this._board[O])==null?void 0:p.color)===l?Jt(o,a,g,O,ve,this._board[O].type,W.CAPTURE):O===this._epSquare&&Jt(o,a,g,O,ve,ve,W.EP_CAPTURE))}else{if(s&&s!==S)continue;for(let m=0,h=_f[S].length;m<h;m++){const y=_f[S][m];for(O=g;O+=y,!(O&136);){if(!this._board[O])Jt(o,a,g,O,S);else{if(this._board[O].color===a)break;Jt(o,a,g,O,S,this._board[O].type,W.CAPTURE);break}if(S===Il||S===xe)break}}}}if((s===void 0||s===xe)&&(!d||c===this._kings[a])){if(this._castling[a]&W.KSIDE_CASTLE){const g=this._kings[a],S=g+2;!this._board[g+1]&&!this._board[S]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g+1)&&!this._attacked(l,S)&&Jt(o,a,this._kings[a],S,xe,void 0,W.KSIDE_CASTLE)}if(this._castling[a]&W.QSIDE_CASTLE){const g=this._kings[a],S=g-2;!this._board[g-1]&&!this._board[g-2]&&!this._board[g-3]&&!this._attacked(l,this._kings[a])&&!this._attacked(l,g-1)&&!this._attacked(l,S)&&Jt(o,a,this._kings[a],S,xe,void 0,W.QSIDE_CASTLE)}}if(!e||this._kings[a]===-1)return o;const f=[];for(let g=0,S=o.length;g<S;g++)this._makeMove(o[g]),this._isKingAttacked(a)||f.push(o[g]),this._undoMove();return f}move(e,{strict:n=!1}={}){let r=null;if(typeof e=="string")r=this._moveFromSan(e,n);else if(e===null)r=this._moveFromSan(Pa,n);else if(typeof e=="object"){const s=this._moves();for(let o=0,a=s.length;o<a;o++)if(e.from===we(s[o].from)&&e.to===we(s[o].to)&&(!("promotion"in s[o])||e.promotion===s[o].promotion)){r=s[o];break}}if(!r)throw typeof e=="string"?new Error(`Invalid move: ${e}`):new Error(`Invalid move: ${JSON.stringify(e)}`);if(this.isCheck()&&r.flags&W.NULL_MOVE)throw new Error("Null move not allowed when in check");const i=new fs(this,r);return this._makeMove(r),this._incPositionCount(),i}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_movePiece(e,n){this._hash^=this._pieceKey(e),this._board[n]=this._board[e],delete this._board[e],this._hash^=this._pieceKey(n)}_makeMove(e){var i,s,o,a;const n=this._turn,r=Jr(n);if(this._push(e),e.flags&W.NULL_MOVE){n===lt&&this._moveNumber++,this._halfMoves++,this._turn=r,this._epSquare=Ie;return}if(this._hash^=this._epKey(),this._hash^=this._castlingKey(),e.captured&&(this._hash^=this._pieceKey(e.to)),this._movePiece(e.from,e.to),e.flags&W.EP_CAPTURE&&(this._turn===lt?this._clear(e.to-16):this._clear(e.to+16)),e.promotion&&(this._clear(e.to),this._set(e.to,{type:e.promotion,color:n})),this._board[e.to].type===xe){if(this._kings[n]=e.to,e.flags&W.KSIDE_CASTLE){const l=e.to-1,u=e.to+1;this._movePiece(u,l)}else if(e.flags&W.QSIDE_CASTLE){const l=e.to+1,u=e.to-2;this._movePiece(u,l)}this._castling[n]=0}if(this._castling[n]){for(let l=0,u=Xt[n].length;l<u;l++)if(e.from===Xt[n][l].square&&this._castling[n]&Xt[n][l].flag){this._castling[n]^=Xt[n][l].flag;break}}if(this._castling[r]){for(let l=0,u=Xt[r].length;l<u;l++)if(e.to===Xt[r][l].square&&this._castling[r]&Xt[r][l].flag){this._castling[r]^=Xt[r][l].flag;break}}if(this._hash^=this._castlingKey(),e.flags&W.BIG_PAWN){let l;n===lt?l=e.to-16:l=e.to+16,!(e.to-1&136)&&((i=this._board[e.to-1])==null?void 0:i.type)===ve&&((s=this._board[e.to-1])==null?void 0:s.color)===r||!(e.to+1&136)&&((o=this._board[e.to+1])==null?void 0:o.type)===ve&&((a=this._board[e.to+1])==null?void 0:a.color)===r?(this._epSquare=l,this._hash^=this._epKey()):this._epSquare=Ie}else this._epSquare=Ie;e.piece===ve?this._halfMoves=0:e.flags&(W.CAPTURE|W.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,n===lt&&this._moveNumber++,this._turn=r,this._hash^=Ta}undo(){const e=this._hash,n=this._undoMove();if(n){const r=new fs(this,n);return this._decPositionCount(e),r}return null}_undoMove(){const e=this._history.pop();if(e===void 0)return null;this._hash^=this._epKey(),this._hash^=this._castlingKey();const n=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber,this._hash^=this._epKey(),this._hash^=this._castlingKey(),this._hash^=Ta;const r=this._turn,i=Jr(r);if(n.flags&W.NULL_MOVE)return n;if(this._movePiece(n.to,n.from),n.piece&&(this._clear(n.from),this._set(n.from,{type:n.piece,color:r})),n.captured)if(n.flags&W.EP_CAPTURE){let s;r===lt?s=n.to-16:s=n.to+16,this._set(s,{type:ve,color:i})}else this._set(n.to,{type:n.captured,color:i});if(n.flags&(W.KSIDE_CASTLE|W.QSIDE_CASTLE)){let s,o;n.flags&W.KSIDE_CASTLE?(s=n.to+1,o=n.to-1):(s=n.to-2,o=n.to+1),this._movePiece(o,s)}return n}pgn({newline:e=`
`,maxWidth:n=0}={}){const r=[];let i=!1;for(const f in this._header)this._header[f]&&r.push(`[${f} "${this._header[f]}"]`+e),i=!0;i&&this._history.length&&r.push(e);const s=f=>{const p=this._comments[this.fen()];if(typeof p<"u"){const g=f.length>0?" ":"";f=`${f}${g}{${p}}`}return f},o=[];for(;this._history.length>0;)o.push(this._undoMove());const a=[];let l="";for(o.length===0&&a.push(s(""));o.length>0;){l=s(l);const f=o.pop();if(!f)break;if(!this._history.length&&f.color==="b"){const p=`${this._moveNumber}. ...`;l=l?`${l} ${p}`:p}else f.color==="w"&&(l.length&&a.push(l),l=this._moveNumber+".");l=l+" "+this._moveToSan(f,this._moves({legal:!0})),this._makeMove(f)}if(l.length&&a.push(s(l)),a.push(this._header.Result||"*"),n===0)return r.join("")+a.join(" ");const u=function(){return r.length>0&&r[r.length-1]===" "?(r.pop(),!0):!1},c=function(f,p){for(const g of p.split(" "))if(g){if(f+g.length>n){for(;u();)f--;r.push(e),f=0}r.push(g),f+=g.length,r.push(" "),f++}return u()&&f--,f};let d=0;for(let f=0;f<a.length;f++){if(d+a[f].length>n&&a[f].includes("{")){d=c(d,a[f]);continue}d+a[f].length>n&&f!==0?(r[r.length-1]===" "&&r.pop(),r.push(e),d=0):f!==0&&(r.push(" "),d++),r.push(a[f]),d+=a[f].length}return r.join("")}header(...e){for(let n=0;n<e.length;n+=2)typeof e[n]=="string"&&typeof e[n+1]=="string"&&(this._header[e[n]]=e[n+1]);return this._header}setHeader(e,n){return this._header[e]=n??Ll[e]??null,this.getHeaders()}removeHeader(e){return e in this._header?(this._header[e]=Ll[e]||null,!0):!1}getHeaders(){const e={};for(const[n,r]of Object.entries(this._header))r!==null&&(e[n]=r);return e}loadPgn(e,{strict:n=!1,newlineChar:r=`\r?
`}={}){r!==`\r?
`&&(e=e.replace(new RegExp(r,"g"),`
`));const i=vv(e);this.reset();const s=i.headers;let o="";for(const u in s)u.toLowerCase()==="fen"&&(o=s[u]),this.header(u,s[u]);if(!n)o&&this.load(o,{preserveHeaders:!0});else if(s.SetUp==="1"){if(!("FEN"in s))throw new Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(s.FEN,{preserveHeaders:!0})}let a=i.root;for(;a;){if(a.move){const u=this._moveFromSan(a.move,n);if(u==null)throw new Error(`Invalid move in PGN: ${a.move}`);this._makeMove(u),this._incPositionCount()}a.comment!==void 0&&(this._comments[this.fen()]=a.comment),a=a.variations[0]}const l=i.result;l&&Object.keys(this._header).length&&this._header.Result!==l&&this.setHeader("Result",l)}_moveToSan(e,n){let r="";if(e.flags&W.KSIDE_CASTLE)r="O-O";else if(e.flags&W.QSIDE_CASTLE)r="O-O-O";else{if(e.flags&W.NULL_MOVE)return Pa;if(e.piece!==ve){const i=Mv(e,n);r+=e.piece.toUpperCase()+i}e.flags&(W.CAPTURE|W.EP_CAPTURE)&&(e.piece===ve&&(r+=we(e.from)[0]),r+="x"),r+=we(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,n=!1){let r=Da(e);if(n||(r==="0-0"?r="O-O":r==="0-0-0"&&(r="O-O-O")),r==Pa)return{color:this._turn,from:0,to:0,piece:"k",flags:W.NULL_MOVE};let i=xf(r),s=this._moves({legal:!0,piece:i});for(let f=0,p=s.length;f<p;f++)if(r===Da(this._moveToSan(s[f],s)))return s[f];if(n)return null;let o,a,l,u,c,d=!1;if(a=r.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/),a?(o=a[1],l=a[2],u=a[3],c=a[4],l.length==1&&(d=!0)):(a=r.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/),a&&(o=a[1],l=a[2],u=a[3],c=a[4],l.length==1&&(d=!0))),i=xf(r),s=this._moves({legal:!0,piece:o||i}),!u)return null;for(let f=0,p=s.length;f<p;f++)if(l){if((!o||o.toLowerCase()==s[f].piece)&&H[l]==s[f].from&&H[u]==s[f].to&&(!c||c.toLowerCase()==s[f].promotion))return s[f];if(d){const g=we(s[f].from);if((!o||o.toLowerCase()==s[f].piece)&&H[u]==s[f].to&&(l==g[0]||l==g[1])&&(!c||c.toLowerCase()==s[f].promotion))return s[f]}}else if(r===Da(this._moveToSan(s[f],s)).replace("x",""))return s[f];return null}ascii(){let e=`   +------------------------+
`;for(let n=H.a8;n<=H.h1;n++){if(Ai(n)===0&&(e+=" "+"87654321"[Nn(n)]+" |"),this._board[n]){const r=this._board[n].type,s=this._board[n].color===Fe?r.toUpperCase():r.toLowerCase();e+=" "+s+" "}else e+=" . ";n+1&136&&(e+=`|
`,n+=8)}return e+=`   +------------------------+
`,e+="     a  b  c  d  e  f  g  h",e}perft(e){const n=this._moves({legal:!1});let r=0;const i=this._turn;for(let s=0,o=n.length;s<o;s++)this._makeMove(n[s]),this._isKingAttacked(i)||(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}setTurn(e){return this._turn==e?!1:(this.move("--"),!0)}turn(){return this._turn}board(){const e=[];let n=[];for(let r=H.a8;r<=H.h1;r++)this._board[r]==null?n.push(null):n.push({square:we(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(n),n=[],r+=8);return e}squareColor(e){if(e in H){const n=H[e];return(Nn(n)+Ai(n))%2===0?"light":"dark"}return null}history({verbose:e=!1}={}){const n=[],r=[];for(;this._history.length>0;)n.push(this._undoMove());for(;;){const i=n.pop();if(!i)break;e?r.push(new fs(this,i)):r.push(this._moveToSan(i,this._moves())),this._makeMove(i)}return r}_getPositionCount(e){return this._positionCount.get(e)??0}_incPositionCount(){this._positionCount.set(this._hash,(this._positionCount.get(this._hash)??0)+1)}_decPositionCount(e){const n=this._positionCount.get(e)??0;n===1?this._positionCount.delete(e):this._positionCount.set(e,n-1)}_pruneComments(){const e=[],n={},r=i=>{i in this._comments&&(n[i]=this._comments[i])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){const i=e.pop();if(!i)break;this._makeMove(i),r(this.fen())}this._comments=n}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){const e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{const n=this._comments[e];return delete this._comments[e],{fen:e,comment:n}})}setCastlingRights(e,n){for(const i of[xe,tn])n[i]!==void 0&&(n[i]?this._castling[e]|=ds[i]:this._castling[e]&=~ds[i]);this._updateCastlingRights();const r=this.getCastlingRights(e);return(n[xe]===void 0||n[xe]===r[xe])&&(n[tn]===void 0||n[tn]===r[tn])}getCastlingRights(e){return{[xe]:(this._castling[e]&ds[xe])!==0,[tn]:(this._castling[e]&ds[tn])!==0}}moveNumber(){return this._moveNumber}}function jv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}const $i="abcdefgh".split(""),Ds={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},Nv={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},Av={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},$v=[7,6,5,4,3,2,1,0],zv=[0,1,2,3,4,5,6,7],Ef={wP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),v.jsx("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),v.jsx("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),v.jsx("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),v.jsx("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsx("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),v.jsx("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),v.jsx("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[v.jsx("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),v.jsx("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),v.jsx("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),v.jsx("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[v.jsx("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),v.jsx("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),v.jsx("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),v.jsx("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),v.jsx("circle",{cx:"6",cy:"12",r:"2"}),v.jsx("circle",{cx:"14",cy:"9",r:"2"}),v.jsx("circle",{cx:"22.5",cy:"8",r:"2"}),v.jsx("circle",{cx:"31",cy:"9",r:"2"}),v.jsx("circle",{cx:"39",cy:"12",r:"2"}),v.jsx("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),v.jsxs("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[v.jsx("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),v.jsx("path",{d:"M 12.5,31.5 L 32.5,31.5"}),v.jsx("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),v.jsx("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:v.jsxs("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[v.jsx("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),v.jsx("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),v.jsx("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),v.jsx("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),v.jsx("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function Ml(t,e,n){const r=e/8,i=t==="white"?Nv:Av,s=t==="white"?$v:zv,o=i[n[0]]*r+r/2,a=s[parseInt(n[1],10)-1]*r+r/2;return{x:o,y:a}}function Tf(t){let e=!1;return Object.keys(Ds).forEach(n=>{t[n]!==Ds[n]&&(e=!0)}),Object.keys(t).forEach(n=>{Ds[n]!==t[n]&&(e=!0)}),e}function Fv(t,e){const n={removed:{},added:{}};return Object.keys(t).forEach(r=>{e[r]!==t[r]&&(n.removed[r]=t[r])}),Object.keys(e).forEach(r=>{t[r]!==e[r]&&(n.added[r]=e[r])}),n}function Of(t){return t==="start"?Ds:typeof t=="string"?Uv(t):t}function Uv(t){if(!Bv(t))return{};t=t.replace(/ .+$/,"");const e=t.split("/"),n={};let r=8;for(let i=0;i<8;i++){const s=e[i].split("");let o=0;for(let a=0;a<s.length;a++)if(s[a].search(/[1-8]/)!==-1){const l=parseInt(s[a],10);o=o+l}else{const l=$i[o]+r;n[l]=Vv(s[a]),o=o+1}r=r-1}return n}function Bv(t){t=t.replace(/ .+$/,""),t=Hv(t);const e=t.split("/");if(e.length!==8)return!1;for(let n=0;n<8;n++)if(e[n].length!==8||e[n].search(/[^kqrnbpKQRNBP1]/)!==-1)return!1;return!0}function Hv(t){return t.replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")}function Vv(t){return t.toLowerCase()===t?"b"+t.toUpperCase():"w"+t.toUpperCase()}const Wv=(t,e=!0,n,r)=>{const[i,s]=T.useState([]),[o,a]=T.useState([]),[l,u]=T.useState();T.useEffect(()=>{Array.isArray(t)&&(c(),s(t==null?void 0:t.filter(g=>g[0]!==g[1])))},[t]),T.useEffect(()=>{n==null||n(o)},[o]);function c(){a([]),u(void 0)}const d=(g,S)=>{e&&u([g,S,r])},f=[...o,...i];return{arrows:f,newArrow:l,clearArrows:c,drawNewArrow:d,setArrows:a,onArrowDrawEnd:(g,S)=>{if(g===S||!e)return;let O;const m=[g,S,r];f.every(([y,E])=>!(y===g&&E===S))?O=[...o,m]:O=o.filter(([y,E])=>!(y===g&&E===S)),u(void 0),a(O)}}},pp=T.createContext({}),Qt=()=>T.useContext(pp),Kv=T.forwardRef(({allowDragOutsideBoard:t=!0,animationDuration:e=300,areArrowsAllowed:n=!0,arePiecesDraggable:r=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:o="white",boardWidth:a,children:l,clearPremovesOnRightClick:u=!0,customArrows:c,customArrowColor:d="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:p,customDarkSquareStyle:g={backgroundColor:"#B58863"},customDropSquareStyle:S={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:O={backgroundColor:"#F0D9B5"},customPieces:m,customPremoveDarkSquareStyle:h={backgroundColor:"#A42323"},customPremoveLightSquareStyle:y={backgroundColor:"#BD2828"},customSquare:E="div",customSquareStyles:D,dropOffBoardAction:b="snapback",id:I=0,isDraggablePiece:L=()=>!0,getPositionObject:G=()=>{},onArrowsChange:U=()=>{},onDragOverSquare:J=()=>{},onMouseOutSquare:re=()=>{},onMouseOverSquare:he=()=>{},onPieceClick:We=()=>{},onPieceDragBegin:be=()=>{},onPieceDragEnd:me=()=>{},onPieceDrop:Ce=()=>!0,onPieceDropOffBoard:R=()=>{},onPromotionCheck:F=(Ae,Je,qn)=>(qn==="wP"&&Ae[1]==="7"&&Je[1]==="8"||qn==="bP"&&Ae[1]==="2"&&Je[1]==="1")&&Math.abs(Ae.charCodeAt(0)-Je.charCodeAt(0))<=1,onPromotionPieceSelect:V=()=>!0,onSparePieceDrop:Z=()=>!0,onSquareClick:N=()=>{},onSquareRightClick:Y=()=>{},position:ue="start",promotionDialogVariant:Re="default",promotionToSquare:_e=null,showBoardNotation:B=!0,showPromotionDialog:Ne=!1,snapToCursor:Nt=!0},xn)=>{const[Ae,Je]=T.useState(Of(ue)),[qn,Mo]=T.useState({removed:{},added:{}}),[Yn,Gt]=T.useState(void 0),[jo,Xn]=T.useState(Ne&&!s),[No,Wi]=T.useState(null),[Ao,Nr]=T.useState(_e),[Ar,$r]=T.useState([]),bt=T.useRef(Ar),[zr,En]=T.useState(),[$o,zo]=T.useState(Object.assign(Object.assign({},Ef),m)),[Fo,Jn]=T.useState(!1),Zn=T.useRef(),[er,tr]=T.useState(!1),[Uo,Bo]=T.useState(null);T.useImperativeHandle(xn,()=>({clearPremoves(ee=!0){nr(ee)}})),T.useEffect(()=>{zo(Object.assign(Object.assign({},Ef),m))},[m]),T.useEffect(()=>{Xn(Ne),Nr(_e)},[_e,Ne]),T.useEffect(()=>{var ee,w,Oe;Br();const q=Of(ue),ke=Fv(Ae,q),at=((ee=Object.keys(ke.added))===null||ee===void 0?void 0:ee.length)<=2?(Oe=(w=Object.entries(ke.added))===null||w===void 0?void 0:w[0])===null||Oe===void 0?void 0:Oe[1][0]:void 0;if(er)Je(q),tr(!1),i&&Ur(at),Zn.current&&clearTimeout(Zn.current);else if(Fo)Je(q),tr(!1),i&&Ur(at);else{Tf(q)&&Yn!==void 0?Gt(at):Tf(q)?Gt(void 0):Gt("b"),Mo(ke),tr(!0);const Ze=setTimeout(()=>{Je(q),tr(!1),i&&Ur(at)},e);Zn.current=Ze}return Jn(!1),G(q),Fr(),()=>{clearTimeout(Zn.current)}},[ue]);const{arrows:Ki,newArrow:Ho,clearArrows:Fr,drawNewArrow:Vo,onArrowDrawEnd:Wo}=Wv(c,n,U,d);function Ko(ee,w,Oe,q){if(ee===w)return;if(Fr(),i&&er||i&&(Yn===Oe[0]||bt.current.filter(at=>at.piece[0]===Oe[0]).length>0)){const at=[...bt.current];at.push({sourceSq:ee,targetSq:w,piece:Oe}),bt.current=at,$r([...at]),Br();return}if(!i&&er)return;const ke=Object.assign({},Ae);Jn(!!q),Gt(Oe[0]),Ce.length?Ce(ee,w,Oe)||(nr(),Jn(!1)):(delete ke[ee],ke[w]=Oe,Je(ke)),Br(),G(ke)}function Qo(ee){const w=Object.assign({},Ae);delete w[ee],Je(w),G(w)}function Ur(ee){if(bt.current.length===0)return;const w=bt.current[0];if(w.piece[0]!==void 0&&w.piece[0]!==ee&&Ce.length)if(Gt(w.piece[0]),Jn(!0),Ce(w.sourceSq,w.targetSq,w.piece)){const q=[...bt.current];q.shift(),bt.current=q,$r([...q])}else nr()}function Go(ee,w){if(!Z(ee,w))return;const q=Object.assign({},Ae);q[w]=ee,Je(q),G(q)}function nr(ee=!0){ee&&Gt(void 0),bt.current=[],$r([])}function Br(){Wi(null),Nr(null),Xn(!1)}function qo(ee){En(ee)}function _(ee){if(zr){if(zr===ee){En(void 0),u&&nr(!1),Y(ee);return}}else En(void 0)}function qt(){En(void 0)}const ot={allowDragOutsideBoard:t,animationDuration:e,arePiecesDraggable:r,arePremovesAllowed:i,arrows:Ki,autoPromoteToQueen:s,boardOrientation:o,boardWidth:a,chessPieces:$o,clearArrows:Fr,clearCurrentRightClickDown:qt,currentPosition:Ae,currentRightClickDown:zr,customArrowColor:d,customBoardStyle:f,customDarkSquareStyle:g,customDropSquareStyle:S,customLightSquareStyle:O,customNotationStyle:p,customPremoveDarkSquareStyle:h,customPremoveLightSquareStyle:y,customSquare:E,customSquareStyles:D,deletePieceFromSquare:Qo,drawNewArrow:Vo,dropOffBoardAction:b,handleSetPosition:Ko,handleSparePieceDrop:Go,id:I,isDraggablePiece:L,isWaitingForAnimation:er,lastPieceColour:Yn,lastSquareDraggedOver:Uo,newArrow:Ho,onArrowDrawEnd:Wo,onDragOverSquare:J,onMouseOutSquare:re,onMouseOverSquare:he,onPieceClick:We,onPieceDragBegin:be,onPieceDragEnd:me,onPieceDrop:Ce,onPieceDropOffBoard:R,onPromotionCheck:F,onPromotionPieceSelect:V,onRightClickDown:qo,onRightClickUp:_,onSparePieceDrop:Z,onSquareClick:N,positionDifferences:qn,premoves:Ar,promoteFromSquare:No,promoteToSquare:Ao,promotionDialogVariant:Re,setLastSquareDraggedOver:Bo,setPromoteFromSquare:Wi,setPromoteToSquare:Nr,setShowPromoteDialog:Xn,showBoardNotation:B,showPromoteDialog:jo,snapToCursor:Nt};return v.jsx(pp.Provider,Object.assign({value:ot},{children:l}))});function Qv({row:t,col:e}){const{boardOrientation:n,boardWidth:r,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:o}=Qt(),a=s.backgroundColor,l=i.backgroundColor,u=e===0,c=t===7,d=u&&c;function f(){return n==="white"?8-t:t+1}function p(){return n==="black"?$i[7-e]:$i[e]}function g(){return v.jsxs(v.Fragment,{children:[v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),Pf(r,o))},{children:f()})),v.jsx("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:a}),wf(r,o))},{children:p()}))]})}function S(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2!==0?l:a}),wf(r,o))},{children:p()}))}function O(){return v.jsx("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},n==="black"?{color:t%2===0?l:a}:{color:t%2===0?l:a}),Pf(r,o))},{children:f()}))}return d?g():c?S():u?O():null}const wf=(t,e)=>Object.assign({alignSelf:"flex-end",paddingLeft:t/8-t/48,fontSize:t/48},e),Pf=(t,e)=>Object.assign({alignSelf:"flex-start",paddingRight:t/8-t/48,fontSize:t/48},e),gp=T.createContext({dragDropManager:void 0});function gt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Df=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),bf=function(){return Math.random().toString(36).substring(7).split("").join(".")},Rf={INIT:"@@redux/INIT"+bf(),REPLACE:"@@redux/REPLACE"+bf()};function Gv(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function mp(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gt(1));return n(mp)(t,e)}if(typeof t!="function")throw new Error(gt(2));var i=t,s=e,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(gt(3));return s}function d(S){if(typeof S!="function")throw new Error(gt(4));if(l)throw new Error(gt(5));var O=!0;return u(),a.push(S),function(){if(O){if(l)throw new Error(gt(6));O=!1,u();var h=a.indexOf(S);a.splice(h,1),o=null}}}function f(S){if(!Gv(S))throw new Error(gt(7));if(typeof S.type>"u")throw new Error(gt(8));if(l)throw new Error(gt(9));try{l=!0,s=i(s,S)}finally{l=!1}for(var O=o=a,m=0;m<O.length;m++){var h=O[m];h()}return S}function p(S){if(typeof S!="function")throw new Error(gt(10));i=S,f({type:Rf.REPLACE})}function g(){var S,O=d;return S={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(gt(11));function y(){h.next&&h.next(c())}y();var E=O(y);return{unsubscribe:E}}},S[Df]=function(){return this},S}return f({type:Rf.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:p},r[Df]=g,r}function K(t,e,...n){if(qv()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function qv(){return typeof process<"u"&&!0}function Yv(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function Xv(t,e){return t.filter(n=>n!==e)}function vp(t){return typeof t=="object"}function Jv(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function Zv(t,e){return t.filter(n=>e.indexOf(n)>-1)}const Ku="dnd-core/INIT_COORDS",Po="dnd-core/BEGIN_DRAG",Qu="dnd-core/PUBLISH_DRAG_SOURCE",Do="dnd-core/HOVER",bo="dnd-core/DROP",Ro="dnd-core/END_DRAG";function If(t,e){return{type:Ku,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const ey={type:Ku,payload:{clientOffset:null,sourceClientOffset:null}};function ty(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch(If(s)),ny(n,a,l);const u=sy(n,a);if(u==null){t.dispatch(ey);return}let c=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");ry(o),c=o(u)}t.dispatch(If(s,c));const f=l.getSource(u).beginDrag(a,u);if(f==null)return;iy(f),l.pinSource(u);const p=l.getSourceType(u);return{type:Po,payload:{itemType:p,item:f,sourceId:u,clientOffset:s||null,sourceClientOffset:c||null,isSourcePublic:!!i}}}}function ny(t,e,n){K(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){K(n.getSource(r),"Expected sourceIds to be registered.")})}function ry(t){K(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function iy(t){K(vp(t),"Item must be an object.")}function sy(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function oy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){oy(t,i,n[i])})}return t}function ly(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();uy(r),dy(r).forEach((o,a)=>{const l=cy(o,a,i,r),u={type:bo,payload:{dropResult:ay({},n,l)}};t.dispatch(u)})}}function uy(t){K(t.isDragging(),"Cannot call drop while not dragging."),K(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function cy(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return fy(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function fy(t){K(typeof t>"u"||vp(t),"Drop result must either be an object or undefined.")}function dy(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function hy(t){return function(){const n=t.getMonitor(),r=t.getRegistry();py(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Ro}}}function py(t){K(t.isDragging(),"Cannot call endDrag while not dragging.")}function jl(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function gy(t){return function(n,{clientOffset:r}={}){my(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return yy(i,o,a),vy(i,s,o),Sy(i,s,o),{type:Do,payload:{targetIds:i,clientOffset:r||null}}}}function my(t){K(Array.isArray(t),"Expected targetIds to be an array.")}function vy(t,e,n){K(e.isDragging(),"Cannot call hover while not dragging."),K(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];K(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);K(s,"Expected targetIds to be registered.")}}function yy(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);jl(s,n)||t.splice(r,1)}}function Sy(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function Cy(t){return function(){if(t.getMonitor().isDragging())return{type:Qu}}}function _y(t){return{beginDrag:ty(t),publishDragSource:Cy(t),hover:gy(t),drop:ly(t),endDrag:hy(t)}}class ky{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=_y(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function xy(t,e){return{x:t.x+e.x,y:t.y+e.y}}function yp(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ey(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:yp(xy(e,r),n)}function Ty(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:yp(e,n)}const mi=[],Gu=[];mi.__IS_NONE__=!0;Gu.__IS_ALL__=!0;function Oy(t,e){return t===mi?!1:t===Gu||typeof e>"u"?!0:Zv(e,t).length>0}class wy{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;K(typeof e=="function","listener must be a function."),K(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!Oy(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){K(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return K(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(K(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return jl(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(K(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!jl(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ey(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Ty(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const Lf=typeof global<"u"?global:self,Sp=Lf.MutationObserver||Lf.WebKitMutationObserver;function Cp(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function Py(t){let e=1;const n=new Sp(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const Dy=typeof Sp=="function"?Py:Cp;class by{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Dy(this.flush),this.requestErrorThrow=Cp(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Ry{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Iy{create(e){const n=this.freeTasks,r=n.length?n.pop():new Ry(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const _p=new by,Ly=new Iy(_p.registerPendingError);function My(t){_p.enqueueTask(Ly.create(t))}const qu="dnd-core/ADD_SOURCE",Yu="dnd-core/ADD_TARGET",Xu="dnd-core/REMOVE_SOURCE",Io="dnd-core/REMOVE_TARGET";function jy(t){return{type:qu,payload:{sourceId:t}}}function Ny(t){return{type:Yu,payload:{targetId:t}}}function Ay(t){return{type:Xu,payload:{sourceId:t}}}function $y(t){return{type:Io,payload:{targetId:t}}}function zy(t){K(typeof t.canDrag=="function","Expected canDrag to be a function."),K(typeof t.beginDrag=="function","Expected beginDrag to be a function."),K(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Fy(t){K(typeof t.canDrop=="function","Expected canDrop to be a function."),K(typeof t.hover=="function","Expected hover to be a function."),K(typeof t.drop=="function","Expected beginDrag to be a function.")}function Nl(t,e){if(e&&Array.isArray(t)){t.forEach(n=>Nl(n,!1));return}K(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var yt;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(yt||(yt={}));let Uy=0;function By(){return Uy++}function Hy(t){const e=By().toString();switch(t){case yt.SOURCE:return`S${e}`;case yt.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function Mf(t){switch(t[0]){case"S":return yt.SOURCE;case"T":return yt.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function jf(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class Vy{addSource(e,n){Nl(e),zy(n);const r=this.addHandler(yt.SOURCE,e,n);return this.store.dispatch(jy(r)),r}addTarget(e,n){Nl(e,!0),Fy(n);const r=this.addHandler(yt.TARGET,e,n);return this.store.dispatch(Ny(r)),r}containsHandler(e){return jf(this.dragSources,e)||jf(this.dropTargets,e)}getSource(e,n=!1){return K(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return K(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return K(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return K(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Mf(e)===yt.SOURCE}isTargetId(e){return Mf(e)===yt.TARGET}removeSource(e){K(this.getSource(e),"Expected an existing source."),this.store.dispatch(Ay(e)),My(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){K(this.getTarget(e),"Expected an existing target."),this.store.dispatch($y(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);K(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){K(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=Hy(e);return this.types.set(i,n),e===yt.SOURCE?this.dragSources.set(i,r):e===yt.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Wy=(t,e)=>t===e;function Ky(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Qy(t,e,n=Wy){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function Gy(t=mi,e){switch(e.type){case Do:break;case qu:case Yu:case Io:case Xu:return mi;case Po:case Qu:case Ro:case bo:default:return Gu}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=Jv(n,r);if(!(i.length>0||!Qy(n,r)))return mi;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function qy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){qy(t,i,n[i])})}return t}const Nf={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Xy(t=Nf,e){const{payload:n}=e;switch(e.type){case Ku:case Po:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Do:return Ky(t.clientOffset,n.clientOffset)?t:Yy({},t,{clientOffset:n.clientOffset});case Ro:case bo:return Nf;default:return t}}function Jy(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ir(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Jy(t,i,n[i])})}return t}const Zy={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function e1(t=Zy,e){const{payload:n}=e;switch(e.type){case Po:return ir({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Qu:return ir({},t,{isSourcePublic:!0});case Do:return ir({},t,{targetIds:n.targetIds});case Io:return t.targetIds.indexOf(n.targetId)===-1?t:ir({},t,{targetIds:Xv(t.targetIds,n.targetId)});case bo:return ir({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Ro:return ir({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function t1(t=0,e){switch(e.type){case qu:case Yu:return t+1;case Xu:case Io:return t-1;default:return t}}function n1(t=0){return t+1}function r1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){r1(t,i,n[i])})}return t}function s1(t={},e){return{dirtyHandlerIds:Gy(t.dirtyHandlerIds,{type:e.type,payload:i1({},e.payload,{prevTargetIds:Yv(t,"dragOperation.targetIds",[])})}),dragOffset:Xy(t.dragOffset,e),refCount:t1(t.refCount,e),dragOperation:e1(t.dragOperation,e),stateId:n1(t.stateId)}}function o1(t,e=void 0,n={},r=!1){const i=a1(r),s=new wy(i,new Vy(i)),o=new ky(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function a1(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return mp(s1,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function l1(t,e){if(t==null)return{};var n=u1(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function u1(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let Af=0;const bs=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var c1=T.memo(function(e){var{children:n}=e,r=l1(e,["children"]);const[i,s]=f1(r);return T.useEffect(()=>{if(s){const o=kp();return++Af,()=>{--Af===0&&(o[bs]=null)}}},[]),v.jsx(gp.Provider,{value:i,children:n})});function f1(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=d1(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function d1(t,e=kp(),n,r){const i=e;return i[bs]||(i[bs]={dragDropManager:o1(t,e,n,r)}),i[bs]}function kp(){return typeof global<"u"?global:window}var h1=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Bn=typeof window<"u"?T.useLayoutEffect:T.useEffect;function xp(t,e,n){const[r,i]=T.useState(()=>e(t)),s=T.useCallback(()=>{const o=e(t);h1(r,o)||(i(o),n&&n())},[r,t,n]);return Bn(s),[r,s]}function p1(t,e,n){const[r,i]=xp(t,e,n);return Bn(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function Ep(t,e,n){return p1(e,t||(()=>({})),()=>n.reconnect())}function Tp(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),T.useMemo(()=>typeof t=="function"?t():t,n)}function g1(t){return T.useMemo(()=>t.hooks.dragSource(),[t])}function m1(t){return T.useMemo(()=>t.hooks.dragPreview(),[t])}let Ra=!1,Ia=!1;class v1{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){K(!Ra,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ra=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ra=!1}}isDragging(){if(!this.sourceId)return!1;K(!Ia,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ia=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Ia=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let La=!1;class y1{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;K(!La,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return La=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{La=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function S1(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function C1(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function Al(t,e,n,r){let i;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const u=s[l];if(!a(u))return!1;const c=t[u],d=e[u];if(i=void 0,i===!1||i===void 0&&c!==d)return!1}return!0}function $l(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function _1(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function k1(t){return(e=null,n=null)=>{if(!T.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return _1(r),x1(r,n?s=>t(s,n):t)}}function Op(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=k1(r);e[n]=()=>i}}),e}function $f(t,e){typeof t=="function"?t(e):t.current=e}function x1(t,e){const n=t.ref;return K(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?T.cloneElement(t,{ref:r=>{$f(n,r),$f(e,r)}}):T.cloneElement(t,{ref:e})}class E1{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Al(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Al(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Op({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,$l(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,$l(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class T1{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Al(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Op({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,$l(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Wn(){const{dragDropManager:t}=T.useContext(gp);return K(t!=null,"Expected drag drop context"),t}function O1(t,e){const n=Wn(),r=T.useMemo(()=>new E1(n.getBackend()),[n]);return Bn(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Bn(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function w1(){const t=Wn();return T.useMemo(()=>new v1(t),[t])}class P1{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function D1(t,e,n){const r=T.useMemo(()=>new P1(t,e,n),[e,n]);return T.useEffect(()=>{r.spec=t},[t]),r}function b1(t){return T.useMemo(()=>{const e=t.type;return K(e!=null,"spec.type must be defined"),e},[t])}function R1(t,e,n){const r=Wn(),i=D1(t,e,n),s=b1(t);Bn(function(){if(s!=null){const[a,l]=C1(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function I1(t,e){const n=Tp(t,e);K(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=w1(),i=O1(n.options,n.previewOptions);return R1(n,r,i),[Ep(n.collect,r,i),g1(i),m1(i)]}function L1(t){const n=Wn().getMonitor(),[r,i]=xp(n,t);return T.useEffect(()=>n.subscribeToOffsetChange(i)),T.useEffect(()=>n.subscribeToStateChange(i)),r}function M1(t){return T.useMemo(()=>t.hooks.dropTarget(),[t])}function j1(t){const e=Wn(),n=T.useMemo(()=>new T1(e.getBackend()),[e]);return Bn(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function N1(){const t=Wn();return T.useMemo(()=>new y1(t),[t])}function A1(t){const{accept:e}=t;return T.useMemo(()=>(K(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class $1{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function z1(t,e){const n=T.useMemo(()=>new $1(t,e),[e]);return T.useEffect(()=>{n.spec=t},[t]),n}function F1(t,e,n){const r=Wn(),i=z1(t,e),s=A1(t);Bn(function(){const[a,l]=S1(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function U1(t,e){const n=Tp(t,e),r=N1(),i=j1(n.options);return F1(n,r,i),[Ep(n.collect,r,i),M1(i)]}function wp(t){let e=null;return()=>(e==null&&(e=t()),e)}function B1(t,e){return t.filter(n=>n!==e)}function H1(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class V1{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=H1(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=B1(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class W1{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Pp="__NATIVE_FILE__",Dp="__NATIVE_URL__",bp="__NATIVE_TEXT__",Rp="__NATIVE_HTML__";var zf=Object.freeze({__proto__:null,FILE:Pp,HTML:Rp,TEXT:bp,URL:Dp});function Ma(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const zl={[Pp]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Rp]:{exposeProperties:{html:(t,e)=>Ma(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Dp]:{exposeProperties:{urls:(t,e)=>Ma(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[bp]:{exposeProperties:{text:(t,e)=>Ma(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function K1(t,e){const n=zl[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new W1(n);return r.loadDataTransfer(e),r}function ja(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(zl).filter(n=>{const r=zl[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const Q1=wp(()=>/firefox/i.test(navigator.userAgent)),Ip=wp(()=>!!window.safari);class Ff{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,u=o.length-1,c;for(;l<=u;){c=Math.floor(.5*(l+u));const p=n[c];if(p<e)l=c+1;else if(p>e)u=c-1;else return r[c]}a=Math.max(0,u);const d=e-n[a],f=d*d;return r[a]+i[a]*d+s[a]*f+o[a]*d*f}constructor(e,n){const{length:r}=e,i=[];for(let p=0;p<r;p++)i.push(p);i.sort((p,g)=>e[p]<e[g]?-1:1);const s=[],o=[];let a,l;for(let p=0;p<r-1;p++)a=e[p+1]-e[p],l=n[p+1]-n[p],s.push(a),o.push(l/a);const u=[o[0]];for(let p=0;p<s.length-1;p++){const g=o[p],S=o[p+1];if(g*S<=0)u.push(0);else{a=s[p];const O=s[p+1],m=a+O;u.push(3*m/((m+O)/g+(m+a)/S))}}u.push(o[o.length-1]);const c=[],d=[];let f;for(let p=0;p<u.length-1;p++){f=o[p];const g=u[p],S=1/s[p],O=g+u[p+1]-f-f;c.push((f-g-O)*S),d.push(O*S*S)}this.xs=e,this.ys=n,this.c1s=u,this.c2s=c,this.c3s=d}}const G1=1;function Lp(t){const e=t.nodeType===G1?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function hs(t){return{x:t.clientX,y:t.clientY}}function q1(t){var e;return t.nodeName==="IMG"&&(Q1()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Y1(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return Ip()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function X1(t,e,n,r,i){const s=q1(e),a=Lp(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:u,offsetHeight:c}=t,{anchorX:d,anchorY:f}=r,{dragPreviewWidth:p,dragPreviewHeight:g}=Y1(s,e,u,c),S=()=>{let b=new Ff([0,.5,1],[l.y,l.y/c*g,l.y+g-c]).interpolate(f);return Ip()&&s&&(b+=(window.devicePixelRatio-1)*g),b},O=()=>new Ff([0,.5,1],[l.x,l.x/u*p,l.x+p-u]).interpolate(d),{offsetX:m,offsetY:h}=i,y=m===0||m,E=h===0||h;return{x:y?m:O(),y:E?h:S()}}let J1=class{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}};function Z1(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Z1(t,i,n[i])})}return t}class eS{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return Uf({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return Uf({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(zf).some(n=>zf[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=K1(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&Lp(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=hs(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=ja(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const c=this.monitor.getSourceId(),d=this.sourceNodes.get(c),f=this.sourcePreviewNodes.get(c)||d;if(f){const{anchorX:p,anchorY:g,offsetX:S,offsetY:O}=this.getCurrentSourcePreviewNodeOptions(),y=X1(d,f,o,{anchorX:p,anchorY:g},{offsetX:S,offsetY:O});a.setDragImage(f,y.x,y.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:u}=this.getCurrentSourcePreviewNodeOptions();u?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=ja(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:hs(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=hs(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else ja(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:hs(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new J1(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new V1(this.isNodeInDocument)}}let ps;function tS(){return ps||(ps=new Image,ps.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),ps}const nS=function(e,n,r){return new eS(e,n,r)};function Bf({isPremovedPiece:t=!1,piece:e,square:n,squares:r}){const{animationDuration:i,arePiecesDraggable:s,boardWidth:o,boardOrientation:a,chessPieces:l,currentPosition:u,deletePieceFromSquare:c,dropOffBoardAction:d,id:f,isDraggablePiece:p,isWaitingForAnimation:g,onPieceClick:S,onPieceDragBegin:O,onPieceDragEnd:m,onPieceDropOffBoard:h,onPromotionCheck:y,positionDifferences:E}=Qt(),[D,b]=T.useState({opacity:1,zIndex:5,touchAction:"none",cursor:s&&p({piece:e,sourceSquare:n})?"-webkit-grab":"default"}),[{canDrag:I,isDragging:L},G,U]=I1(()=>({type:"piece",item:()=>(O(e,n),{piece:e,square:n,id:f}),end:(re,he)=>{m(e,n),!he.didDrop()&&(d==="trash"&&c(n),h==null||h(n,e))},collect:re=>({canDrag:p({piece:e,sourceSquare:n}),isDragging:!!re.isDragging()})}),[e,n,u,f]);U(tS(),{captureDraggingState:!0}),T.useEffect(()=>{b(re=>Object.assign(Object.assign({},re),{opacity:L?0:1}))},[L]),T.useEffect(()=>{var re;const he=(re=E.removed)===null||re===void 0?void 0:re[n];if(!E.added||!he)return;const We=Object.entries(E.added).find(([be,me])=>me===he||y(n,be,he));if(g&&he&&We&&!t){const be=n,me=We[0];if(be&&me){const Ce=o/8;b(R=>Object.assign(Object.assign({},R),{transform:`translate(${(a==="black"?-1:1)*(me.charCodeAt(0)-be.charCodeAt(0))*Ce}px, ${(a==="black"?-1:1)*(Number(be[1])-Number(me[1]))*Ce}px)`,transition:`transform ${i}ms`,zIndex:6}))}}},[E]),T.useEffect(()=>{const{sourceSq:re}=J();re&&b(he=>Object.assign(Object.assign({},he),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[u]),T.useEffect(()=>{b(re=>Object.assign(Object.assign({},re),{cursor:s&&p({piece:e,sourceSquare:n})?"-webkit-grab":"default"}))},[n,u,s]);function J(){return{sourceSq:r[n]}}return v.jsx("div",Object.assign({ref:s&&I?G:null,onClick:()=>S(e,n),"data-piece":e,style:D},{children:typeof l[e]=="function"?l[e]({squareWidth:o/8,isDragging:L,square:n}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:o/8,height:o/8,style:{display:"block"}},{children:v.jsx("g",{children:l[e]})}))}))}function rS({square:t,squareColor:e,setSquares:n,squareHasPremove:r,children:i}){const s=T.useRef(null),{autoPromoteToQueen:o,boardWidth:a,boardOrientation:l,clearArrows:u,currentPosition:c,currentRightClickDown:d,customBoardStyle:f,customDarkSquareStyle:p,customDropSquareStyle:g,customLightSquareStyle:S,customPremoveDarkSquareStyle:O,customPremoveLightSquareStyle:m,customSquare:h,customSquareStyles:y,drawNewArrow:E,handleSetPosition:D,handleSparePieceDrop:b,isWaitingForAnimation:I,lastPieceColour:L,lastSquareDraggedOver:G,onArrowDrawEnd:U,onDragOverSquare:J,onMouseOutSquare:re,onMouseOverSquare:he,onPieceDrop:We,onPromotionCheck:be,onRightClickDown:me,onRightClickUp:Ce,onSquareClick:R,setLastSquareDraggedOver:F,setPromoteFromSquare:V,setPromoteToSquare:Z,setShowPromoteDialog:N}=Qt(),[{isOver:Y},ue]=U1(()=>({accept:"piece",drop:Re,collect:B=>({isOver:!!B.isOver()})}),[t,c,We,I,L]);function Re(B){if(B.isSpare){b(B.piece,t);return}be(B.square,t,B.piece)?o?D(B.square,t,B.piece[0]==="w"?"wQ":"bQ"):(V(B.square),Z(t),N(!0)):D(B.square,t,B.piece,!0)}T.useEffect(()=>{if(s.current){const{x:B,y:Ne}=s.current.getBoundingClientRect();n(Nt=>Object.assign(Object.assign({},Nt),{[t]:{x:B,y:Ne}}))}},[a,l]);const _e=Object.assign(Object.assign(Object.assign(Object.assign({},iS(t,l,f)),e==="black"?p:S),r&&(e==="black"?O:m)),Y&&g);return v.jsx("div",Object.assign({ref:ue,style:_e,"data-square-color":e,"data-square":t,onTouchMove:B=>{var Ne;const Nt=B.touches[0],xn=document.elementsFromPoint(Nt.clientX,Nt.clientY),Ae=(Ne=xn==null?void 0:xn.find(Je=>Je.getAttribute("data-square")))===null||Ne===void 0?void 0:Ne.getAttribute("data-square");Ae&&Ae!==G&&(F(Ae),J(Ae))},onMouseOver:B=>{B.buttons===2&&d&&E(d,t),!(B.relatedTarget&&B.currentTarget.contains(B.relatedTarget))&&he(t)},onMouseOut:B=>{B.relatedTarget&&B.currentTarget.contains(B.relatedTarget)||re(t)},onMouseDown:B=>{B.button===2&&me(t)},onMouseUp:B=>{B.button===2&&(d&&U(d,t),Ce(t))},onDragEnter:()=>J(t),onClick:()=>{const B=c[t];R(t,B),u()},onContextMenu:B=>{B.preventDefault()}},{children:typeof h=="string"?v.jsx(h,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},Vf(a)),Hf),!r&&(y==null?void 0:y[t]))},{children:i})):v.jsx(h,Object.assign({ref:s,square:t,squareColor:e,style:Object.assign(Object.assign(Object.assign({},Vf(a)),Hf),!r&&(y==null?void 0:y[t]))},{children:i}))}))}const Hf={display:"flex",justifyContent:"center"},Vf=t=>({width:t/8,height:t/8}),iS=(t,e,n)=>n!=null&&n.borderRadius?t==="a1"?e==="white"?{borderBottomLeftRadius:n.borderRadius}:{borderTopRightRadius:n.borderRadius}:t==="a8"?e==="white"?{borderTopLeftRadius:n.borderRadius}:{borderBottomRightRadius:n.borderRadius}:t==="h1"?e==="white"?{borderBottomRightRadius:n.borderRadius}:{borderTopLeftRadius:n.borderRadius}:t==="h8"?e==="white"?{borderTopRightRadius:n.borderRadius}:{borderBottomLeftRadius:n.borderRadius}:{}:{};function sS(){const[t,e]=T.useState({}),{arePremovesAllowed:n,boardOrientation:r,boardWidth:i,currentPosition:s,id:o,premoves:a,showBoardNotation:l}=Qt(),u=T.useMemo(()=>{const c=[];return n?(a.forEach((d,f)=>{const{sourceSq:p,targetSq:g,piece:S}=d,O=c.find(m=>{var h;return m.piece===S&&((h=m.premovesRoute.at(-1))===null||h===void 0?void 0:h.targetSq)===p});O?O.premovesRoute.push({sourceSq:p,targetSq:g,index:f}):c.push({piece:S,premovesRoute:[{sourceSq:p,targetSq:g,index:f}]})}),c):[]},[a]);return v.jsx("div",Object.assign({"data-boardid":o},{children:[...Array(8)].map((c,d)=>v.jsx("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((f,p)=>{const g=r==="black"?$i[7-p]+(d+1):$i[p]+(8-d),S=p%2===d%2?"white":"black",O=a.find(h=>h.sourceSq===g||h.targetSq===g),m=u.filter(({premovesRoute:h})=>{var y;return((y=h.at(-1))===null||y===void 0?void 0:y.targetSq)===g}).sort((h,y)=>{var E,D;return((E=y.premovesRoute.at(-1))===null||E===void 0?void 0:E.index)-((D=h.premovesRoute.at(-1))===null||D===void 0?void 0:D.index)}).at(0);return v.jsxs(rS,Object.assign({square:g,squareColor:S,setSquares:e,squareHasPremove:!!O},{children:[!O&&s[g]&&v.jsx(Bf,{piece:s[g],square:g,squares:t}),m&&v.jsx(Bf,{isPremovedPiece:!0,piece:m.piece,square:g,squares:t}),l&&v.jsx(Qv,{row:d,col:p})]}),`${p}${d}`)})}),d.toString()))}))}const oS=()=>{const{arrows:t,newArrow:e,boardOrientation:n,boardWidth:r,customArrowColor:i}=Qt(),s=[...t,e].filter(Boolean);return v.jsx("svg",Object.assign({width:r,height:r,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((o,a)=>{const[l,u,c]=o;if(l===u)return null;const d=Ml(n,r,l),f=Ml(n,r,u);let p=r/32;const g=a===t.length;t.some(y=>y[0]!==l&&y[1]===u)&&!g&&(p=r/16);const S=f.x-d.x,O=f.y-d.y,m=Math.hypot(O,S),h={x:d.x+S*(m-p)/m,y:d.y+O*(m-p)/m};return v.jsxs(T.Fragment,{children:[v.jsx("marker",Object.assign({id:`arrowhead-${a}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:v.jsx("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:c??i})})),v.jsx("line",{x1:d.x,y1:d.y,x2:h.x,y2:h.y,opacity:g?"0.5":"0.65",stroke:c??i,strokeWidth:g?.9*r/40:r/40,markerEnd:`url(#arrowhead-${a})`})]},`${l}-${u}${g?"-active":""}`)})}))};function aS({option:t}){const[e,n]=T.useState(!1),{boardWidth:r,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:o,handleSetPosition:a,onPromotionPieceSelect:l,promoteFromSquare:u,promoteToSquare:c,promotionDialogVariant:d}=Qt(),f=()=>{switch(t[1]){case"Q":return s.backgroundColor;case"R":return o.backgroundColor;case"N":return d==="default"?o.backgroundColor:s.backgroundColor;case"B":return d==="default"?s.backgroundColor:o.backgroundColor}};return v.jsx("div",Object.assign({onClick:()=>{l(t,u??void 0,c??void 0)&&a(u,c,t,!0)},onMouseOver:()=>n(!0),onMouseOut:()=>n(!1),"data-piece":t,style:{cursor:"pointer",backgroundColor:e?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:typeof i[t]=="function"?v.jsx("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:i[t]({squareWidth:r/8,isDragging:!1})})):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:r/8,height:r/8,style:{transition:"all 0.1s ease-out",transform:e?"scale(1)":"scale(0.85)"}},{children:v.jsx("g",{children:i[t]})}))}))}function lS(){const{boardOrientation:t,boardWidth:e,promotionDialogVariant:n,promoteToSquare:r}=Qt(),i=(r==null?void 0:r[1])==="1"?"b":"w",s=[`${i??"w"}Q`,`${i??"w"}R`,`${i??"w"}N`,`${i??"w"}B`],o={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-e/8}px, ${-e/8}px)`},vertical:{transform:`translate(${-e/16}px, ${-e/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*e/8}px)`,width:"100%",height:`${e/4}px`,top:0,backgroundColor:"white",left:0}},a=Ml(t,e,r||"a8");return v.jsx("div",Object.assign({style:Object.assign({position:"absolute",top:`${a==null?void 0:a.y}px`,left:`${a==null?void 0:a.x}px`,zIndex:1e3},o[n]),title:"Choose promotion piece"},{children:s.map(l=>v.jsx(aS,{option:l},l))}))}const uS={whiteKing:v.jsx("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:v.jsx("g",{children:v.jsx("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function cS({children:t}){try{return v.jsx(v.Fragment,{children:t})}catch(e){return console.log(e),v.jsx(Mp,{showError:!0})}}function Mp({showError:t=!1}){return v.jsxs("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[v.jsx("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:uS.whiteKing})),t&&v.jsx("h1",{children:"Something went wrong"})]}))}function fS(){const t=T.useRef(null),{boardWidth:e,clearCurrentRightClickDown:n,onPromotionPieceSelect:r,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:o}=Qt();return T.useEffect(()=>{function a(l){t.current&&!t.current.contains(l.target)&&n()}return document.addEventListener("mouseup",a),()=>{document.removeEventListener("mouseup",a)}},[]),e?v.jsx("div",Object.assign({style:{perspective:"1000px"}},{children:v.jsxs("div",Object.assign({ref:t,style:Object.assign(Object.assign({position:"relative"},dS(e)),o)},{children:[v.jsx(sS,{}),v.jsx(oS,{}),s&&v.jsxs(v.Fragment,{children:[v.jsx("div",{onClick:()=>{i(!1),r==null||r()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:e,height:e}}),v.jsx(lS,{})]})]}))})):v.jsx(Mp,{})}const dS=t=>({cursor:"default",height:t,width:t});var mn;(function(t){t.mouse="mouse",t.touch="touch",t.keyboard="keyboard"})(mn||(mn={}));class hS{get delay(){var e;return(e=this.args.delay)!==null&&e!==void 0?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return(e=this.args.ignoreContextMenu)!==null&&e!==void 0?e:!1}get enableHoverOutsideTarget(){var e;return(e=this.args.enableHoverOutsideTarget)!==null&&e!==void 0?e:!1}get enableKeyboardEvents(){var e;return(e=this.args.enableKeyboardEvents)!==null&&e!==void 0?e:!1}get enableMouseEvents(){var e;return(e=this.args.enableMouseEvents)!==null&&e!==void 0?e:!1}get enableTouchEvents(){var e;return(e=this.args.enableTouchEvents)!==null&&e!==void 0?e:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayTouchStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get delayMouseStart(){var e,n,r,i;return(i=(r=(e=this.args)===null||e===void 0?void 0:e.delayMouseStart)!==null&&r!==void 0?r:(n=this.args)===null||n===void 0?void 0:n.delay)!==null&&i!==void 0?i:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window<"u")return window}get document(){var e;if(!((e=this.context)===null||e===void 0)&&e.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var e;return((e=this.args)===null||e===void 0?void 0:e.rootElement)||this.document}constructor(e,n){this.args=e,this.context=n}}function pS(t,e,n,r){return Math.sqrt(Math.pow(Math.abs(n-t),2)+Math.pow(Math.abs(r-e),2))}function gS(t,e,n,r,i){if(!i)return!1;const s=Math.atan2(r-e,n-t)*180/Math.PI+180;for(let o=0;o<i.length;++o){const a=i[o];if(a&&(a.start==null||s>=a.start)&&(a.end==null||s<=a.end))return!0}return!1}const mS={Left:1},vS={Left:0};function Na(t){return t.button===void 0||t.button===vS.Left}function yS(t){return t.buttons===void 0||(t.buttons&mS.Left)===0}function jp(t){return!!t.targetTouches}const SS=1;function CS(t){const e=t.nodeType===SS?t:t.parentElement;if(!e)return;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function _S(t,e){if(t.targetTouches.length===1)return ao(t.targetTouches[0]);if(e&&t.touches.length===1&&t.touches[0].target===e.target)return ao(t.touches[0])}function ao(t,e){return jp(t)?_S(t,e):{x:t.clientX,y:t.clientY}}const Wf=(()=>{let t=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return t=!0,!0}}))}catch{}return t})(),Zr={[mn.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[mn.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[mn.keyboard]:{keydown:"keydown"}};class vi{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((e=this.dragOverTargetIds)===null||e===void 0?void 0:e.length)||0}}get document(){return this.options.document}setup(){const e=this.options.rootElement;e&&(K(!vi.isSetUp,"Cannot have two Touch backends at the same time."),vi.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){const e=this.options.rootElement;e&&(vi.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,n,r,i=!1){const s=Wf?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Zr[o][n];a&&e.addEventListener(a,r,s)})}removeEventListener(e,n,r,i=!1){const s=Wf?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(o){const a=Zr[o][n];a&&e.removeEventListener(a,r,s)})}connectDragSource(e,n){const r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,n),this.addEventListener(n,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(n,"start",r)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,n){const r=this.options.rootElement;if(!this.document||!r)return()=>{};const i=s=>{if(!this.document||!r||!this.monitor.isDragging())return;let o;switch(s.type){case Zr.mouse.move:o={x:s.clientX,y:s.clientY};break;case Zr.touch.move:var a,l;o={x:((a=s.touches[0])===null||a===void 0?void 0:a.clientX)||0,y:((l=s.touches[0])===null||l===void 0?void 0:l.clientY)||0};break}const u=o!=null?this.document.elementFromPoint(o.x,o.y):void 0,c=u&&n.contains(u);if(u===n||c)return this.handleMove(s,e)};return this.addEventListener(this.document.body,"move",i),this.targetNodes.set(e,n),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",i))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!e||!e.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,n,r){this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&CS(s)},this.handleTopMoveStartCapture=i=>{Na(i)&&(this.moveStartSourceIds=[])},this.handleMoveStart=i=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(i)},this.handleTopMoveStart=i=>{if(!Na(i))return;const s=ao(i);s&&(jp(i)&&(this.lastTargetTouchFallback=i.targetTouches[0]),this._mouseClientOffset=s),this.waitingForDelay=!1},this.handleTopMoveStartDelay=i=>{if(!Na(i))return;const s=i.type===Zr.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,i),s),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(i,s)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(s)},this.handleTopMove=i=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;const{moveStartSourceIds:s,dragOverTargetIds:o}=this,a=this.options.enableHoverOutsideTarget,l=ao(i,this.lastTargetTouchFallback);if(!l)return;if(this._isScrolling||!this.monitor.isDragging()&&gS(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&s&&pS(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,l.x,l.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(s,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;const u=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(u),this.actions.publishDragSource(),i.cancelable&&i.preventDefault();const c=(o||[]).map(g=>this.targetNodes.get(g)).filter(g=>!!g),d=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(l.x,l.y,c):this.document.elementsFromPoint(l.x,l.y),f=[];for(const g in d){if(!d.hasOwnProperty(g))continue;let S=d[g];for(S!=null&&f.push(S);S;)S=S.parentElement,S&&f.indexOf(S)===-1&&f.push(S)}const p=f.filter(g=>c.indexOf(g)>-1).map(g=>this._getDropTargetId(g)).filter(g=>!!g).filter((g,S,O)=>O.indexOf(g)===S);if(a)for(const g in this.targetNodes){const S=this.targetNodes.get(g);if(u&&S&&S.contains(u)&&p.indexOf(g)===-1){p.unshift(g);break}}p.reverse(),this.actions.hover(p,{clientOffset:l})},this._getDropTargetId=i=>{const s=this.targetNodes.keys();let o=s.next();for(;o.done===!1;){const a=o.value;if(i===this.targetNodes.get(a))return a;o=s.next()}},this.handleTopMoveEndCapture=i=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!yS(i)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}i.cancelable&&i.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=i=>{i.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new hS(r,n),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(mn.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(mn.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(mn.keyboard)}}const kS=function(e,n={},r={}){return new vi(e,n,r)},xS=T.createContext({isCustomDndProviderSet:!1}),ES=({children:t})=>v.jsx(v.Fragment,{children:t}),TS=({customDndBackend:t,customDndBackendOptions:e,children:n})=>{const[r,i]=T.useState(),[s,o]=T.useState(!1),[a,l]=T.useState(!1),{isCustomDndProviderSet:u}=T.useContext(xS);T.useEffect(()=>{l("ontouchstart"in window),o(!0),i(window)},[]);const c=u?ES:c1;return s?r?v.jsx(c,Object.assign({backend:t||(a?kS:nS),context:r,options:t?e:void 0},{children:n})):v.jsx(v.Fragment,{children:n}):null};function OS({boardContainer:t}){const{boardWidth:e,chessPieces:n,id:r,snapToCursor:i,allowDragOutsideBoard:s}=Qt(),o=L1(f=>({item:f.getItem(),clientOffset:f.getClientOffset(),sourceClientOffset:f.getSourceClientOffset(),isDragging:f.isDragging()})),{isDragging:a,item:l,clientOffset:u,sourceClientOffset:c}=o,d=T.useCallback((f,p)=>{if(!f||!p)return{display:"none"};let{x:g,y:S}=i?f:p;const O=e/8/2;if(i&&(g-=O,S-=O),!s){const{left:h,top:y}=t,E=h-O,D=y-O,b=h+e-O,I=y+e-O;g=Math.max(E,Math.min(g,b)),S=Math.max(D,Math.min(S,I))}const m=`translate(${g}px, ${S}px)`;return{transform:m,WebkitTransform:m,touchAction:"none"}},[e,s,i,t]);return a&&l.id===r?v.jsx("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:v.jsx("div",Object.assign({style:d(u,c)},{children:typeof n[l.piece]=="function"?n[l.piece]({squareWidth:e/8,isDragging:!0}):v.jsx("svg",Object.assign({viewBox:"1 1 43 43",width:e/8,height:e/8},{children:v.jsx("g",{children:n[l.piece]})}))}))})):null}const wS=T.forwardRef((t,e)=>{const{customDndBackend:n,customDndBackendOptions:r,onBoardWidthChange:i}=t,s=jv(t,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[o,a]=T.useState(t.boardWidth),l=T.useRef(null),u=T.useRef(null),[c,d]=T.useState({left:0,top:0}),f=T.useMemo(()=>{var p;return(p=l.current)===null||p===void 0?void 0:p.getBoundingClientRect()},[l.current]);return T.useEffect(()=>{o&&(i==null||i(o))},[o]),T.useEffect(()=>{d({left:f!=null&&f.left?f==null?void 0:f.left:0,top:f!=null&&f.top?f==null?void 0:f.top:0})},[f]),T.useEffect(()=>{var p;if(t.boardWidth===void 0&&(!((p=l.current)===null||p===void 0)&&p.offsetWidth)){const g=new ResizeObserver(()=>{var S;a((S=l.current)===null||S===void 0?void 0:S.offsetWidth)});return g.observe(l.current),()=>{g.disconnect()}}},[l.current]),v.jsx(cS,{children:v.jsxs("div",Object.assign({ref:u,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[v.jsx("div",{ref:l,style:{width:"100%"}}),v.jsx(TS,Object.assign({customDndBackend:n,customDndBackendOptions:r},{children:o&&v.jsxs(Kv,Object.assign({boardWidth:o},s,{ref:e},{children:[v.jsx(OS,{boardContainer:c}),v.jsx(fS,{})]}))}))]}))})});/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PS={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DS=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),jr=(t,e)=>{const n=T.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,...u},c)=>T.createElement("svg",{ref:c,...PS,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${DS(t)}`,a].join(" "),...u},[...e.map(([d,f])=>T.createElement(d,f)),...Array.isArray(l)?l:[l]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bS=jr("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RS=jr("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IS=jr("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LS=jr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MS=jr("Scroll",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jS=jr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);class NS{constructor(){this.encoder=new TextEncoder,this._pieces=[],this._parts=[]}append_buffer(e){this.flush(),this._parts.push(e)}append(e){this._pieces.push(e)}flush(){if(this._pieces.length>0){const e=new Uint8Array(this._pieces);this._parts.push(e),this._pieces=[]}}toArrayBuffer(){const e=[];for(const n of this._parts)e.push(n);return AS(e).buffer}}function AS(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t){const s=new Uint8Array(i.buffer,i.byteOffset,i.byteLength);n.set(s,r),r+=i.byteLength}return n}function Np(t){return new $S(t).unpack()}function Ap(t){const e=new zS,n=e.pack(t);return n instanceof Promise?n.then(()=>e.getBuffer()):e.getBuffer()}class $S{constructor(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}unpack(){const e=this.unpack_uint8();if(e<128)return e;if((e^224)<32)return(e^224)-32;let n;if((n=e^160)<=15)return this.unpack_raw(n);if((n=e^176)<=15)return this.unpack_string(n);if((n=e^144)<=15)return this.unpack_array(n);if((n=e^128)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}}unpack_uint8(){const e=this.dataView[this.index]&255;return this.index++,e}unpack_uint16(){const e=this.read(2),n=(e[0]&255)*256+(e[1]&255);return this.index+=2,n}unpack_uint32(){const e=this.read(4),n=((e[0]*256+e[1])*256+e[2])*256+e[3];return this.index+=4,n}unpack_uint64(){const e=this.read(8),n=((((((e[0]*256+e[1])*256+e[2])*256+e[3])*256+e[4])*256+e[5])*256+e[6])*256+e[7];return this.index+=8,n}unpack_int8(){const e=this.unpack_uint8();return e<128?e:e-256}unpack_int16(){const e=this.unpack_uint16();return e<32768?e:e-65536}unpack_int32(){const e=this.unpack_uint32();return e<2**31?e:e-2**32}unpack_int64(){const e=this.unpack_uint64();return e<2**63?e:e-2**64}unpack_raw(e){if(this.length<this.index+e)throw new Error(`BinaryPackFailure: index is out of range ${this.index} ${e} ${this.length}`);const n=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,n}unpack_string(e){const n=this.read(e);let r=0,i="",s,o;for(;r<e;)s=n[r],s<160?(o=s,r++):(s^192)<32?(o=(s&31)<<6|n[r+1]&63,r+=2):(s^224)<16?(o=(s&15)<<12|(n[r+1]&63)<<6|n[r+2]&63,r+=3):(o=(s&7)<<18|(n[r+1]&63)<<12|(n[r+2]&63)<<6|n[r+3]&63,r+=4),i+=String.fromCodePoint(o);return this.index+=e,i}unpack_array(e){const n=new Array(e);for(let r=0;r<e;r++)n[r]=this.unpack();return n}unpack_map(e){const n={};for(let r=0;r<e;r++){const i=this.unpack();n[i]=this.unpack()}return n}unpack_float(){const e=this.unpack_uint32(),n=e>>31,r=(e>>23&255)-127,i=e&8388607|8388608;return(n===0?1:-1)*i*2**(r-23)}unpack_double(){const e=this.unpack_uint32(),n=this.unpack_uint32(),r=e>>31,i=(e>>20&2047)-1023,o=(e&1048575|1048576)*2**(i-20)+n*2**(i-52);return(r===0?1:-1)*o}read(e){const n=this.index;if(n+e<=this.length)return this.dataView.subarray(n,n+e);throw new Error("BinaryPackFailure: read index out of range")}}class zS{getBuffer(){return this._bufferBuilder.toArrayBuffer()}pack(e){if(typeof e=="string")this.pack_string(e);else if(typeof e=="number")Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if(typeof e=="boolean")e===!0?this._bufferBuilder.append(195):e===!1&&this._bufferBuilder.append(194);else if(e===void 0)this._bufferBuilder.append(192);else if(typeof e=="object")if(e===null)this._bufferBuilder.append(192);else{const n=e.constructor;if(e instanceof Array){const r=this.pack_array(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else if(e instanceof ArrayBuffer)this.pack_bin(new Uint8Array(e));else if("BYTES_PER_ELEMENT"in e){const r=e;this.pack_bin(new Uint8Array(r.buffer,r.byteOffset,r.byteLength))}else if(e instanceof Date)this.pack_string(e.toString());else{if(e instanceof Blob)return e.arrayBuffer().then(r=>{this.pack_bin(new Uint8Array(r)),this._bufferBuilder.flush()});if(n==Object||n.toString().startsWith("class")){const r=this.pack_object(e);if(r instanceof Promise)return r.then(()=>this._bufferBuilder.flush())}else throw new Error(`Type "${n.toString()}" not yet supported`)}}else throw new Error(`Type "${typeof e}" not yet supported`);this._bufferBuilder.flush()}pack_bin(e){const n=e.length;if(n<=15)this.pack_uint8(160+n);else if(n<=65535)this._bufferBuilder.append(218),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(219),this.pack_uint32(n);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(e)}pack_string(e){const n=this._textEncoder.encode(e),r=n.length;if(r<=15)this.pack_uint8(176+r);else if(r<=65535)this._bufferBuilder.append(216),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(217),this.pack_uint32(r);else throw new Error("Invalid length");this._bufferBuilder.append_buffer(n)}pack_array(e){const n=e.length;if(n<=15)this.pack_uint8(144+n);else if(n<=65535)this._bufferBuilder.append(220),this.pack_uint16(n);else if(n<=4294967295)this._bufferBuilder.append(221),this.pack_uint32(n);else throw new Error("Invalid length");const r=i=>{if(i<n){const s=this.pack(e[i]);return s instanceof Promise?s.then(()=>r(i+1)):r(i+1)}};return r(0)}pack_integer(e){if(e>=-32&&e<=127)this._bufferBuilder.append(e&255);else if(e>=0&&e<=255)this._bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&e<=127)this._bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&e<=65535)this._bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&e<=32767)this._bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&e<=4294967295)this._bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&e<=2147483647)this._bufferBuilder.append(210),this.pack_int32(e);else if(e>=-9223372036854776e3&&e<=9223372036854776e3)this._bufferBuilder.append(211),this.pack_int64(e);else if(e>=0&&e<=18446744073709552e3)this._bufferBuilder.append(207),this.pack_uint64(e);else throw new Error("Invalid integer")}pack_double(e){let n=0;e<0&&(n=1,e=-e);const r=Math.floor(Math.log(e)/Math.LN2),i=e/2**r-1,s=Math.floor(i*2**52),o=2**32,a=n<<31|r+1023<<20|s/o&1048575,l=s%o;this._bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(l)}pack_object(e){const n=Object.keys(e),r=n.length;if(r<=15)this.pack_uint8(128+r);else if(r<=65535)this._bufferBuilder.append(222),this.pack_uint16(r);else if(r<=4294967295)this._bufferBuilder.append(223),this.pack_uint32(r);else throw new Error("Invalid length");const i=s=>{if(s<n.length){const o=n[s];if(e.hasOwnProperty(o)){this.pack(o);const a=this.pack(e[o]);if(a instanceof Promise)return a.then(()=>i(s+1))}return i(s+1)}};return i(0)}pack_uint8(e){this._bufferBuilder.append(e)}pack_uint16(e){this._bufferBuilder.append(e>>8),this._bufferBuilder.append(e&255)}pack_uint32(e){const n=e&4294967295;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255)}pack_uint64(e){const n=e/4294967296,r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}pack_int8(e){this._bufferBuilder.append(e&255)}pack_int16(e){this._bufferBuilder.append((e&65280)>>8),this._bufferBuilder.append(e&255)}pack_int32(e){this._bufferBuilder.append(e>>>24&255),this._bufferBuilder.append((e&16711680)>>>16),this._bufferBuilder.append((e&65280)>>>8),this._bufferBuilder.append(e&255)}pack_int64(e){const n=Math.floor(e/4294967296),r=e%2**32;this._bufferBuilder.append((n&4278190080)>>>24),this._bufferBuilder.append((n&16711680)>>>16),this._bufferBuilder.append((n&65280)>>>8),this._bufferBuilder.append(n&255),this._bufferBuilder.append((r&4278190080)>>>24),this._bufferBuilder.append((r&16711680)>>>16),this._bufferBuilder.append((r&65280)>>>8),this._bufferBuilder.append(r&255)}constructor(){this._bufferBuilder=new NS,this._textEncoder=new TextEncoder}}let $p=!0,zp=!0;function oi(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseFloat(r[n],10)}function Kn(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const l=u=>{const c=n(u);c&&(a.handleEvent?a.handleEvent(c):a(c))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),i.apply(this,[o,l])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function FS(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):($p=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function US(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(zp=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Fp(){if(typeof window=="object"){if($p)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Ju(t,e){zp&&console.warn(t+" is deprecated, please use "+e+" instead.")}function BS(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const r=n.userAgentData.brands.find(i=>i.brand==="Chromium");if(r)return{browser:"chrome",version:parseInt(r.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(oi(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(oi(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(oi(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=oi(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function Kf(t){return Object.prototype.toString.call(t)==="[object Object]"}function Up(t){return Kf(t)?Object.keys(t).reduce(function(e,n){const r=Kf(t[n]),i=r?Up(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function Fl(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Fl(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Fl(t,t.get(i),n)})}))}function Qf(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&Fl(t,a,i)})}),i}const Gf=Fp;function Bp(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(u=>{if(u==="require"||u==="advanced"||u==="mediaSource")return;const c=typeof a[u]=="object"?a[u]:{ideal:a[u]};c.exact!==void 0&&typeof c.exact=="number"&&(c.min=c.max=c.exact);const d=function(f,p){return f?f+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(c.ideal!==void 0){l.optional=l.optional||[];let f={};typeof c.ideal=="number"?(f[d("min",u)]=c.ideal,l.optional.push(f),f={},f[d("max",u)]=c.ideal,l.optional.push(f)):(f[d("",u)]=c.ideal,l.optional.push(f))}c.exact!==void 0&&typeof c.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",u)]=c.exact):["min","max"].forEach(f=>{c[f]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(f,u)]=c[f])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},i=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const u=function(c,d,f){d in c&&!(f in c)&&(c[f]=c[d],delete c[d])};a=JSON.parse(JSON.stringify(a)),u(a.audio,"autoGainControl","googAutoGainControl"),u(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let u=a.video.facingMode;u=u&&(typeof u=="object"?u:{ideal:u});const c=e.version<66;if(u&&(u.exact==="user"||u.exact==="environment"||u.ideal==="user"||u.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!c)){delete a.video.facingMode;let d;if(u.exact==="environment"||u.ideal==="environment"?d=["back","rear"]:(u.exact==="user"||u.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(g=>g.kind==="videoinput");let p=f.find(g=>d.some(S=>g.label.toLowerCase().includes(S)));return!p&&f.length&&d.includes("back")&&(p=f[f.length-1]),p&&(a.video.deviceId=u.exact?{exact:p.deviceId}:{ideal:p.deviceId}),a.video=r(a.video),Gf("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return Gf("chrome: "+JSON.stringify(a)),l(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,l,u){i(a,c=>{n.webkitGetUserMedia(c,l,d=>{u&&u(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,u=>a(u).then(c=>{if(u.audio&&!c.getAudioTracks().length||u.video&&!c.getVideoTracks().length)throw c.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return c},c=>Promise.reject(s(c))))}}}function Hp(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Vp(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Kn(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Wp(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){let u=i.apply(this,arguments);return u||(u=e(this,a),this._senders.push(u)),u};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(l=>l.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Kp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>Qf(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Kn(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>Qf(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Qp(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(u=>{if(this.getSenders().find(d=>d.track===u))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(u=>a.indexOf(u)===-1);this._shimmedLocalStreams[o.id]=[o].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(o);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function Gp(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Qp(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const c=n.apply(this);return this._reverseStreams=this._reverseStreams||{},c.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(c){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},c.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[c.id]){const d=new t.MediaStream(c.getTracks());this._streams[c.id]=d,this._reverseStreams[d.id]=c,c=d}r.apply(this,[c])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(c){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[c.id]||c]),delete this._reverseStreams[this._streams[c.id]?this._streams[c.id].id:c.id],delete this._streams[c.id]},t.RTCPeerConnection.prototype.addTrack=function(c,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(S=>S===c))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(S=>S.track===c))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[d.id];if(g)g.addTrack(c),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const S=new t.MediaStream([c]);this._streams[d.id]=S,this._reverseStreams[S.id]=d,this.addStream(S)}return this.getSenders().find(S=>S.track===c)};function s(u,c){let d=c.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const p=u._reverseStreams[f],g=u._streams[p.id];d=d.replace(new RegExp(g.id,"g"),p.id)}),new RTCSessionDescription({type:c.type,sdp:d})}function o(u,c){let d=c.sdp;return Object.keys(u._reverseStreams||[]).forEach(f=>{const p=u._reverseStreams[f],g=u._streams[p.id];d=d.replace(new RegExp(p.id,"g"),g.id)}),new RTCSessionDescription({type:c.type,sdp:d})}["createOffer","createAnswer"].forEach(function(u){const c=t.RTCPeerConnection.prototype[u],d={[u](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?c.apply(this,[g=>{const S=s(this,g);f[0].apply(null,[S])},g=>{f[1]&&f[1].apply(null,g)},arguments[2]]):c.apply(this,arguments).then(g=>s(this,g))}};t.RTCPeerConnection.prototype[u]=d[u]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const u=l.get.apply(this);return u.type===""?u:s(this,u)}}),t.RTCPeerConnection.prototype.removeTrack=function(c){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!c._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(c._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(S=>c.track===S)&&(f=this._streams[p])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(c.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Ul(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function qp(t,e){Kn(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const qf=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:qp,shimAddTrackRemoveTrack:Gp,shimAddTrackRemoveTrackWithNative:Qp,shimGetSendersWithDtmf:Wp,shimGetUserMedia:Bp,shimMediaStream:Hp,shimOnTrack:Vp,shimPeerConnection:Ul,shimSenderReceiverGetStats:Kp},Symbol.toStringTag,{value:"Module"}));function Yp(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Ju("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,l){a in o&&!(l in o)&&(o[l]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function HS(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Xp(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Bl(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(l=>{if(e.version<53&&!o)try{l.forEach(u=>{u.type=n[u.type]||u.type})}catch(u){if(u.name!=="TypeError")throw u;l.forEach((c,d)=>{l.set(d,Object.assign({},c,{type:n[c.type]||c.type}))})}return l}).then(o,a)}}function Jp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Zp(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Kn(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function eg(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Ju("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function tg(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function ng(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function rg(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function ig(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function sg(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const Yf=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:ng,shimCreateAnswer:sg,shimCreateOffer:ig,shimGetDisplayMedia:HS,shimGetParameters:rg,shimGetUserMedia:Yp,shimOnTrack:Xp,shimPeerConnection:Bl,shimRTCDataChannel:tg,shimReceiverGetStats:Zp,shimRemoveStream:eg,shimSenderGetStats:Jp},Symbol.toStringTag,{value:"Module"}));function og(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function ag(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function lg(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(u,c){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return c?(f.then(u,c),Promise.resolve()):f},e.createAnswer=function(u,c){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return c?(f.then(u,c),Promise.resolve()):f};let a=function(l,u,c){const d=i.apply(this,[l]);return c?(d.then(u,c),Promise.resolve()):d};e.setLocalDescription=a,a=function(l,u,c){const d=s.apply(this,[l]);return c?(d.then(u,c),Promise.resolve()):d},e.setRemoteDescription=a,a=function(l,u,c){const d=o.apply(this,[l]);return c?(d.then(u,c),Promise.resolve()):d},e.addIceCandidate=a}function ug(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(cg(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function cg(t){return t&&t.video!==void 0?Object.assign({},t,{video:Up(t.video)}):t}function fg(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Ju("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function dg(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function hg(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function pg(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Xf=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:pg,shimCallbacksAPI:lg,shimConstraints:cg,shimCreateOfferLegacy:hg,shimGetUserMedia:ug,shimLocalStreamsAPI:og,shimRTCIceServerUrls:fg,shimRemoteStreamsAPI:ag,shimTrackEventTransceiver:dg},Symbol.toStringTag,{value:"Module"}));var gg={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const l=s[a],u=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(u){const c=e.parseRtpMap(u),d=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=d.length?e.parseFmtp(d[0]):{},c.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(l=>{a.rtcpFeedback.find(c=>c.type===l.type&&c.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),l=a.length>0&&a[0].ssrc;let u;const c=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(g=>parseInt(g,10)));c.length>0&&c[0].length>1&&c[0][0]===l&&(u=c[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let p={ssrc:l,codecPayloadType:parseInt(f.parameters.apt,10)};l&&u&&(p.rtx={ssrc:u}),r.push(p),s&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:l,mechanism:o?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&l&&r.push({ssrc:l});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(gg);var mg=gg.exports;const xr=ed(mg),VS=$g({__proto__:null,default:xr},[mg]);function Rs(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=xr.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Kn(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Hl(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Kn(t,"icecandidate",e=>{if(e.candidate){const n=xr.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Is(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=xr.splitSections(a.sdp);return l.shift(),l.some(u=>{const c=xr.parseMLine(u);return c&&c.kind==="application"&&c.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const u=parseInt(l[1],10);return u!==u?-1:u},i=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},s=function(a,l){let u=65536;e.browser==="firefox"&&e.version===57&&(u=65535);const c=xr.matchPrefix(a.sdp,"a=max-message-size:");return c.length>0?u=parseInt(c[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(u=2147483637),u},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),u=i(l),c=s(arguments[0],l);let d;u===0&&c===0?d=Number.POSITIVE_INFINITY:u===0||c===0?d=Math.max(u,c):d=Math.min(u,c);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function Ls(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Kn(t,"datachannel",r=>(e(r.channel,r.target),r))}function Vl(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function Wl(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Ms(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function js(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}const WS=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:Wl,shimAddIceCandidateNullOrEmpty:Ms,shimConnectionState:Vl,shimMaxMessageSize:Is,shimParameterlessSetLocalDescription:js,shimRTCIceCandidate:Rs,shimRTCIceCandidateRelayProtocol:Hl,shimSendThrowTypeError:Ls},Symbol.toStringTag,{value:"Module"}));function KS({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const n=Fp,r=BS(t),i={browserDetails:r,commonShim:WS,extractVersion:oi,disableLog:FS,disableWarnings:US,sdp:VS};switch(r.browser){case"chrome":if(!qf||!Ul||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=qf,Ms(t,r),js(t),Bp(t,r),Hp(t),Ul(t,r),Vp(t),Gp(t,r),Wp(t),Kp(t),qp(t,r),Rs(t),Hl(t),Vl(t),Is(t,r),Ls(t),Wl(t,r);break;case"firefox":if(!Yf||!Bl||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Yf,Ms(t,r),js(t),Yp(t,r),Bl(t,r),Xp(t),eg(t),Jp(t),Zp(t),tg(t),ng(t),rg(t),ig(t),sg(t),Rs(t),Vl(t),Is(t,r),Ls(t);break;case"safari":if(!Xf||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Xf,Ms(t,r),js(t),fg(t),hg(t),lg(t),og(t),ag(t),dg(t),ug(t),pg(t),Rs(t),Hl(t),Is(t,r),Ls(t),Wl(t,r);break;default:n("Unsupported browser!");break}return i}const Jf=KS({window:typeof window>"u"?void 0:window});function Qn(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}class vg{constructor(){this.chunkedMTU=16300,this._dataCount=1,this.chunk=e=>{const n=[],r=e.byteLength,i=Math.ceil(r/this.chunkedMTU);let s=0,o=0;for(;o<r;){const a=Math.min(r,o+this.chunkedMTU),l=e.slice(o,a),u={__peerData:this._dataCount,n:s,data:l,total:i};n.push(u),o=a,s++}return this._dataCount++,n}}}function QS(t){let e=0;for(const i of t)e+=i.byteLength;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.byteLength;return n}const Aa=Jf.default||Jf,ei=new class{isWebRTCSupported(){return typeof RTCPeerConnection<"u"}isBrowserSupported(){const t=this.getBrowser(),e=this.getVersion();return this.supportedBrowsers.includes(t)?t==="chrome"?e>=this.minChromeVersion:t==="firefox"?e>=this.minFirefoxVersion:t==="safari"?!this.isIOS&&e>=this.minSafariVersion:!1:!1}getBrowser(){return Aa.browserDetails.browser}getVersion(){return Aa.browserDetails.version||0}isUnifiedPlanSupported(){const t=this.getBrowser(),e=Aa.browserDetails.version||0;if(t==="chrome"&&e<this.minChromeVersion)return!1;if(t==="firefox"&&e>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;let n,r=!1;try{n=new RTCPeerConnection,n.addTransceiver("audio"),r=!0}catch{}finally{n&&n.close()}return r}toString(){return`Supports:
    browser:${this.getBrowser()}
    version:${this.getVersion()}
    isIOS:${this.isIOS}
    isWebRTCSupported:${this.isWebRTCSupported()}
    isBrowserSupported:${this.isBrowserSupported()}
    isUnifiedPlanSupported:${this.isUnifiedPlanSupported()}`}constructor(){this.isIOS=typeof navigator<"u"?["iPad","iPhone","iPod"].includes(navigator.platform):!1,this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}},GS=t=>!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(t),yg=()=>Math.random().toString(36).slice(2),Zf={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"};class qS extends vg{noop(){}blobToArrayBuffer(e,n){const r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r}binaryStringToArrayBuffer(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer}isSecure(){return location.protocol==="https:"}constructor(...e){super(...e),this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.defaultConfig=Zf,this.browser=ei.getBrowser(),this.browserVersion=ei.getVersion(),this.pack=Ap,this.unpack=Np,this.supports=function(){const n={browser:ei.isBrowserSupported(),webRTC:ei.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!n.webRTC)return n;let r;try{r=new RTCPeerConnection(Zf),n.audioVideo=!0;let i;try{i=r.createDataChannel("_PEERJSTEST",{ordered:!0}),n.data=!0,n.reliable=!!i.ordered;try{i.binaryType="blob",n.binaryBlob=!ei.isIOS}catch{}}catch{}finally{i&&i.close()}}catch{}finally{r&&r.close()}return n}(),this.validateId=GS,this.randomToken=yg}}const et=new qS,YS="PeerJS: ";class XS{get logLevel(){return this._logLevel}set logLevel(e){this._logLevel=e}log(...e){this._logLevel>=3&&this._print(3,...e)}warn(...e){this._logLevel>=2&&this._print(2,...e)}error(...e){this._logLevel>=1&&this._print(1,...e)}setLogFunction(e){this._print=e}_print(e,...n){const r=[YS,...n];for(const i in r)r[i]instanceof Error&&(r[i]="("+r[i].name+") "+r[i].message);e>=3?console.log(...r):e>=2?console.warn("WARNING",...r):e>=1&&console.error("ERROR",...r)}constructor(){this._logLevel=0}}var j=new XS,Zu={},JS=Object.prototype.hasOwnProperty,qe="~";function zi(){}Object.create&&(zi.prototype=Object.create(null),new zi().__proto__||(qe=!1));function ZS(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function Sg(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new ZS(n,r||t,i),o=qe?qe+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Ns(t,e){--t._eventsCount===0?t._events=new zi:delete t._events[e]}function Ve(){this._events=new zi,this._eventsCount=0}Ve.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)JS.call(n,r)&&e.push(qe?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};Ve.prototype.listeners=function(e){var n=qe?qe+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};Ve.prototype.listenerCount=function(e){var n=qe?qe+e:e,r=this._events[n];return r?r.fn?1:r.length:0};Ve.prototype.emit=function(e,n,r,i,s,o){var a=qe?qe+e:e;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,c,d;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,n),!0;case 3:return l.fn.call(l.context,n,r),!0;case 4:return l.fn.call(l.context,n,r,i),!0;case 5:return l.fn.call(l.context,n,r,i,s),!0;case 6:return l.fn.call(l.context,n,r,i,s,o),!0}for(d=1,c=new Array(u-1);d<u;d++)c[d-1]=arguments[d];l.fn.apply(l.context,c)}else{var f=l.length,p;for(d=0;d<f;d++)switch(l[d].once&&this.removeListener(e,l[d].fn,void 0,!0),u){case 1:l[d].fn.call(l[d].context);break;case 2:l[d].fn.call(l[d].context,n);break;case 3:l[d].fn.call(l[d].context,n,r);break;case 4:l[d].fn.call(l[d].context,n,r,i);break;default:if(!c)for(p=1,c=new Array(u-1);p<u;p++)c[p-1]=arguments[p];l[d].fn.apply(l[d].context,c)}}return!0};Ve.prototype.on=function(e,n,r){return Sg(this,e,n,r,!1)};Ve.prototype.once=function(e,n,r){return Sg(this,e,n,r,!0)};Ve.prototype.removeListener=function(e,n,r,i){var s=qe?qe+e:e;if(!this._events[s])return this;if(!n)return Ns(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&Ns(this,s);else{for(var a=0,l=[],u=o.length;a<u;a++)(o[a].fn!==n||i&&!o[a].once||r&&o[a].context!==r)&&l.push(o[a]);l.length?this._events[s]=l.length===1?l[0]:l:Ns(this,s)}return this};Ve.prototype.removeAllListeners=function(e){var n;return e?(n=qe?qe+e:e,this._events[n]&&Ns(this,n)):(this._events=new zi,this._eventsCount=0),this};Ve.prototype.off=Ve.prototype.removeListener;Ve.prototype.addListener=Ve.prototype.on;Ve.prefixed=qe;Ve.EventEmitter=Ve;Zu=Ve;var Gn={};Qn(Gn,"ConnectionType",()=>vn);Qn(Gn,"PeerErrorType",()=>ye);Qn(Gn,"BaseConnectionErrorType",()=>Kl);Qn(Gn,"DataConnectionErrorType",()=>ec);Qn(Gn,"SerializationType",()=>Lo);Qn(Gn,"SocketEventType",()=>an);Qn(Gn,"ServerMessageType",()=>Ue);var vn=function(t){return t.Data="data",t.Media="media",t}({}),ye=function(t){return t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc",t}({}),Kl=function(t){return t.NegotiationFailed="negotiation-failed",t.ConnectionClosed="connection-closed",t}({}),ec=function(t){return t.NotOpenYet="not-open-yet",t.MessageToBig="message-too-big",t}({}),Lo=function(t){return t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json",t.None="raw",t}({}),an=function(t){return t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close",t}({}),Ue=function(t){return t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE",t}({});const Cg="1.5.5";class eC extends Zu.EventEmitter{constructor(e,n,r,i,s,o=5e3){super(),this.pingInterval=o,this._disconnected=!0,this._messagesQueue=[];const a=e?"wss://":"ws://";this._baseUrl=a+n+":"+r+i+"peerjs?key="+s}start(e,n){this._id=e;const r=`${this._baseUrl}&id=${e}&token=${n}`;this._socket||!this._disconnected||(this._socket=new WebSocket(r+"&version="+Cg),this._disconnected=!1,this._socket.onmessage=i=>{let s;try{s=JSON.parse(i.data),j.log("Server message received:",s)}catch{j.log("Invalid server message",i.data);return}this.emit(an.Message,s)},this._socket.onclose=i=>{this._disconnected||(j.log("Socket closed.",i),this._cleanup(),this._disconnected=!0,this.emit(an.Disconnected))},this._socket.onopen=()=>{this._disconnected||(this._sendQueuedMessages(),j.log("Socket open"),this._scheduleHeartbeat())})}_scheduleHeartbeat(){this._wsPingTimer=setTimeout(()=>{this._sendHeartbeat()},this.pingInterval)}_sendHeartbeat(){if(!this._wsOpen()){j.log("Cannot send heartbeat, because socket closed");return}const e=JSON.stringify({type:Ue.Heartbeat});this._socket.send(e),this._scheduleHeartbeat()}_wsOpen(){return!!this._socket&&this._socket.readyState===1}_sendQueuedMessages(){const e=[...this._messagesQueue];this._messagesQueue=[];for(const n of e)this.send(n)}send(e){if(this._disconnected)return;if(!this._id){this._messagesQueue.push(e);return}if(!e.type){this.emit(an.Error,"Invalid message");return}if(!this._wsOpen())return;const n=JSON.stringify(e);this._socket.send(n)}close(){this._disconnected||(this._cleanup(),this._disconnected=!0)}_cleanup(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)}}class _g{constructor(e){this.connection=e}startConnection(e){const n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===vn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){const r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r._initializeDataChannel(s),this._makeOffer()}else this.handleSDP("OFFER",e.sdp)}_startPeerConnection(){j.log("Creating RTCPeerConnection.");const e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e}_setupListeners(e){const n=this.connection.peer,r=this.connection.connectionId,i=this.connection.type,s=this.connection.provider;j.log("Listening for ICE candidates."),e.onicecandidate=o=>{!o.candidate||!o.candidate.candidate||(j.log(`Received ICE candidates for ${n}:`,o.candidate),s.socket.send({type:Ue.Candidate,payload:{candidate:o.candidate,type:i,connectionId:r},dst:n}))},e.oniceconnectionstatechange=()=>{switch(e.iceConnectionState){case"failed":j.log("iceConnectionState is failed, closing connections to "+n),this.connection.emitError(Kl.NegotiationFailed,"Negotiation of connection to "+n+" failed."),this.connection.close();break;case"closed":j.log("iceConnectionState is closed, closing connections to "+n),this.connection.emitError(Kl.ConnectionClosed,"Connection to "+n+" closed."),this.connection.close();break;case"disconnected":j.log("iceConnectionState changed to disconnected on the connection with "+n);break;case"completed":e.onicecandidate=()=>{};break}this.connection.emit("iceStateChanged",e.iceConnectionState)},j.log("Listening for data channel"),e.ondatachannel=o=>{j.log("Received data channel");const a=o.channel;s.getConnection(n,r)._initializeDataChannel(a)},j.log("Listening for remote stream"),e.ontrack=o=>{j.log("Received remote stream");const a=o.streams[0],l=s.getConnection(n,r);if(l.type===vn.Media){const u=l;this._addStreamToMediaConnection(a,u)}}}cleanup(){j.log("Cleaning up PeerConnection to "+this.connection.peer);const e=this.connection.peerConnection;if(!e)return;this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=()=>{};const n=e.signalingState!=="closed";let r=!1;const i=this.connection.dataChannel;i&&(r=!!i.readyState&&i.readyState!=="closed"),(n||r)&&e.close()}async _makeOffer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createOffer(this.connection.options.constraints);j.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),j.log("Set localDescription:",r,`for:${this.connection.peer}`);let i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata};if(this.connection.type===vn.Data){const s=this.connection;i={...i,label:s.label,reliable:s.reliable,serialization:s.serialization}}n.socket.send({type:Ue.Offer,payload:i,dst:this.connection.peer})}catch(i){i!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(ye.WebRTC,i),j.log("Failed to setLocalDescription, ",i))}}catch(r){n.emitError(ye.WebRTC,r),j.log("Failed to createOffer, ",r)}}async _makeAnswer(){const e=this.connection.peerConnection,n=this.connection.provider;try{const r=await e.createAnswer();j.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp);try{await e.setLocalDescription(r),j.log("Set localDescription:",r,`for:${this.connection.peer}`),n.socket.send({type:Ue.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId},dst:this.connection.peer})}catch(i){n.emitError(ye.WebRTC,i),j.log("Failed to setLocalDescription, ",i)}}catch(r){n.emitError(ye.WebRTC,r),j.log("Failed to create answer, ",r)}}async handleSDP(e,n){n=new RTCSessionDescription(n);const r=this.connection.peerConnection,i=this.connection.provider;j.log("Setting remote description",n);const s=this;try{await r.setRemoteDescription(n),j.log(`Set remoteDescription:${e} for:${this.connection.peer}`),e==="OFFER"&&await s._makeAnswer()}catch(o){i.emitError(ye.WebRTC,o),j.log("Failed to setRemoteDescription, ",o)}}async handleCandidate(e){j.log("handleCandidate:",e);try{await this.connection.peerConnection.addIceCandidate(e),j.log(`Added ICE candidate for:${this.connection.peer}`)}catch(n){this.connection.provider.emitError(ye.WebRTC,n),j.log("Failed to handleCandidate, ",n)}}_addTracksToConnection(e,n){if(j.log(`add tracks from stream ${e.id} to peer connection`),!n.addTrack)return j.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(r=>{n.addTrack(r,e)})}_addStreamToMediaConnection(e,n){j.log(`add stream ${e.id} to media connection ${n.connectionId}`),n.addStream(e)}}class kg extends Zu.EventEmitter{emitError(e,n){j.error("Error:",n),this.emit("error",new tC(`${e}`,n))}}class tC extends Error{constructor(e,n){typeof n=="string"?super(n):(super(),Object.assign(this,n)),this.type=e}}class xg extends kg{get open(){return this._open}constructor(e,n,r){super(),this.peer=e,this.provider=n,this.options=r,this._open=!1,this.metadata=r.metadata}}var Gl;const yi=class yi extends xg{get type(){return vn.Media}get localStream(){return this._localStream}get remoteStream(){return this._remoteStream}constructor(e,n,r){super(e,n,r),this._localStream=this.options._stream,this.connectionId=this.options.connectionId||yi.ID_PREFIX+et.randomToken(),this._negotiator=new _g(this),this._localStream&&this._negotiator.startConnection({_stream:this._localStream,originator:!0})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{j.log(`DC#${this.connectionId} dc connection success`),this.emit("willCloseOnRemote")},this.dataChannel.onclose=()=>{j.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}addStream(e){j.log("Receiving stream",e),this._remoteStream=e,super.emit("stream",e)}handleMessage(e){const n=e.type,r=e.payload;switch(e.type){case Ue.Answer:this._negotiator.handleSDP(n,r.sdp),this._open=!0;break;case Ue.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:j.warn(`Unrecognized message type:${n} from peer:${this.peer}`);break}}answer(e,n={}){if(this._localStream){j.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=e,n&&n.sdpTransform&&(this.options.sdpTransform=n.sdpTransform),this._negotiator.startConnection({...this.options._payload,_stream:e});const r=this.provider._getMessages(this.connectionId);for(const i of r)this.handleMessage(i);this._open=!0}close(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,super.emit("close"))}};Gl=new WeakMap,Hr(yi,Gl,yi.ID_PREFIX="mc_");let lo=yi;class nC{constructor(e){this._options=e}_buildRequest(e){const n=this._options.secure?"https":"http",{host:r,port:i,path:s,key:o}=this._options,a=new URL(`${n}://${r}:${i}${s}${o}/${e}`);return a.searchParams.set("ts",`${Date.now()}${Math.random()}`),a.searchParams.set("version",Cg),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})}async retrieveId(){try{const e=await this._buildRequest("id");if(e.status!==200)throw new Error(`Error. Status:${e.status}`);return e.text()}catch(e){j.error("Error retrieving ID",e);let n="";throw this._options.path==="/"&&this._options.host!==et.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+n)}}async listAllPeers(){try{const e=await this._buildRequest("peers");if(e.status!==200){if(e.status===401){let n="";throw this._options.host===et.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}throw new Error(`Error. Status:${e.status}`)}return e.json()}catch(e){throw j.error("Error retrieving list peers",e),new Error("Could not get list peers from the server."+e)}}}var ql,Yl;const bn=class bn extends xg{get type(){return vn.Data}constructor(e,n,r){super(e,n,r),this.connectionId=this.options.connectionId||bn.ID_PREFIX+yg(),this.label=this.options.label||this.connectionId,this.reliable=!!this.options.reliable,this._negotiator=new _g(this),this._negotiator.startConnection(this.options._payload||{originator:!0,reliable:this.reliable})}_initializeDataChannel(e){this.dataChannel=e,this.dataChannel.onopen=()=>{j.log(`DC#${this.connectionId} dc connection success`),this._open=!0,this.emit("open")},this.dataChannel.onmessage=n=>{j.log(`DC#${this.connectionId} dc onmessage:`,n.data)},this.dataChannel.onclose=()=>{j.log(`DC#${this.connectionId} dc closed for:`,this.peer),this.close()}}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this.dataChannel=null),this.open&&(this._open=!1,super.emit("close"))}send(e,n=!1){if(!this.open){this.emitError(ec.NotOpenYet,"Connection is not open. You should listen for the `open` event before sending messages.");return}return this._send(e,n)}async handleMessage(e){const n=e.payload;switch(e.type){case Ue.Answer:await this._negotiator.handleSDP(e.type,n.sdp);break;case Ue.Candidate:await this._negotiator.handleCandidate(n.candidate);break;default:j.warn("Unrecognized message type:",e.type,"from peer:",this.peer);break}}};ql=new WeakMap,Yl=new WeakMap,Hr(bn,ql,bn.ID_PREFIX="dc_"),Hr(bn,Yl,bn.MAX_BUFFERED_AMOUNT=8388608);let uo=bn;class tc extends uo{get bufferSize(){return this._bufferSize}_initializeDataChannel(e){super._initializeDataChannel(e),this.dataChannel.binaryType="arraybuffer",this.dataChannel.addEventListener("message",n=>this._handleDataMessage(n))}_bufferedSend(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this._bufferSize=this._buffer.length)}_trySend(e){if(!this.open)return!1;if(this.dataChannel.bufferedAmount>uo.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(()=>{this._buffering=!1,this._tryBuffer()},50),!1;try{this.dataChannel.send(e)}catch(n){return j.error(`DC#:${this.connectionId} Error when sending:`,n),this._buffering=!0,this.close(),!1}return!0}_tryBuffer(){if(!this.open||this._buffer.length===0)return;const e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}close(e){if(e!=null&&e.flush){this.send({__peerData:{type:"close"}});return}this._buffer=[],this._bufferSize=0,super.close()}constructor(...e){super(...e),this._buffer=[],this._bufferSize=0,this._buffering=!1}}class $a extends tc{close(e){super.close(e),this._chunkedData={}}constructor(e,n,r){super(e,n,r),this.chunker=new vg,this.serialization=Lo.Binary,this._chunkedData={}}_handleDataMessage({data:e}){const n=Np(e),r=n.__peerData;if(r){if(r.type==="close"){this.close();return}this._handleChunk(n);return}this.emit("data",n)}_handleChunk(e){const n=e.__peerData,r=this._chunkedData[n]||{data:[],count:0,total:e.total};if(r.data[e.n]=new Uint8Array(e.data),r.count++,this._chunkedData[n]=r,r.total===r.count){delete this._chunkedData[n];const i=QS(r.data);this._handleDataMessage({data:i})}}_send(e,n){const r=Ap(e);if(r instanceof Promise)return this._send_blob(r);if(!n&&r.byteLength>this.chunker.chunkedMTU){this._sendChunks(r);return}this._bufferedSend(r)}async _send_blob(e){const n=await e;if(n.byteLength>this.chunker.chunkedMTU){this._sendChunks(n);return}this._bufferedSend(n)}_sendChunks(e){const n=this.chunker.chunk(e);j.log(`DC#${this.connectionId} Try to send ${n.length} chunks...`);for(const r of n)this.send(r,!0)}}class rC extends tc{_handleDataMessage({data:e}){super.emit("data",e)}_send(e,n){this._bufferedSend(e)}constructor(...e){super(...e),this.serialization=Lo.None}}class iC extends tc{_handleDataMessage({data:e}){const n=this.parse(this.decoder.decode(e)),r=n.__peerData;if(r&&r.type==="close"){this.close();return}this.emit("data",n)}_send(e,n){const r=this.encoder.encode(this.stringify(e));if(r.byteLength>=et.chunkedMTU){this.emitError(ec.MessageToBig,"Message too big for JSON channel");return}this._bufferedSend(r)}constructor(...e){super(...e),this.serialization=Lo.JSON,this.encoder=new TextEncoder,this.decoder=new TextDecoder,this.stringify=JSON.stringify,this.parse=JSON.parse}}var Xl;const Si=class Si extends kg{get id(){return this._id}get options(){return this._options}get open(){return this._open}get socket(){return this._socket}get connections(){const e=Object.create(null);for(const[n,r]of this._connections)e[n]=r;return e}get destroyed(){return this._destroyed}get disconnected(){return this._disconnected}constructor(e,n){super(),this._serializers={raw:rC,json:iC,binary:$a,"binary-utf8":$a,default:$a},this._id=null,this._lastServerId=null,this._destroyed=!1,this._disconnected=!1,this._open=!1,this._connections=new Map,this._lostMessages=new Map;let r;if(e&&e.constructor==Object?n=e:e&&(r=e.toString()),n={debug:0,host:et.CLOUD_HOST,port:et.CLOUD_PORT,path:"/",key:Si.DEFAULT_KEY,token:et.randomToken(),config:et.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin",serializers:{},...n},this._options=n,this._serializers={...this._serializers,...this.options.serializers},this._options.host==="/"&&(this._options.host=window.location.hostname),this._options.path&&(this._options.path[0]!=="/"&&(this._options.path="/"+this._options.path),this._options.path[this._options.path.length-1]!=="/"&&(this._options.path+="/")),this._options.secure===void 0&&this._options.host!==et.CLOUD_HOST?this._options.secure=et.isSecure():this._options.host==et.CLOUD_HOST&&(this._options.secure=!0),this._options.logFunction&&j.setLogFunction(this._options.logFunction),j.logLevel=this._options.debug||0,this._api=new nC(n),this._socket=this._createServerConnection(),!et.supports.audioVideo&&!et.supports.data){this._delayedAbort(ye.BrowserIncompatible,"The current browser does not support WebRTC");return}if(r&&!et.validateId(r)){this._delayedAbort(ye.InvalidID,`ID "${r}" is invalid`);return}r?this._initialize(r):this._api.retrieveId().then(i=>this._initialize(i)).catch(i=>this._abort(ye.ServerError,i))}_createServerConnection(){const e=new eC(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return e.on(an.Message,n=>{this._handleMessage(n)}),e.on(an.Error,n=>{this._abort(ye.SocketError,n)}),e.on(an.Disconnected,()=>{this.disconnected||(this.emitError(ye.Network,"Lost connection to server."),this.disconnect())}),e.on(an.Close,()=>{this.disconnected||this._abort(ye.SocketClosed,"Underlying socket is already closed.")}),e}_initialize(e){this._id=e,this.socket.start(e,this._options.token)}_handleMessage(e){const n=e.type,r=e.payload,i=e.src;switch(n){case Ue.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Ue.Error:this._abort(ye.ServerError,r.msg);break;case Ue.IdTaken:this._abort(ye.UnavailableID,`ID "${this.id}" is taken`);break;case Ue.InvalidKey:this._abort(ye.InvalidKey,`API KEY "${this._options.key}" is invalid`);break;case Ue.Leave:j.log(`Received leave message from ${i}`),this._cleanupPeer(i),this._connections.delete(i);break;case Ue.Expire:this.emitError(ye.PeerUnavailable,`Could not connect to peer ${i}`);break;case Ue.Offer:{const s=r.connectionId;let o=this.getConnection(i,s);if(o&&(o.close(),j.warn(`Offer received for existing Connection ID:${s}`)),r.type===vn.Media){const l=new lo(i,this,{connectionId:s,_payload:r,metadata:r.metadata});o=l,this._addConnection(i,o),this.emit("call",l)}else if(r.type===vn.Data){const l=new this._serializers[r.serialization](i,this,{connectionId:s,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable});o=l,this._addConnection(i,o),this.emit("connection",l)}else{j.warn(`Received malformed connection type:${r.type}`);return}const a=this._getMessages(s);for(const l of a)o.handleMessage(l);break}default:{if(!r){j.warn(`You received a malformed message from ${i} of type ${n}`);return}const s=r.connectionId,o=this.getConnection(i,s);o&&o.peerConnection?o.handleMessage(e):s?this._storeMessage(s,e):j.warn("You received an unrecognized message:",e);break}}}_storeMessage(e,n){this._lostMessages.has(e)||this._lostMessages.set(e,[]),this._lostMessages.get(e).push(n)}_getMessages(e){const n=this._lostMessages.get(e);return n?(this._lostMessages.delete(e),n):[]}connect(e,n={}){if(n={serialization:"default",...n},this.disconnected){j.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}const r=new this._serializers[n.serialization](e,this,n);return this._addConnection(e,r),r}call(e,n,r={}){if(this.disconnected){j.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(ye.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!n){j.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}const i=new lo(e,this,{...r,_stream:n});return this._addConnection(e,i),i}_addConnection(e,n){j.log(`add connection ${n.type}:${n.connectionId} to peerId:${e}`),this._connections.has(e)||this._connections.set(e,[]),this._connections.get(e).push(n)}_removeConnection(e){const n=this._connections.get(e.peer);if(n){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}this._lostMessages.delete(e.connectionId)}getConnection(e,n){const r=this._connections.get(e);if(!r)return null;for(const i of r)if(i.connectionId===n)return i;return null}_delayedAbort(e,n){setTimeout(()=>{this._abort(e,n)},0)}_abort(e,n){j.error("Aborting!"),this.emitError(e,n),this._lastServerId?this.disconnect():this.destroy()}destroy(){this.destroyed||(j.log(`Destroy peer with ID:${this.id}`),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))}_cleanup(){for(const e of this._connections.keys())this._cleanupPeer(e),this._connections.delete(e);this.socket.removeAllListeners()}_cleanupPeer(e){const n=this._connections.get(e);if(n)for(const r of n)r.close()}disconnect(){if(this.disconnected)return;const e=this.id;j.log(`Disconnect peer with ID:${e}`),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=e,this._id=null,this.emit("disconnected",e)}reconnect(){if(this.disconnected&&!this.destroyed)j.log(`Attempting reconnection to server with ID ${this._lastServerId}`),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)j.error("In a hurry? We're still trying to make the initial connection!");else throw new Error(`Peer ${this.id} cannot reconnect because it is not disconnected from the server!`)}}listAllPeers(e=n=>{}){this._api.listAllPeers().then(n=>e(n)).catch(n=>this._abort(ye.ServerError,n))}};Xl=new WeakMap,Hr(Si,Xl,Si.DEFAULT_KEY="peerjs");let Ql=Si;const wn=["To go wrong in one's own way is better than to go right in someone else's.","Pain and suffering are always inevitable for a large intelligence and a deep heart.","The darker the night, the brighter the stars.","It takes something more than intelligence to act intelligently.","We sometimes encounter people, even perfect strangers, who begin to interest us at first sight.","Beauty will save the world.","I am a sick man... I am a spiteful man.","Man is a creature that can get used to anything, and I think that is the best definition of him.","Taking a new step, uttering a new word, is what people fear most.","If you want to be respected by others, the great thing is to respect yourself."];function sC({mode:t}){const[e,n]=T.useState(new ba),[r,i]=T.useState(e.fen()),[s,o]=T.useState([]),[a,l]=T.useState(wn[0]),[u,c]=T.useState(!1),[d,f]=T.useState(""),p=T.useRef(null),[g,S]=T.useState(!1),[O,m]=T.useState(null),[h,y]=T.useState(null),[E,D]=T.useState(""),[b,I]=T.useState(null),[L,G]=T.useState("white"),[U,J]=T.useState("");T.useEffect(()=>{const N=new ba;n(N),i(N.fen()),c(!1),o([]),l(wn[Math.floor(Math.random()*wn.length)]),p.current&&(p.current.terminate(),p.current=null),O&&(O.destroy(),m(null)),t==="ai"?re():t==="online"&&he()},[t]);const re=async()=>{try{J("Loading Engine...");const N=await fetch("https://cdnjs.cloudflare.com/ajax/libs/stockfish.js/10.0.0/stockfish.js");if(!N.ok)throw new Error("Failed to load Stockfish");const Y=await N.text(),ue=new Blob([Y],{type:"application/javascript"}),Re=new Worker(URL.createObjectURL(ue));Re.onmessage=_e=>{const B=_e.data;if(B==="uciok"&&(S(!0),J("")),B.startsWith("bestmove")){const Ne=B.split(" ")[1];Ne&&me({from:Ne.substring(0,2),to:Ne.substring(2,4),promotion:Ne.substring(4,5)||"q"})}},p.current=Re,Re.postMessage("uci"),Re.postMessage("isready")}catch(N){console.error(N),J("Failed to load engine (Network error?)")}};T.useEffect(()=>{t==="ai"&&g&&e.turn()==="b"&&!u&&setTimeout(()=>{p.current.postMessage(`position fen ${e.fen()}`),p.current.postMessage("go depth 10")},500)},[r,t,g,u]);const he=()=>{const N=new Ql;N.on("open",Y=>{y(Y),J("Waiting for opponent...")}),N.on("connection",Y=>{I(Y),J("Connected!"),be(Y),G("white")}),m(N)},We=()=>{if(!O||!E)return;const N=O.connect(E);I(N),J("Connecting..."),be(N),G("black")},be=N=>{N.on("open",()=>{J("Game Started!")}),N.on("data",Y=>{Y.type==="move"&&me(Y.move,!0),Y.type==="reset"&&F(!1)}),N.on("close",()=>{J("Opponent disconnected."),I(null)})};function me(N,Y=!1){try{const ue=e.move(N);if(ue){const Re=e.fen();return i(Re),o(_e=>[..._e,ue.san]),R(),(ue.captured||e.isCheck())&&l(wn[Math.floor(Math.random()*wn.length)]),t==="online"&&!Y&&b&&b.send({type:"move",move:N}),!0}}catch(ue){return console.error("Invalid move",ue),!1}return!1}function Ce(N,Y){return u||t==="online"&&e.turn()!==L[0]||t==="ai"&&e.turn()==="b"?!1:me({from:N,to:Y,promotion:"q"})}function R(){e.isGameOver()&&(c(!0),e.isCheckmate()?f("Checkmate. The struggle is over."):e.isDraw()?f("Draw. A stalemate of souls."):f("Game Over."))}function F(N=!0){const Y=new ba;n(Y),i(Y.fen()),o([]),c(!1),l(wn[Math.floor(Math.random()*wn.length)]),t==="online"&&N&&b&&b.send({type:"reset"})}const V={backgroundColor:"#5c4d3c"},Z={backgroundColor:"#f4e4bc"};return v.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 items-start justify-center",children:[v.jsxs("div",{className:"w-full max-w-[600px] aspect-square shadow-2xl border-4 border-dostoevsky-ink/50 rounded-sm relative",children:[v.jsx(wS,{position:r,onPieceDrop:Ce,customDarkSquareStyle:V,customLightSquareStyle:Z,boardOrientation:L}),U&&v.jsx("div",{className:"absolute top-2 left-2 bg-dostoevsky-gloom/80 text-white px-2 py-1 text-xs rounded",children:U})]}),v.jsxs("div",{className:"w-full lg:w-80 bg-dostoevsky-paper border-2 border-dostoevsky-ink p-6 shadow-xl relative min-h-[400px] flex flex-col",children:[v.jsxs("h2",{className:"text-2xl font-title text-dostoevsky-ink mb-4 border-b border-dostoevsky-ink pb-2",children:[t==="local"&&"Local Skirmish",t==="ai"&&"Man vs Machine",t==="online"&&"Distant Minds"]}),t==="online"&&!b&&v.jsxs("div",{className:"mb-4 p-4 bg-dostoevsky-ink/10 rounded",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("p",{className:"text-xs uppercase tracking-widest text-dostoevsky-ink/60 mb-1",children:"Your Identity"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("code",{className:"bg-white px-2 py-1 rounded border border-dostoevsky-ink flex-1 text-sm overflow-hidden text-ellipsis",children:h||"Generating..."}),v.jsx("button",{onClick:()=>navigator.clipboard.writeText(h),className:"p-1 hover:text-dostoevsky-blood text-dostoevsky-ink",title:"Copy ID",children:v.jsx(RS,{size:16})})]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-xs uppercase tracking-widest text-dostoevsky-ink/60 mb-1",children:"Opponent's Identity"}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("input",{value:E,onChange:N=>D(N.target.value),className:"flex-1 px-2 py-1 border border-dostoevsky-ink bg-white text-sm",placeholder:"Enter code..."}),v.jsx("button",{onClick:We,className:"bg-dostoevsky-ink text-white px-3 py-1 text-sm hover:bg-dostoevsky-blood",children:"Connect"})]})]})]}),v.jsxs("div",{className:"mb-6 italic text-dostoevsky-accent text-lg font-serif leading-relaxed min-h-[4rem]",children:['"',a,'"']}),u&&v.jsx("div",{className:"mb-6 p-4 bg-dostoevsky-blood/10 border border-dostoevsky-blood text-dostoevsky-blood font-bold text-center animate-pulse",children:d}),v.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[v.jsx("h3",{className:"font-bold border-b border-dostoevsky-ink/20 pb-1 mb-2 text-sm uppercase tracking-wider",children:"Chronicle"}),v.jsx("div",{className:"flex-1 overflow-y-auto text-sm font-mono bg-white/50 p-2 border border-dostoevsky-ink/10",children:s.map((N,Y)=>v.jsxs("span",{className:"inline-block mr-2",children:[Y%2===0?v.jsxs("span",{className:"text-dostoevsky-ink/50 mr-1",children:[Math.floor(Y/2)+1,"."]}):"",v.jsx("span",{className:Y%2===0?"text-dostoevsky-ink":"text-dostoevsky-blood",children:N})]},Y))})]}),v.jsxs("button",{onClick:()=>F(!0),className:"mt-4 w-full flex items-center justify-center gap-2 border border-dostoevsky-ink py-2 text-dostoevsky-ink hover:bg-dostoevsky-ink hover:text-dostoevsky-paper transition-all",children:[v.jsx(LS,{size:16})," Start Anew"]})]})]})}function oC(){const[t,e]=T.useState(null);return v.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4",children:[v.jsxs("header",{className:"mb-8 text-center",children:[v.jsx("h1",{className:"text-6xl font-title text-dostoevsky-ink mb-2",children:"The Idiot's Gambit"}),v.jsx("p",{className:"text-xl italic text-dostoevsky-accent",children:'"But how could you live and have no story to tell?"'})]}),t?v.jsxs("div",{className:"w-full max-w-6xl",children:[v.jsxs("button",{onClick:()=>e(null),className:"mb-4 flex items-center gap-2 text-dostoevsky-ink hover:text-dostoevsky-blood transition-colors font-serif",children:[v.jsx(MS,{size:20})," Return to Society"]}),v.jsx(sC,{mode:t})]}):v.jsxs("div",{className:"max-w-md w-full bg-dostoevsky-paper border-2 border-dostoevsky-ink p-8 shadow-2xl rounded-sm transform rotate-1",children:[v.jsxs("div",{className:"space-y-6",children:[v.jsxs("button",{onClick:()=>e("local"),className:"w-full flex items-center justify-center gap-3 bg-dostoevsky-ink text-dostoevsky-paper py-4 px-6 hover:bg-dostoevsky-blood transition-colors duration-300 font-serif text-xl border border-transparent hover:border-dostoevsky-ink",children:[v.jsx(jS,{size:24}),v.jsx("span",{children:"Face a Friend (Local)"})]}),v.jsxs("button",{onClick:()=>e("ai"),className:"w-full flex items-center justify-center gap-3 bg-dostoevsky-ink text-dostoevsky-paper py-4 px-6 hover:bg-dostoevsky-blood transition-colors duration-300 font-serif text-xl border border-transparent hover:border-dostoevsky-ink",children:[v.jsx(IS,{size:24}),v.jsx("span",{children:"Challenge the Machine"})]}),v.jsxs("button",{onClick:()=>e("online"),className:"w-full flex items-center justify-center gap-3 bg-dostoevsky-ink text-dostoevsky-paper py-4 px-6 hover:bg-dostoevsky-blood transition-colors duration-300 font-serif text-xl border border-transparent hover:border-dostoevsky-ink",children:[v.jsx(bS,{size:24}),v.jsx("span",{children:"Correspondence (Online)"})]})]}),v.jsx("div",{className:"mt-8 pt-6 border-t border-dostoevsky-ink/20 text-center text-dostoevsky-ink/60 text-sm italic font-serif",children:v.jsx("p",{children:"Fyodor Dostoevsky Themed Chess"})})]})]})}za.createRoot(document.getElementById("root")).render(v.jsx(e0.StrictMode,{children:v.jsx(oC,{})}));
